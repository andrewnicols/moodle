{"version":3,"sources":["../src/stickycolspan.js"],"names":["SELECTORS","GRADEPARENT","STUDENTHEADER","TABLEHEADER","BEHAT","init","document","querySelector","grader","studentHeader","leftOffset","getComputedStyle","getPropertyValue","rightOffset","querySelectorAll","forEach","tableHeader","colSpan","addOffset","offsetWidth","window","right_to_left","style","right","left"],"mappings":"uKAuBMA,CAAAA,SAAS,CAAG,CACdC,WAAW,CAAE,cADC,CAEdC,aAAa,CAAE,gBAFD,CAGdC,WAAW,CAAE,WAHC,CAIdC,KAAK,CAAE,iBAJO,C,eAUE,QAAPC,CAAAA,IAAO,EAAM,CACtB,GAAIC,QAAQ,CAACC,aAAT,CAAuBP,SAAS,CAACI,KAAjC,CAAJ,CAA6C,CACzC,MACH,CAHqB,GAIhBI,CAAAA,MAAM,CAAGF,QAAQ,CAACC,aAAT,CAAuBP,SAAS,CAACC,WAAjC,CAJO,CAKhBQ,aAAa,CAAGD,MAAM,CAACD,aAAP,CAAqBP,SAAS,CAACE,aAA/B,CALA,CAMhBQ,UAAU,CAAGC,gBAAgB,CAACF,aAAD,CAAhB,CAAgCG,gBAAhC,CAAiD,MAAjD,CANG,CAOhBC,WAAW,CAAGF,gBAAgB,CAACF,aAAD,CAAhB,CAAgCG,gBAAhC,CAAiD,OAAjD,CAPE,CAStBJ,MAAM,CAACM,gBAAP,CAAwBd,SAAS,CAACG,WAAlC,EAA+CY,OAA/C,CAAuD,SAACC,WAAD,CAAiB,CACpE,GAA0B,CAAtB,CAAAA,WAAW,CAACC,OAAhB,CAA6B,CACzB,GAAMC,CAAAA,SAAS,CAAIF,WAAW,CAACG,WAAZ,CAA0BV,aAAa,CAACU,WAA3D,CACA,GAAIC,MAAM,CAACC,aAAP,EAAJ,CAA4B,CACxBL,WAAW,CAACM,KAAZ,CAAkBC,KAAlB,CAA0B,QAAUV,WAAV,CAAwB,KAAxB,CAAgCK,SAAhC,CAA4C,MACzE,CAFD,IAEO,CACHF,WAAW,CAACM,KAAZ,CAAkBE,IAAlB,CAAyB,QAAUd,UAAV,CAAuB,KAAvB,CAA+BQ,SAA/B,CAA2C,MACvE,CACJ,CACJ,CATD,CAUH,C","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Javascript module for fixing the position of sticky headers with multiple colspans\n *\n * @module      gradereport_grader/stickycolspan\n * @copyright   2022 Bas Brands <bas@moodle.com>\n * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nconst SELECTORS = {\n    GRADEPARENT: '.gradeparent',\n    STUDENTHEADER: '#studentheader',\n    TABLEHEADER: 'th.header',\n    BEHAT: 'body.behat-site'\n};\n\n/**\n * Initialize module\n */\nexport const init = () => {\n    if (document.querySelector(SELECTORS.BEHAT)) {\n        return;\n    }\n    const grader = document.querySelector(SELECTORS.GRADEPARENT);\n    const studentHeader = grader.querySelector(SELECTORS.STUDENTHEADER);\n    const leftOffset = getComputedStyle(studentHeader).getPropertyValue('left');\n    const rightOffset = getComputedStyle(studentHeader).getPropertyValue('right');\n\n    grader.querySelectorAll(SELECTORS.TABLEHEADER).forEach((tableHeader) => {\n        if (tableHeader.colSpan > 1) {\n            const addOffset = (tableHeader.offsetWidth - studentHeader.offsetWidth);\n            if (window.right_to_left()) {\n                tableHeader.style.right = 'calc(' + rightOffset + ' - ' + addOffset + 'px )';\n            } else {\n                tableHeader.style.left = 'calc(' + leftOffset + ' - ' + addOffset + 'px )';\n            }\n        }\n    });\n};\n"],"file":"stickycolspan.min.js"}