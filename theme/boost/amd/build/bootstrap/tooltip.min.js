define ("theme_boost/bootstrap/tooltip",["exports","./tools/sanitizer","jquery","core/popper","./util"],function(_exports,_sanitizer,_jquery,_popper,_util){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.default=void 0;_jquery=_interopRequireDefault(_jquery);_popper=_interopRequireDefault(_popper);_util=_interopRequireDefault(_util);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}const NAME="tooltip",DATA_KEY="bs.tooltip",EVENT_KEY=".".concat(DATA_KEY),JQUERY_NO_CONFLICT=_jquery.default.fn[NAME],CLASS_PREFIX="bs-tooltip",BSCLS_PREFIX_REGEX=new RegExp("(^|\\s)".concat(CLASS_PREFIX,"\\S+"),"g"),DISALLOWED_ATTRIBUTES=["sanitize","whiteList","sanitizeFn"],DefaultType={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string|function)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)",customClass:"(string|function)",sanitize:"boolean",sanitizeFn:"(null|function)",whiteList:"object",popperConfig:"(null|object)"},AttachmentMap={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},Default={animation:!0,template:"<div class=\"tooltip\" role=\"tooltip\"><div class=\"arrow\"></div><div class=\"tooltip-inner\"></div></div>",trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:0,container:!1,fallbackPlacement:"flip",boundary:"scrollParent",customClass:"",sanitize:!0,sanitizeFn:null,whiteList:_sanitizer.DefaultWhitelist,popperConfig:null},HOVER_STATE_SHOW="show",HOVER_STATE_OUT="out",Event={HIDE:"hide".concat(EVENT_KEY),HIDDEN:"hidden".concat(EVENT_KEY),SHOW:"show".concat(EVENT_KEY),SHOWN:"shown".concat(EVENT_KEY),INSERTED:"inserted".concat(EVENT_KEY),CLICK:"click".concat(EVENT_KEY),FOCUSIN:"focusin".concat(EVENT_KEY),FOCUSOUT:"focusout".concat(EVENT_KEY),MOUSEENTER:"mouseenter".concat(EVENT_KEY),MOUSELEAVE:"mouseleave".concat(EVENT_KEY)},CLASS_NAME_FADE="fade",CLASS_NAME_SHOW="show",TRIGGER_HOVER="hover",TRIGGER_FOCUS="focus";class Tooltip{constructor(element,config){if("undefined"==typeof _popper.default){throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)")}this._isEnabled=!0;this._timeout=0;this._hoverState="";this._activeTrigger={};this._popper=null;this.element=element;this.config=this._getConfig(config);this.tip=null;this._setListeners()}static get VERSION(){return"4.6.0"}static get Default(){return Default}static get NAME(){return NAME}static get DATA_KEY(){return DATA_KEY}static get Event(){return Event}static get EVENT_KEY(){return EVENT_KEY}static get DefaultType(){return DefaultType}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(event){if(!this._isEnabled){return}if(event){const dataKey=this.constructor.DATA_KEY;let context=(0,_jquery.default)(event.currentTarget).data(dataKey);if(!context){context=new this.constructor(event.currentTarget,this._getDelegateConfig());(0,_jquery.default)(event.currentTarget).data(dataKey,context)}context._activeTrigger.click=!context._activeTrigger.click;if(context._isWithActiveTrigger()){context._enter(null,context)}else{context._leave(null,context)}}else{if((0,_jquery.default)(this.getTipElement()).hasClass(CLASS_NAME_SHOW)){this._leave(null,this);return}this._enter(null,this)}}dispose(){clearTimeout(this._timeout);_jquery.default.removeData(this.element,this.constructor.DATA_KEY);(0,_jquery.default)(this.element).off(this.constructor.EVENT_KEY);(0,_jquery.default)(this.element).closest(".modal").off("hide.bs.modal",this._hideModalHandler);if(this.tip){(0,_jquery.default)(this.tip).remove()}this._isEnabled=null;this._timeout=null;this._hoverState=null;this._activeTrigger=null;if(this._popper){this._popper.destroy()}this._popper=null;this.element=null;this.config=null;this.tip=null}show(){if("none"===(0,_jquery.default)(this.element).css("display")){throw new Error("Please use show on visible elements")}const showEvent=_jquery.default.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){(0,_jquery.default)(this.element).trigger(showEvent);const shadowRoot=_util.default.findShadowRoot(this.element),isInTheDom=_jquery.default.contains(null!==shadowRoot?shadowRoot:this.element.ownerDocument.documentElement,this.element);if(showEvent.isDefaultPrevented()||!isInTheDom){return}const tip=this.getTipElement(),tipId=_util.default.getUID(this.constructor.NAME);tip.setAttribute("id",tipId);this.element.setAttribute("aria-describedby",tipId);this.setContent();if(this.config.animation){(0,_jquery.default)(tip).addClass(CLASS_NAME_FADE)}const placement="function"==typeof this.config.placement?this.config.placement.call(this,tip,this.element):this.config.placement,attachment=this._getAttachment(placement);this.addAttachmentClass(attachment);const container=this._getContainer();(0,_jquery.default)(tip).data(this.constructor.DATA_KEY,this);if(!_jquery.default.contains(this.element.ownerDocument.documentElement,this.tip)){(0,_jquery.default)(tip).appendTo(container)}(0,_jquery.default)(this.element).trigger(this.constructor.Event.INSERTED);this._popper=new _popper.default(this.element,tip,this._getPopperConfig(attachment));(0,_jquery.default)(tip).addClass(CLASS_NAME_SHOW);(0,_jquery.default)(tip).addClass(this.config.customClass);if("ontouchstart"in document.documentElement){(0,_jquery.default)(document.body).children().on("mouseover",null,_jquery.default.noop)}const complete=()=>{if(this.config.animation){this._fixTransition()}const prevHoverState=this._hoverState;this._hoverState=null;(0,_jquery.default)(this.element).trigger(this.constructor.Event.SHOWN);if(prevHoverState===HOVER_STATE_OUT){this._leave(null,this)}};if((0,_jquery.default)(this.tip).hasClass(CLASS_NAME_FADE)){const transitionDuration=_util.default.getTransitionDurationFromElement(this.tip);(0,_jquery.default)(this.tip).one(_util.default.TRANSITION_END,complete).emulateTransitionEnd(transitionDuration)}else{complete()}}}hide(callback){const tip=this.getTipElement(),hideEvent=_jquery.default.Event(this.constructor.Event.HIDE),complete=()=>{if(this._hoverState!==HOVER_STATE_SHOW&&tip.parentNode){tip.parentNode.removeChild(tip)}this._cleanTipClass();this.element.removeAttribute("aria-describedby");(0,_jquery.default)(this.element).trigger(this.constructor.Event.HIDDEN);if(null!==this._popper){this._popper.destroy()}if(callback){callback()}};(0,_jquery.default)(this.element).trigger(hideEvent);if(hideEvent.isDefaultPrevented()){return}(0,_jquery.default)(tip).removeClass(CLASS_NAME_SHOW);if("ontouchstart"in document.documentElement){(0,_jquery.default)(document.body).children().off("mouseover",null,_jquery.default.noop)}this._activeTrigger["click"]=!1;this._activeTrigger[TRIGGER_FOCUS]=!1;this._activeTrigger[TRIGGER_HOVER]=!1;if((0,_jquery.default)(this.tip).hasClass(CLASS_NAME_FADE)){const transitionDuration=_util.default.getTransitionDurationFromElement(tip);(0,_jquery.default)(tip).one(_util.default.TRANSITION_END,complete).emulateTransitionEnd(transitionDuration)}else{complete()}this._hoverState=""}update(){if(null!==this._popper){this._popper.scheduleUpdate()}}isWithContent(){return!!this.getTitle()}addAttachmentClass(attachment){(0,_jquery.default)(this.getTipElement()).addClass("".concat(CLASS_PREFIX,"-").concat(attachment))}getTipElement(){this.tip=this.tip||(0,_jquery.default)(this.config.template)[0];return this.tip}setContent(){const tip=this.getTipElement();this.setElementContent((0,_jquery.default)(tip.querySelectorAll(".tooltip-inner")),this.getTitle());(0,_jquery.default)(tip).removeClass("".concat(CLASS_NAME_FADE," ").concat(CLASS_NAME_SHOW))}setElementContent($element,content){if("object"==typeof content&&(content.nodeType||content.jquery)){if(this.config.html){if(!(0,_jquery.default)(content).parent().is($element)){$element.empty().append(content)}}else{$element.text((0,_jquery.default)(content).text())}return}if(this.config.html){if(this.config.sanitize){content=(0,_sanitizer.sanitizeHtml)(content,this.config.whiteList,this.config.sanitizeFn)}$element.html(content)}else{$element.text(content)}}getTitle(){let title=this.element.getAttribute("data-original-title");if(!title){title="function"==typeof this.config.title?this.config.title.call(this.element):this.config.title}return title}_getPopperConfig(attachment){const defaultBsConfig={placement:attachment,modifiers:{offset:this._getOffset(),flip:{behavior:this.config.fallbackPlacement},arrow:{element:".arrow"},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:data=>{if(data.originalPlacement!==data.placement){this._handlePopperPlacementChange(data)}},onUpdate:data=>this._handlePopperPlacementChange(data)};return{...defaultBsConfig,...this.config.popperConfig}}_getOffset(){const offset={};if("function"==typeof this.config.offset){offset.fn=data=>{data.offsets={...data.offsets,...(this.config.offset(data.offsets,this.element)||{})};return data}}else{offset.offset=this.config.offset}return offset}_getContainer(){if(!1===this.config.container){return document.body}if(_util.default.isElement(this.config.container)){return(0,_jquery.default)(this.config.container)}return(0,_jquery.default)(document).find(this.config.container)}_getAttachment(placement){return AttachmentMap[placement.toUpperCase()]}_setListeners(){const triggers=this.config.trigger.split(" ");triggers.forEach(trigger=>{if("click"===trigger){(0,_jquery.default)(this.element).on(this.constructor.Event.CLICK,this.config.selector,event=>this.toggle(event))}else if(trigger!=="manual"){const eventIn=trigger===TRIGGER_HOVER?this.constructor.Event.MOUSEENTER:this.constructor.Event.FOCUSIN,eventOut=trigger===TRIGGER_HOVER?this.constructor.Event.MOUSELEAVE:this.constructor.Event.FOCUSOUT;(0,_jquery.default)(this.element).on(eventIn,this.config.selector,event=>this._enter(event)).on(eventOut,this.config.selector,event=>this._leave(event))}});this._hideModalHandler=()=>{if(this.element){this.hide()}};(0,_jquery.default)(this.element).closest(".modal").on("hide.bs.modal",this._hideModalHandler);if(this.config.selector){this.config={...this.config,trigger:"manual",selector:""}}else{this._fixTitle()}}_fixTitle(){const titleType=typeof this.element.getAttribute("data-original-title");if(this.element.getAttribute("title")||"string"!==titleType){this.element.setAttribute("data-original-title",this.element.getAttribute("title")||"");this.element.setAttribute("title","")}}_enter(event,context){const dataKey=this.constructor.DATA_KEY;context=context||(0,_jquery.default)(event.currentTarget).data(dataKey);if(!context){context=new this.constructor(event.currentTarget,this._getDelegateConfig());(0,_jquery.default)(event.currentTarget).data(dataKey,context)}if(event){context._activeTrigger["focusin"===event.type?TRIGGER_FOCUS:TRIGGER_HOVER]=!0}if((0,_jquery.default)(context.getTipElement()).hasClass(CLASS_NAME_SHOW)||context._hoverState===HOVER_STATE_SHOW){context._hoverState=HOVER_STATE_SHOW;return}clearTimeout(context._timeout);context._hoverState=HOVER_STATE_SHOW;if(!context.config.delay||!context.config.delay.show){context.show();return}context._timeout=setTimeout(()=>{if(context._hoverState===HOVER_STATE_SHOW){context.show()}},context.config.delay.show)}_leave(event,context){const dataKey=this.constructor.DATA_KEY;context=context||(0,_jquery.default)(event.currentTarget).data(dataKey);if(!context){context=new this.constructor(event.currentTarget,this._getDelegateConfig());(0,_jquery.default)(event.currentTarget).data(dataKey,context)}if(event){context._activeTrigger["focusout"===event.type?TRIGGER_FOCUS:TRIGGER_HOVER]=!1}if(context._isWithActiveTrigger()){return}clearTimeout(context._timeout);context._hoverState=HOVER_STATE_OUT;if(!context.config.delay||!context.config.delay.hide){context.hide();return}context._timeout=setTimeout(()=>{if(context._hoverState===HOVER_STATE_OUT){context.hide()}},context.config.delay.hide)}_isWithActiveTrigger(){for(const trigger in this._activeTrigger){if(this._activeTrigger[trigger]){return!0}}return!1}_getConfig(config){const dataAttributes=(0,_jquery.default)(this.element).data();Object.keys(dataAttributes).forEach(dataAttr=>{if(-1!==DISALLOWED_ATTRIBUTES.indexOf(dataAttr)){delete dataAttributes[dataAttr]}});config={...this.constructor.Default,...dataAttributes,...("object"==typeof config&&config?config:{})};if("number"==typeof config.delay){config.delay={show:config.delay,hide:config.delay}}if("number"==typeof config.title){config.title=config.title.toString()}if("number"==typeof config.content){config.content=config.content.toString()}_util.default.typeCheckConfig(NAME,config,this.constructor.DefaultType);if(config.sanitize){config.template=(0,_sanitizer.sanitizeHtml)(config.template,config.whiteList,config.sanitizeFn)}return config}_getDelegateConfig(){const config={};if(this.config){for(const key in this.config){if(this.constructor.Default[key]!==this.config[key]){config[key]=this.config[key]}}}return config}_cleanTipClass(){const $tip=(0,_jquery.default)(this.getTipElement()),tabClass=$tip.attr("class").match(BSCLS_PREFIX_REGEX);if(null!==tabClass&&tabClass.length){$tip.removeClass(tabClass.join(""))}}_handlePopperPlacementChange(popperData){this.tip=popperData.instance.popper;this._cleanTipClass();this.addAttachmentClass(this._getAttachment(popperData.placement))}_fixTransition(){const tip=this.getTipElement(),initConfigAnimation=this.config.animation;if(null!==tip.getAttribute("x-placement")){return}(0,_jquery.default)(tip).removeClass(CLASS_NAME_FADE);this.config.animation=!1;this.hide();this.show();this.config.animation=initConfigAnimation}static _jQueryInterface(config){return this.each(function(){const $element=(0,_jquery.default)(this);let data=$element.data(DATA_KEY);if(!data&&/dispose|hide/.test(config)){return}if(!data){data=new Tooltip(this,"object"==typeof config&&config);$element.data(DATA_KEY,data)}if("string"==typeof config){if("undefined"==typeof data[config]){throw new TypeError("No method named \"".concat(config,"\""))}data[config]()}})}}_jquery.default.fn[NAME]=Tooltip._jQueryInterface;_jquery.default.fn[NAME].Constructor=Tooltip;_jquery.default.fn[NAME].noConflict=()=>{_jquery.default.fn[NAME]=JQUERY_NO_CONFLICT;return Tooltip._jQueryInterface};_exports.default=Tooltip;return _exports.default});
//# sourceMappingURL=tooltip.min.js.map
