define ("theme_boost/bootstrap/scrollspy",["exports","jquery","./util"],function(_exports,_jquery,_util){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.default=void 0;_jquery=_interopRequireDefault(_jquery);_util=_interopRequireDefault(_util);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}const NAME="scrollspy",DATA_KEY="bs.scrollspy",EVENT_KEY=".".concat(DATA_KEY),JQUERY_NO_CONFLICT=_jquery.default.fn[NAME],Default={offset:10,method:"auto",target:""},DefaultType={offset:"number",method:"string",target:"(string|element)"},EVENT_ACTIVATE="activate".concat(EVENT_KEY),EVENT_SCROLL="scroll".concat(EVENT_KEY),EVENT_LOAD_DATA_API="load".concat(EVENT_KEY).concat(".data-api"),CLASS_NAME_ACTIVE="active",SELECTOR_NAV_LIST_GROUP=".nav, .list-group",SELECTOR_NAV_LINKS=".nav-link",SELECTOR_LIST_ITEMS=".list-group-item",METHOD_POSITION="position";class ScrollSpy{constructor(element,config){this._element=element;this._scrollElement="BODY"===element.tagName?window:element;this._config=this._getConfig(config);this._selector="".concat(this._config.target," ").concat(SELECTOR_NAV_LINKS,",")+"".concat(this._config.target," ").concat(SELECTOR_LIST_ITEMS,",")+"".concat(this._config.target," ").concat(".dropdown-item");this._offsets=[];this._targets=[];this._activeTarget=null;this._scrollHeight=0;(0,_jquery.default)(this._scrollElement).on(EVENT_SCROLL,event=>this._process(event));this.refresh();this._process()}static get VERSION(){return"4.6.0"}static get Default(){return Default}refresh(){const autoMethod=this._scrollElement===this._scrollElement.window?"offset":METHOD_POSITION,offsetMethod="auto"===this._config.method?autoMethod:this._config.method,offsetBase=offsetMethod===METHOD_POSITION?this._getScrollTop():0;this._offsets=[];this._targets=[];this._scrollHeight=this._getScrollHeight();const targets=[].slice.call(document.querySelectorAll(this._selector));targets.map(element=>{let target;const targetSelector=_util.default.getSelectorFromElement(element);if(targetSelector){target=document.querySelector(targetSelector)}if(target){const targetBCR=target.getBoundingClientRect();if(targetBCR.width||targetBCR.height){return[(0,_jquery.default)(target)[offsetMethod]().top+offsetBase,targetSelector]}}return null}).filter(item=>item).sort((a,b)=>a[0]-b[0]).forEach(item=>{this._offsets.push(item[0]);this._targets.push(item[1])})}dispose(){_jquery.default.removeData(this._element,DATA_KEY);(0,_jquery.default)(this._scrollElement).off(EVENT_KEY);this._element=null;this._scrollElement=null;this._config=null;this._selector=null;this._offsets=null;this._targets=null;this._activeTarget=null;this._scrollHeight=null}_getConfig(config){config={...Default,...("object"==typeof config&&config?config:{})};if("string"!=typeof config.target&&_util.default.isElement(config.target)){let id=(0,_jquery.default)(config.target).attr("id");if(!id){id=_util.default.getUID(NAME);(0,_jquery.default)(config.target).attr("id",id)}config.target="#".concat(id)}_util.default.typeCheckConfig(NAME,config,DefaultType);return config}_getScrollTop(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop}_getScrollHeight(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}_getOffsetHeight(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height}_process(){const scrollTop=this._getScrollTop()+this._config.offset,scrollHeight=this._getScrollHeight(),maxScroll=this._config.offset+scrollHeight-this._getOffsetHeight();if(this._scrollHeight!==scrollHeight){this.refresh()}if(scrollTop>=maxScroll){const target=this._targets[this._targets.length-1];if(this._activeTarget!==target){this._activate(target)}return}if(this._activeTarget&&scrollTop<this._offsets[0]&&0<this._offsets[0]){this._activeTarget=null;this._clear();return}for(let i=this._offsets.length;i--;){const isActiveTarget=this._activeTarget!==this._targets[i]&&scrollTop>=this._offsets[i]&&("undefined"==typeof this._offsets[i+1]||scrollTop<this._offsets[i+1]);if(isActiveTarget){this._activate(this._targets[i])}}}_activate(target){this._activeTarget=target;this._clear();const queries=this._selector.split(",").map(selector=>"".concat(selector,"[data-target=\"").concat(target,"\"],").concat(selector,"[href=\"").concat(target,"\"]")),$link=(0,_jquery.default)([].slice.call(document.querySelectorAll(queries.join(","))));if($link.hasClass("dropdown-item")){$link.closest(".dropdown").find(".dropdown-toggle").addClass(CLASS_NAME_ACTIVE);$link.addClass(CLASS_NAME_ACTIVE)}else{$link.addClass(CLASS_NAME_ACTIVE);$link.parents(SELECTOR_NAV_LIST_GROUP).prev("".concat(SELECTOR_NAV_LINKS,", ").concat(SELECTOR_LIST_ITEMS)).addClass(CLASS_NAME_ACTIVE);$link.parents(SELECTOR_NAV_LIST_GROUP).prev(".nav-item").children(SELECTOR_NAV_LINKS).addClass(CLASS_NAME_ACTIVE)}(0,_jquery.default)(this._scrollElement).trigger(EVENT_ACTIVATE,{relatedTarget:target})}_clear(){[].slice.call(document.querySelectorAll(this._selector)).filter(node=>node.classList.contains(CLASS_NAME_ACTIVE)).forEach(node=>node.classList.remove(CLASS_NAME_ACTIVE))}static _jQueryInterface(config){return this.each(function(){let data=(0,_jquery.default)(this).data(DATA_KEY);if(!data){data=new ScrollSpy(this,"object"==typeof config&&config);(0,_jquery.default)(this).data(DATA_KEY,data)}if("string"==typeof config){if("undefined"==typeof data[config]){throw new TypeError("No method named \"".concat(config,"\""))}data[config]()}})}}(0,_jquery.default)(window).on(EVENT_LOAD_DATA_API,()=>{const scrollSpys=[].slice.call(document.querySelectorAll("[data-spy=\"scroll\"]")),scrollSpysLength=scrollSpys.length;for(let i=scrollSpysLength;i--;){const $spy=(0,_jquery.default)(scrollSpys[i]);ScrollSpy._jQueryInterface.call($spy,$spy.data())}});_jquery.default.fn[NAME]=ScrollSpy._jQueryInterface;_jquery.default.fn[NAME].Constructor=ScrollSpy;_jquery.default.fn[NAME].noConflict=()=>{_jquery.default.fn[NAME]=JQUERY_NO_CONFLICT;return ScrollSpy._jQueryInterface};_exports.default=ScrollSpy;return _exports.default});
//# sourceMappingURL=scrollspy.min.js.map
