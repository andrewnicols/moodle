define ("theme_boost/drawer",["jquery","core/custom_interaction_events","core/log","core/pubsub"],function($,CustomEvents,Log,PubSub){var SELECTORS={TOGGLE_REGION:"[data-region=\"drawer-toggle\"]",TOGGLE_ACTION:"[data-action=\"toggle-drawer\"]",TOGGLE_TARGET:"aria-controls",TOGGLE_SIDE:"left",BODY:"body",SECTION:".list-group-item[href*=\"#section-\"]",DRAWER:"#nav-drawer"},small=768>$(document).width(),Drawer=function(){if(!$(SELECTORS.TOGGLE_REGION).length){Log.debug("Page is missing a drawer region")}if(!$(SELECTORS.TOGGLE_ACTION).length){Log.debug("Page is missing a drawer toggle link")}$(SELECTORS.TOGGLE_REGION).each(function(index,ele){var trigger=$(ele).find(SELECTORS.TOGGLE_ACTION),drawerid=trigger.attr("aria-controls"),drawer=$(document.getElementById(drawerid)),hidden="false"==trigger.attr("aria-expanded"),side=trigger.attr("data-side"),body=$(SELECTORS.BODY),preference=trigger.attr("data-preference");if(small){M.util.set_user_preference(preference,"false")}drawer.on("mousewheel DOMMouseScroll",this.preventPageScroll);if(!hidden){body.addClass("drawer-open-"+side);trigger.attr("aria-expanded","true")}else{trigger.attr("aria-expanded","false")}}.bind(this));this.registerEventListeners();if(small){this.closeAll()}};Drawer.prototype.closeAll=function(){$(SELECTORS.TOGGLE_REGION).each(function(index,ele){var trigger=$(ele).find(SELECTORS.TOGGLE_ACTION),side=trigger.attr("data-side"),body=$(SELECTORS.BODY),drawerid=trigger.attr("aria-controls"),drawer=$(document.getElementById(drawerid)),preference=trigger.attr("data-preference");trigger.attr("aria-expanded","false");body.removeClass("drawer-open-"+side);drawer.attr("aria-hidden","true");drawer.addClass("closed");if(!small){M.util.set_user_preference(preference,"false")}})};Drawer.prototype.toggleDrawer=function(e){var trigger=$(e.target).closest("[data-action=toggle-drawer]"),drawerid=trigger.attr("aria-controls"),drawer=$(document.getElementById(drawerid)),body=$(SELECTORS.BODY),side=trigger.attr("data-side"),preference=trigger.attr("data-preference");if(small){M.util.set_user_preference(preference,"false")}body.addClass("drawer-ease");var open="true"==trigger.attr("aria-expanded");if(!open){trigger.attr("aria-expanded","true");drawer.attr("aria-hidden","false");drawer.focus();body.addClass("drawer-open-"+side);drawer.removeClass("closed");if(!small){M.util.set_user_preference(preference,"true")}}else{body.removeClass("drawer-open-"+side);trigger.attr("aria-expanded","false");drawer.addClass("closed").delay(500).queue(function(){if($(this).hasClass("closed")){$(this).attr("aria-hidden","true")}$(this).dequeue()});if(!small){M.util.set_user_preference(preference,"false")}}PubSub.publish("nav-drawer-toggle-start",open)};Drawer.prototype.preventPageScroll=function(e){var delta=e.wheelDelta||e.originalEvent&&e.originalEvent.wheelDelta||-e.originalEvent.detail,bottomOverflow=0<=this.scrollTop+$(this).outerHeight()-this.scrollHeight,topOverflow=0>=this.scrollTop;if(0>delta&&bottomOverflow||0<delta&&topOverflow){e.preventDefault()}};Drawer.prototype.registerEventListeners=function(){$(SELECTORS.TOGGLE_ACTION).each(function(index,element){CustomEvents.define($(element),[CustomEvents.events.activate]);$(element).on(CustomEvents.events.activate,function(e,data){this.toggleDrawer(data.originalEvent);data.originalEvent.preventDefault()}.bind(this))}.bind(this));$(SELECTORS.SECTION).click(function(){if(small){this.closeAll()}}.bind(this));$(SELECTORS.DRAWER).on("webkitTransitionEnd msTransitionEnd transitionend",function(e){var drawer=$(e.target).closest(SELECTORS.DRAWER),open="false"==drawer.attr("aria-hidden");PubSub.publish("nav-drawer-toggle-end",open)})};return{init:function init(){return new Drawer}}});
//# sourceMappingURL=drawer.min.js.map
