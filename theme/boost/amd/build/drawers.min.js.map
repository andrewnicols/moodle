{"version":3,"sources":["../src/drawers.js"],"names":["backdropPromise","drawerMap","Map","eventTypes","drawerShow","drawerShown","drawerHide","drawerHidden","sizes","medium","large","getCurrentWidth","DomRect","document","body","getBoundingClientRect","x","width","isSmall","browserWidth","isMedium","isLarge","getBackdrop","Templates","render","then","html","ModalBackdrop","modalBackdrop","getAttachmentPoint","get","addEventListener","e","preventDefault","Drawers","closeAllDrawers","catch","drawerNode","classList","contains","parseInt","dataset","closeOnResize","openDrawer","Aria","hide","set","name","cancelable","drawerInstance","showEvent","dispatchEvent","defaultPrevented","unhide","add","preference","M","util","set_user_preference","state","page","getElementById","backdrop","show","pageWrapper","style","overflow","hideEvent","remove","closeDrawer","has","forEach","comparisonInstance","scroller","querySelector","drawerLayout","scrollTop","window","innerHeight","registerListeners","toggleButton","target","closest","targetDrawer","getDrawerInstanceForNode","toggleVisibility","openDrawerButton","closeDrawerButton","closeOtherDrawers","detail","closeOnResizeListener","anyOpen","isOpen","drawers","querySelectorAll"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Toggling the visibility of the secondary navigation on mobile.\n *\n * @module     theme_boost/drawers\n * @copyright  2021 Bas Brands\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\nimport ModalBackdrop from 'core/modal_backdrop';\nimport Templates from 'core/templates';\nimport * as Aria from 'core/aria';\nimport {dispatchEvent} from 'core/event_dispatcher';\nimport {debounce} from 'core/utils';\n\nlet backdropPromise = null;\n\nconst drawerMap = new Map();\n\nexport const eventTypes = {\n    /**\n     * An event triggered before a drawer is shown.\n     *\n     * @event theme_boost/drawers:show\n     * @type {CustomEvent}\n     * @property {HTMLElement} target The drawer that will be opened.\n     */\n    drawerShow: 'theme_boost/drawers:show',\n\n    /**\n     * An event triggered after a drawer is shown.\n     *\n     * @event theme_boost/drawers:shown\n     * @type {CustomEvent}\n     * @property {HTMLElement} target The drawer that was be opened.\n     */\n    drawerShown: 'theme_boost/drawers:shown',\n\n    /**\n     * An event triggered before a drawer is hidden.\n     *\n     * @event theme_boost/drawers:hide\n     * @type {CustomEvent}\n     * @property {HTMLElement} target The drawer that will be hidden.\n     */\n    drawerHide: 'theme_boost/drawers:hide',\n\n    /**\n     * An event triggered after a drawer is hidden.\n     *\n     * @event theme_boost/drawers:hidden\n     * @type {CustomEvent}\n     * @property {HTMLElement} target The drawer that was be hidden.\n     */\n    drawerHidden: 'theme_boost/drawers:hidden',\n};\n\n/**\n * Maximum sizes for breakpoints. This needs to correspond with Bootstrap\n * Breakpoints\n *\n * @private\n */\nconst sizes = {\n    medium: 991,\n    large: 1200\n};\n\nconst getCurrentWidth = () => {\n    const DomRect = document.body.getBoundingClientRect();\n    return DomRect.x + DomRect.width;\n};\nconst isSmall = () => {\n    const browserWidth = getCurrentWidth();\n    return browserWidth < sizes.medium;\n};\n\n/**\n * Check if the user uses a medium size browser.\n * @returns {Bool} true if the body is smaller than sizes.medium max size.\n *\n * @private\n */\nconst isMedium = () => {\n    const browserWidth = getCurrentWidth();\n    return (browserWidth >= sizes.medium) && (browserWidth < sizes.large);\n};\n\n/**\n * Check if the user uses a large size browser.\n * @returns {Bool} true if the body is smaller than sizes.large max size.\n *\n * @private\n */\nconst isLarge = () => {\n    const browserWidth = getCurrentWidth();\n    return browserWidth >= sizes.large;\n};\n\n/**\n * Add a backdrop to the page.\n *\n * @returns {Promise} rendering of modal backdrop.\n * @private\n */\nconst getBackdrop = () => {\n    if (!backdropPromise) {\n        backdropPromise = Templates.render('core/modal_backdrop', {})\n        .then(html => new ModalBackdrop(html))\n        .then(modalBackdrop => {\n            modalBackdrop.getAttachmentPoint().get(0).addEventListener('click', e => {\n                e.preventDefault();\n                Drawers.closeAllDrawers();\n            });\n            return modalBackdrop;\n        })\n        .catch();\n    }\n    return backdropPromise;\n};\n\n/**\n * The Drawers class.\n *\n * Your description here.\n *\n * @property {NodeElement} drawerNode\n */\nexport default class Drawers {\n    drawerNode = null;\n\n    /**\n     * Whether the drawer is open.\n     *\n     * @returns {bool}\n     */\n    get isOpen() {\n        return this.drawerNode.classList.contains('show');\n    }\n\n    /**\n     * Whether the drawer should close when the window is resized\n     *\n     * @returns {bool}\n     */\n    get closeOnResize() {\n        return !!parseInt(this.drawerNode.dataset.closeOnResize);\n    }\n\n    constructor(drawerNode) {\n        this.drawerNode = drawerNode;\n\n        if (this.drawerNode.classList.contains('show')) {\n            this.openDrawer();\n        } else {\n            Aria.hide(this.drawerNode);\n        }\n\n        drawerMap.set(drawerNode, this);\n    }\n\n    /**\n     * Get the drawer instance for the specifeid node\n     *\n     * @param {NodeElement} drawerNode\n     * @returns {self}\n     */\n    static getDrawerInstanceForNode(drawerNode) {\n        if (!drawerMap.has(drawerNode)) {\n            new Drawers(drawerNode);\n        }\n\n        return drawerMap.get(drawerNode);\n    }\n\n    dispatchEvent(name, cancelable = false) {\n        return dispatchEvent(\n            eventTypes[name],\n            {\n                drawerInstance: this,\n            },\n            this.drawerNode,\n            {\n                cancelable,\n            }\n        );\n    }\n\n    /**\n     * Open the drawer.\n     */\n    openDrawer() {\n        const showEvent = this.dispatchEvent('drawerShow', true);\n        if (showEvent.defaultPrevented) {\n            return;\n        }\n\n        Aria.unhide(this.drawerNode);\n        this.drawerNode.classList.add('show');\n\n        const preference = this.drawerNode.dataset.preference;\n        if (!isMedium() && preference) {\n            M.util.set_user_preference(preference, true);\n        }\n\n        const state = this.drawerNode.dataset.state;\n        if (state) {\n            const page = document.getElementById('page');\n            page.classList.add(state);\n        }\n\n        if (isSmall()) {\n            getBackdrop().then(backdrop => {\n                backdrop.show();\n\n                // TODO\n                const pageWrapper = document.getElementById('page-wrapper');\n                pageWrapper.style.overflow = 'hidden';\n                return backdrop;\n            })\n            .catch();\n        }\n\n        this.dispatchEvent('drawerShown');\n    }\n\n    /**\n     * Close the drawer.\n     */\n    closeDrawer() {\n        const hideEvent = this.dispatchEvent('drawerHide', true);\n        if (hideEvent.defaultPrevented) {\n            return;\n        }\n\n        const preference = this.drawerNode.dataset.preference;\n        if (!isMedium() && preference) {\n            M.util.set_user_preference(preference, false);\n        }\n\n        const state = this.drawerNode.dataset.state;\n        if (state) {\n            const page = document.getElementById('page');\n            page.classList.remove(state);\n        }\n\n        Aria.hide(this.drawerNode);\n        this.drawerNode.classList.remove('show');\n\n        getBackdrop().then(backdrop => {\n            backdrop.hide();\n\n            if (isMedium()) {\n                const pageWrapper = document.getElementById('page-wrapper');\n                pageWrapper.style.overflow = 'auto';\n            }\n            return backdrop;\n        })\n        .catch();\n\n        this.dispatchEvent('drawerHidden');\n    }\n\n    /**\n     * Toggle visibility of the drawer.\n     */\n    toggleVisibility() {\n        if (this.drawerNode.classList.contains('show')) {\n            this.closeDrawer();\n        } else {\n            this.openDrawer();\n        }\n    }\n\n    /**\n     * Close all drawers.\n     */\n    static closeAllDrawers() {\n        drawerMap.forEach(drawerInstance => {\n            drawerInstance.closeDrawer();\n        });\n    }\n\n    /**\n     * Close all drawers except for the specified drawer.\n     *\n     * @param {self} comparisonInstance\n     */\n    static closeOtherDrawers(comparisonInstance) {\n        drawerMap.forEach(drawerInstance => {\n            if (drawerInstance === comparisonInstance) {\n                return;\n            }\n\n            drawerInstance.closeDrawer();\n        });\n    }\n}\n\n/**\n * Activate the scroller helper for the drawer layout.\n *\n * @private\n */\nconst scroller = () => {\n    const body = document.querySelector('body');\n    const drawerLayout = document.querySelector('#page.drawers');\n    drawerLayout.addEventListener(\"scroll\", () => {\n        if (drawerLayout.scrollTop >= window.innerHeight) {\n            body.classList.add('scrolled');\n        } else {\n            body.classList.remove('scrolled');\n        }\n    });\n};\n\nconst registerListeners = () => {\n    // Listen for show/hide events.\n    document.addEventListener('click', e => {\n        const toggleButton = e.target.closest('[data-toggle=\"drawers\"][data-action=\"toggle\"]');\n        if (toggleButton && toggleButton.dataset.target) {\n            e.preventDefault();\n            const targetDrawer = document.getElementById(toggleButton.dataset.target);\n            const drawerInstance = Drawers.getDrawerInstanceForNode(targetDrawer);\n\n            drawerInstance.toggleVisibility();\n        }\n\n        const openDrawerButton = e.target.closest('[data-toggle=\"drawers\"][data-action=\"opendrawer\"]');\n        if (openDrawerButton && openDrawerButton.dataset.target) {\n            e.preventDefault();\n            const targetDrawer = document.getElementById(openDrawerButton.dataset.target);\n            const drawerInstance = Drawers.getDrawerInstanceForNode(targetDrawer);\n\n            drawerInstance.openDrawer();\n        }\n\n        const closeDrawerButton = e.target.closest('[data-toggle=\"drawers\"][data-action=\"closedrawer\"]');\n        if (closeDrawerButton && closeDrawerButton.dataset.target) {\n            e.preventDefault();\n            const targetDrawer = document.getElementById(closeDrawerButton.dataset.target);\n            const drawerInstance = Drawers.getDrawerInstanceForNode(targetDrawer);\n\n            drawerInstance.closeDrawer();\n        }\n    });\n\n    // Close drawer when another drawer opens.\n    document.addEventListener(eventTypes.drawerShow, e => {\n        if (!isLarge()) {\n            return;\n        }\n        Drawers.closeOtherDrawers(e.detail.drawerInstance);\n    });\n\n    const closeOnResizeListener = () => {\n        if (isSmall()) {\n            let anyOpen = false;\n            drawerMap.forEach(drawerInstance => {\n                if (drawerInstance.isOpen) {\n                    if (drawerInstance.closeOnResize) {\n                        drawerInstance.closeDrawer();\n                    } else {\n                        anyOpen = true;\n                    }\n                }\n            });\n\n            if (anyOpen) {\n                getBackdrop().then(backdrop => backdrop.show()).catch();\n            }\n        } else {\n            getBackdrop().then(backdrop => backdrop.hide()).catch();\n        }\n    };\n\n    window.addEventListener('resize', debounce(closeOnResizeListener, 400));\n};\n\nscroller();\nregisterListeners();\n\nconst drawers = document.querySelectorAll('[data-region=\"fixed-drawer\"]');\ndrawers.forEach(drawerNode => Drawers.getDrawerInstanceForNode(drawerNode));\n"],"file":"drawers.min.js"}