{"version":3,"sources":["../src/drawers.js"],"names":["backdropPromise","drawerMap","Map","SELECTORS","BUTTONS","CLOSEBTN","OPENBTN","TOGGLEBTN","DRAWERS","CONTAINER","DRAWERCONTENT","CLASSES","SCROLLED","SHOW","NOTINITIALISED","sizes","medium","large","getCurrentWidth","DomRect","document","body","getBoundingClientRect","x","width","isSmall","browserWidth","isLarge","getBackdrop","Templates","render","then","html","ModalBackdrop","modalBackdrop","getAttachmentPoint","get","addEventListener","e","preventDefault","Drawers","closeAllDrawers","catch","getDrawerOpenButton","drawerId","openButton","querySelector","disableDrawerTooltips","drawerNode","buttons","id","forEach","button","disableButtonTooltip","enableOnBlur","hasAttribute","tooltip","setAttribute","dataset","originalTitle","disabledToggle","toggle","removeAttribute","restoreTooltipOnBlur","enableDrawerTooltips","enableButtonTooltip","addInnerScrollListener","content","classList","scrollTop","closeDrawer","focusOnOpenButton","updatePreferences","contains","openDrawer","focusOnCloseButton","forceopen","Aria","hide","set","remove","parseInt","closeOnResize","eventname","cancelable","drawerInstance","pendingPromise","Pending","showEvent","dispatchEvent","eventTypes","drawerShow","defaultPrevented","unhide","add","preference","M","util","set_user_preference","state","page","getElementById","backdrop","show","pageWrapper","style","overflow","closeButton","setTimeout","focus","resolve","drawerShown","hideEvent","drawerHide","drawerHidden","has","comparisonInstance","setLastUsedToggle","toggleButton","target","querySelectorAll","btn","lastused","focusLastUsedToggle","lastUsedButton","scroller","drawerLayout","window","innerHeight","registerListeners","closest","targetDrawer","getDrawerInstanceForNode","toggleVisibility","openDrawerButton","closeDrawerButton","closeOtherDrawers","detail","btnSelector","closeOnResizeListener","anyOpen","isOpen","drawers"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Toggling the visibility of the secondary navigation on mobile.\n *\n * @module     theme_boost/drawers\n * @copyright  2021 Bas Brands\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\nimport ModalBackdrop from 'core/modal_backdrop';\nimport Templates from 'core/templates';\nimport * as Aria from 'core/aria';\nimport {dispatchEvent} from 'core/event_dispatcher';\nimport {debounce} from 'core/utils';\nimport Pending from 'core/pending';\n// The jQuery module is only used for interacting with Boostrap 4. It can we removed when MDL-71979 is integrated.\nimport jQuery from 'jquery';\n\nlet backdropPromise = null;\n\nconst drawerMap = new Map();\n\nconst SELECTORS = {\n    BUTTONS: '[data-toggler=\"drawers\"]',\n    CLOSEBTN: '[data-toggler=\"drawers\"][data-action=\"closedrawer\"]',\n    OPENBTN: '[data-toggler=\"drawers\"][data-action=\"opendrawer\"]',\n    TOGGLEBTN: '[data-toggler=\"drawers\"][data-action=\"toggle\"]',\n    DRAWERS: '[data-region=\"fixed-drawer\"]',\n    CONTAINER: '#page.drawers',\n    DRAWERCONTENT: '.drawercontent',\n};\n\nconst CLASSES = {\n    SCROLLED: 'scrolled',\n    SHOW: 'show',\n    NOTINITIALISED: 'not-initialized',\n};\n\n/**\n * Maximum sizes for breakpoints. This needs to correspond with Bootstrap\n * Breakpoints\n *\n * @private\n */\nconst sizes = {\n    medium: 991,\n    large: 1400\n};\n\n/**\n * Get the current body width.\n *\n * @returns {number} the current body width.\n * @private\n */\nconst getCurrentWidth = () => {\n    const DomRect = document.body.getBoundingClientRect();\n    return DomRect.x + DomRect.width;\n};\n\n/**\n * Check if the user uses a small size browser.\n *\n * @returns {boolean} true if the body is smaller than sizes.medium max size.\n * @private\n */\nconst isSmall = () => {\n    const browserWidth = getCurrentWidth();\n    return browserWidth < sizes.medium;\n};\n\n/**\n * Check if the user uses a large size browser.\n *\n * @returns {boolean} true if the body is smaller than sizes.large max size.\n * @private\n */\nconst isLarge = () => {\n    const browserWidth = getCurrentWidth();\n    return browserWidth >= sizes.large;\n};\n\n/**\n * Add a backdrop to the page.\n *\n * @returns {Promise} rendering of modal backdrop.\n * @private\n */\nconst getBackdrop = () => {\n    if (!backdropPromise) {\n        backdropPromise = Templates.render('core/modal_backdrop', {})\n        .then(html => new ModalBackdrop(html))\n        .then(modalBackdrop => {\n            modalBackdrop.getAttachmentPoint().get(0).addEventListener('click', e => {\n                e.preventDefault();\n                Drawers.closeAllDrawers();\n            });\n            return modalBackdrop;\n        })\n        .catch();\n    }\n    return backdropPromise;\n};\n\n/**\n * Get the button element to open a specific drawer.\n *\n * @param {String} drawerId the drawer element Id\n * @return {HTMLElement|undefined} the open button element\n * @private\n */\nconst getDrawerOpenButton = (drawerId) => {\n    let openButton = document.querySelector(`${SELECTORS.OPENBTN}[data-target=\"${drawerId}\"]`);\n    if (!openButton) {\n        openButton = document.querySelector(`${SELECTORS.TOGGLEBTN}[data-target=\"${drawerId}\"]`);\n    }\n    return openButton;\n};\n\n/**\n * Disable drawer tooltips.\n *\n * @param {HTMLElement} drawerNode the drawer main node\n * @private\n */\nconst disableDrawerTooltips = (drawerNode) => {\n    const buttons = [\n        drawerNode.querySelector(SELECTORS.CLOSEBTN),\n        getDrawerOpenButton(drawerNode.id),\n    ];\n    buttons.forEach(button => {\n        if (!button) {\n            return;\n        }\n        disableButtonTooltip(button);\n    });\n};\n\n/**\n * Disable the button tooltips.\n *\n * @param {HTMLElement} button the button element\n * @param {boolean} enableOnBlur if the tooltip must be re-enabled on blur.\n * @private\n */\nconst disableButtonTooltip = (button, enableOnBlur) => {\n    if (button.hasAttribute('data-original-title')) {\n        // The jQuery is still used in Boostrap 4. It can we removed when MDL-71979 is integrated.\n        jQuery(button).tooltip('disable');\n        button.setAttribute('title', button.dataset.originalTitle);\n    } else {\n        button.dataset.disabledToggle = button.dataset.toggle;\n        button.removeAttribute('data-toggle');\n    }\n    if (enableOnBlur) {\n        button.dataset.restoreTooltipOnBlur = true;\n    }\n};\n\n/**\n * Enable drawer tooltips.\n *\n * @param {HTMLElement} drawerNode the drawer main node\n * @private\n */\nconst enableDrawerTooltips = (drawerNode) => {\n    const buttons = [\n        drawerNode.querySelector(SELECTORS.CLOSEBTN),\n        getDrawerOpenButton(drawerNode.id),\n    ];\n    buttons.forEach(button => {\n        if (!button) {\n            return;\n        }\n        enableButtonTooltip(button);\n    });\n};\n\n/**\n * Enable the button tooltips.\n *\n * @param {HTMLElement} button the button element\n * @private\n */\nconst enableButtonTooltip = (button) => {\n    // The jQuery is still used in Boostrap 4. It can we removed when MDL-71979 is integrated.\n    if (button.hasAttribute('data-original-title')) {\n        jQuery(button).tooltip('enable');\n        button.removeAttribute('title');\n    } else if (button.dataset.disabledToggle) {\n        button.dataset.toggle = button.dataset.disabledToggle;\n        jQuery(button).tooltip();\n    }\n    delete button.dataset.restoreTooltipOnBlur;\n};\n\n/**\n * Add scroll listeners to a drawer element.\n *\n * @param {HTMLElement} drawerNode the drawer main node\n * @private\n */\nconst addInnerScrollListener = (drawerNode) => {\n    const content = drawerNode.querySelector(SELECTORS.DRAWERCONTENT);\n    if (!content) {\n        return;\n    }\n    content.addEventListener(\"scroll\", () => {\n        drawerNode.classList.toggle(\n            CLASSES.SCROLLED,\n            content.scrollTop != 0\n        );\n    });\n};\n\n/**\n * The Drawers class is used to control on-screen drawer elements.\n *\n * It handles opening, and closing of drawer elements, as well as more detailed behaviours such as closing a drawer when\n * another drawer is opened, and supports closing a drawer when the screen is resized.\n *\n * Drawers are instantiated on page load, and can also be toggled lazily when toggling any drawer toggle, open button,\n * or close button.\n *\n * A range of show and hide events are also dispatched as detailed in the class\n * {@link module:theme_boost/drawers#eventTypes eventTypes} object.\n *\n * @example <caption>Standard usage</caption>\n *\n * // The module just needs to be included to add drawer support.\n * import 'theme_boost/drawers';\n *\n * @example <caption>Manually open or close any drawer</caption>\n *\n * import Drawers from 'theme_boost/drawers';\n *\n * const myDrawer = Drawers.getDrawerInstanceForNode(document.querySelector('.myDrawerNode');\n * myDrawer.closeDrawer();\n *\n * @example <caption>Listen to the before show event and cancel it</caption>\n *\n * import Drawers from 'theme_boost/drawers';\n *\n * document.addEventListener(Drawers.eventTypes.drawerShow, e => {\n *     // The drawer which will be shown.\n *     window.console.log(e.target);\n *\n *     // The instance of the Drawers class for this drawer.\n *     window.console.log(e.detail.drawerInstance);\n *\n *     // Prevent this drawer from being shown.\n *     e.preventDefault();\n * });\n *\n * @example <caption>Listen to the shown event</caption>\n *\n * document.addEventListener(Drawers.eventTypes.drawerShown, e => {\n *     // The drawer which was shown.\n *     window.console.log(e.target);\n *\n *     // The instance of the Drawers class for this drawer.\n *     window.console.log(e.detail.drawerInstance);\n * });\n */\nexport default class Drawers {\n    /**\n     * The underlying HTMLElement which is controlled.\n     */\n    drawerNode = null;\n\n    constructor(drawerNode) {\n        this.drawerNode = drawerNode;\n\n        if (isSmall()) {\n            this.closeDrawer({focusOnOpenButton: false, updatePreferences: false});\n        }\n\n        if (this.drawerNode.classList.contains(CLASSES.SHOW)) {\n            this.openDrawer({focusOnCloseButton: false});\n        } else if (this.drawerNode.dataset.forceopen == 1) {\n            if (!isSmall()) {\n                this.openDrawer({focusOnCloseButton: false});\n            }\n        } else {\n            Aria.hide(this.drawerNode);\n        }\n\n        // Disable tooltips in small screens.\n        if (isSmall()) {\n            disableDrawerTooltips(this.drawerNode);\n        }\n\n        addInnerScrollListener(this.drawerNode);\n\n        drawerMap.set(drawerNode, this);\n\n        drawerNode.classList.remove(CLASSES.NOTINITIALISED);\n    }\n\n    /**\n     * Whether the drawer is open.\n     *\n     * @returns {boolean}\n     */\n    get isOpen() {\n        return this.drawerNode.classList.contains(CLASSES.SHOW);\n    }\n\n    /**\n     * Whether the drawer should close when the window is resized\n     *\n     * @returns {boolean}\n     */\n    get closeOnResize() {\n        return !!parseInt(this.drawerNode.dataset.closeOnResize);\n    }\n\n    /**\n     * The list of event types.\n     *\n     * @static\n     * @property {String} drawerShow See {@link event:theme_boost/drawers:show}\n     * @property {String} drawerShown See {@link event:theme_boost/drawers:shown}\n     * @property {String} drawerHide See {@link event:theme_boost/drawers:hide}\n     * @property {String} drawerHidden See {@link event:theme_boost/drawers:hidden}\n     */\n    static eventTypes = {\n        /**\n         * An event triggered before a drawer is shown.\n         *\n         * @event theme_boost/drawers:show\n         * @type {CustomEvent}\n         * @property {HTMLElement} target The drawer that will be opened.\n         */\n        drawerShow: 'theme_boost/drawers:show',\n\n        /**\n         * An event triggered after a drawer is shown.\n         *\n         * @event theme_boost/drawers:shown\n         * @type {CustomEvent}\n         * @property {HTMLElement} target The drawer that was be opened.\n         */\n        drawerShown: 'theme_boost/drawers:shown',\n\n        /**\n         * An event triggered before a drawer is hidden.\n         *\n         * @event theme_boost/drawers:hide\n         * @type {CustomEvent}\n         * @property {HTMLElement} target The drawer that will be hidden.\n         */\n        drawerHide: 'theme_boost/drawers:hide',\n\n        /**\n         * An event triggered after a drawer is hidden.\n         *\n         * @event theme_boost/drawers:hidden\n         * @type {CustomEvent}\n         * @property {HTMLElement} target The drawer that was be hidden.\n         */\n        drawerHidden: 'theme_boost/drawers:hidden',\n    };\n\n\n    /**\n     * Get the drawer instance for the specified node\n     *\n     * @param {HTMLElement} drawerNode\n     * @returns {module:theme_boost/drawers}\n     */\n    static getDrawerInstanceForNode(drawerNode) {\n        if (!drawerMap.has(drawerNode)) {\n            new Drawers(drawerNode);\n        }\n\n        return drawerMap.get(drawerNode);\n    }\n\n    /**\n     * Dispatch a drawer event.\n     *\n     * @param {string} eventname the event name\n     * @param {boolean} cancelable if the event is cancelable\n     * @returns {CustomEvent} the resulting custom event\n     */\n    dispatchEvent(eventname, cancelable = false) {\n        return dispatchEvent(\n            eventname,\n            {\n                drawerInstance: this,\n            },\n            this.drawerNode,\n            {\n                cancelable,\n            }\n        );\n    }\n\n    /**\n     * Open the drawer.\n     *\n     * By default, openDrawer sets the page focus to the close drawer button. However, when a drawer is open at page\n     * load, this represents an accessibility problem as the initial focus changes without any user interaction. The\n     * focusOnCloseButton parameter can be set to false to prevent this behaviour.\n     *\n     * @param {object} args\n     * @param {boolean} [args.focusOnCloseButton=true] Whether to alter page focus when opening the drawer\n     */\n    openDrawer({focusOnCloseButton = true} = {}) {\n\n        const pendingPromise = new Pending('theme_boost/drawers:open');\n        const showEvent = this.dispatchEvent(Drawers.eventTypes.drawerShow, true);\n        if (showEvent.defaultPrevented) {\n            return;\n        }\n\n        // Hide close button while the drawer is showing to prevent glitchy effects.\n        this.drawerNode.querySelector(SELECTORS.CLOSEBTN)?.classList.toggle('hidden', true);\n\n        // Remove open tooltip if still visible.\n        let openButton = getDrawerOpenButton(this.drawerNode.id);\n        if (openButton && openButton.hasAttribute('data-original-title')) {\n            // The jQuery is still used in Boostrap 4. It can we removed when MDL-71979 is integrated.\n            jQuery(openButton)?.tooltip('hide');\n        }\n\n        Aria.unhide(this.drawerNode);\n        this.drawerNode.classList.add(CLASSES.SHOW);\n\n        const preference = this.drawerNode.dataset.preference;\n        if (preference && !isSmall() && (this.drawerNode.dataset.forceopen != 1)) {\n            M.util.set_user_preference(preference, true);\n        }\n\n        const state = this.drawerNode.dataset.state;\n        if (state) {\n            const page = document.getElementById('page');\n            page.classList.add(state);\n        }\n\n        if (isSmall()) {\n            getBackdrop().then(backdrop => {\n                backdrop.show();\n\n                const pageWrapper = document.getElementById('page-wrapper');\n                pageWrapper.style.overflow = 'hidden';\n                return backdrop;\n            })\n            .catch();\n        }\n\n        // Show close button once the drawer is fully opened.\n        const closeButton = this.drawerNode.querySelector(SELECTORS.CLOSEBTN);\n        if (focusOnCloseButton && closeButton) {\n            disableButtonTooltip(closeButton, true);\n        }\n        setTimeout(() => {\n            closeButton.classList.toggle('hidden', false);\n            if (focusOnCloseButton) {\n                closeButton.focus();\n            }\n            pendingPromise.resolve();\n        }, 300);\n\n        this.dispatchEvent(Drawers.eventTypes.drawerShown);\n    }\n\n    /**\n     * Close the drawer.\n     *\n     * @param {object} args\n     * @param {boolean} [args.focusOnOpenButton=true] Whether to alter page focus when opening the drawer\n     * @param {boolean} [args.updatePreferences=true] Whether to update the user prewference\n     */\n    closeDrawer({focusOnOpenButton = true, updatePreferences = true} = {}) {\n\n        const pendingPromise = new Pending('theme_boost/drawers:close');\n\n        const hideEvent = this.dispatchEvent(Drawers.eventTypes.drawerHide, true);\n        if (hideEvent.defaultPrevented) {\n            return;\n        }\n\n        // Hide close button while the drawer is hiding to prevent glitchy effects.\n        const closeButton = this.drawerNode.querySelector(SELECTORS.CLOSEBTN);\n        closeButton?.classList.toggle('hidden', true);\n        // Remove the close button tooltip if visible.\n        if (closeButton.hasAttribute('data-original-title')) {\n            // The jQuery is still used in Boostrap 4. It can we removed when MDL-71979 is integrated.\n            jQuery(closeButton)?.tooltip('hide');\n        }\n\n        const preference = this.drawerNode.dataset.preference;\n        if (preference && updatePreferences && !isSmall()) {\n            M.util.set_user_preference(preference, false);\n        }\n\n        const state = this.drawerNode.dataset.state;\n        if (state) {\n            const page = document.getElementById('page');\n            page.classList.remove(state);\n        }\n\n        Aria.hide(this.drawerNode);\n        this.drawerNode.classList.remove(CLASSES.SHOW);\n\n        getBackdrop().then(backdrop => {\n            backdrop.hide();\n\n            if (isSmall()) {\n                const pageWrapper = document.getElementById('page-wrapper');\n                pageWrapper.style.overflow = 'auto';\n            }\n            return backdrop;\n        })\n        .catch();\n\n        // Move focus to the open drawer (or toggler) button once the drawer is hidden.\n        let openButton = getDrawerOpenButton(this.drawerNode.id);\n        if (openButton) {\n            disableButtonTooltip(openButton, true);\n        }\n        setTimeout(() => {\n            if (openButton && focusOnOpenButton) {\n                openButton.focus();\n            }\n            pendingPromise.resolve();\n        }, 300);\n\n        this.dispatchEvent(Drawers.eventTypes.drawerHidden);\n    }\n\n    /**\n     * Toggle visibility of the drawer.\n     */\n    toggleVisibility() {\n        if (this.drawerNode.classList.contains(CLASSES.SHOW)) {\n            this.closeDrawer();\n        } else {\n            this.openDrawer();\n        }\n    }\n\n    /**\n     * Close all drawers.\n     */\n    static closeAllDrawers() {\n        drawerMap.forEach(drawerInstance => {\n            drawerInstance.closeDrawer();\n        });\n    }\n\n    /**\n     * Close all drawers except for the specified drawer.\n     *\n     * @param {module:theme_boost/drawers} comparisonInstance\n     */\n    static closeOtherDrawers(comparisonInstance) {\n        drawerMap.forEach(drawerInstance => {\n            if (drawerInstance === comparisonInstance) {\n                return;\n            }\n\n            drawerInstance.closeDrawer();\n        });\n    }\n}\n\n/**\n * Activate the scroller helper for the drawer layout.\n *\n * @private\n */\nconst scroller = () => {\n    const body = document.querySelector('body');\n    const drawerLayout = document.querySelector(SELECTORS.CONTAINER);\n    if (drawerLayout) {\n        drawerLayout.addEventListener(\"scroll\", () => {\n            if (drawerLayout.scrollTop >= window.innerHeight) {\n                body.classList.add(CLASSES.SCROLLED);\n            } else {\n                body.classList.remove(CLASSES.SCROLLED);\n            }\n        });\n    }\n};\n\n/**\n * Set the last used attribute for the last used toggle button for a drawer.\n *\n * @param {object} toggleButton The clicked button.\n */\nconst setLastUsedToggle = (toggleButton) => {\n    if (toggleButton.dataset.target) {\n        document.querySelectorAll(`${SELECTORS.BUTTONS}[data-target=\"${toggleButton.dataset.target}\"]`)\n        .forEach(btn => {\n            btn.dataset.lastused = false;\n        });\n        toggleButton.dataset.lastused = true;\n    }\n};\n\n/**\n * Set the focus to the last used button to open this drawer.\n * @param {string} target The drawer target.\n */\nconst focusLastUsedToggle = (target) => {\n    const lastUsedButton = document.querySelector(`${SELECTORS.BUTTONS}[data-target=\"${target}\"][data-lastused=\"true\"`);\n    if (lastUsedButton) {\n        lastUsedButton.focus();\n    }\n};\n\n/**\n * Register the event listeners for the drawer.\n *\n * @private\n */\nconst registerListeners = () => {\n    // Listen for show/hide events.\n    document.addEventListener('click', e => {\n        const toggleButton = e.target.closest(SELECTORS.TOGGLEBTN);\n        if (toggleButton && toggleButton.dataset.target) {\n            e.preventDefault();\n            const targetDrawer = document.getElementById(toggleButton.dataset.target);\n            const drawerInstance = Drawers.getDrawerInstanceForNode(targetDrawer);\n            setLastUsedToggle(toggleButton);\n\n            drawerInstance.toggleVisibility();\n        }\n\n        const openDrawerButton = e.target.closest(SELECTORS.OPENBTN);\n        if (openDrawerButton && openDrawerButton.dataset.target) {\n            e.preventDefault();\n            const targetDrawer = document.getElementById(openDrawerButton.dataset.target);\n            const drawerInstance = Drawers.getDrawerInstanceForNode(targetDrawer);\n            setLastUsedToggle(toggleButton);\n\n            drawerInstance.openDrawer();\n        }\n\n        const closeDrawerButton = e.target.closest(SELECTORS.CLOSEBTN);\n        if (closeDrawerButton && closeDrawerButton.dataset.target) {\n            e.preventDefault();\n            const targetDrawer = document.getElementById(closeDrawerButton.dataset.target);\n            const drawerInstance = Drawers.getDrawerInstanceForNode(targetDrawer);\n\n            drawerInstance.closeDrawer();\n            focusLastUsedToggle(closeDrawerButton.dataset.target);\n        }\n    });\n\n    // Close drawer when another drawer opens.\n    document.addEventListener(Drawers.eventTypes.drawerShow, e => {\n        if (isLarge()) {\n            return;\n        }\n        Drawers.closeOtherDrawers(e.detail.drawerInstance);\n    });\n\n    // Tooglers and openers blur listeners.\n    const btnSelector = `${SELECTORS.TOGGLEBTN}, ${SELECTORS.OPENBTN}, ${SELECTORS.CLOSEBTN}`;\n    document.addEventListener('focusout', (e) => {\n        const button = e.target.closest(btnSelector);\n        if (button?.dataset.restoreTooltipOnBlur !== undefined) {\n            enableButtonTooltip(button);\n        }\n    });\n\n    const closeOnResizeListener = () => {\n        if (isSmall()) {\n            let anyOpen = false;\n            drawerMap.forEach(drawerInstance => {\n                disableDrawerTooltips(drawerInstance.drawerNode);\n                if (drawerInstance.isOpen) {\n                    if (drawerInstance.closeOnResize) {\n                        drawerInstance.closeDrawer();\n                    } else {\n                        anyOpen = true;\n                    }\n                }\n            });\n\n            if (anyOpen) {\n                getBackdrop().then(backdrop => backdrop.show()).catch();\n            }\n        } else {\n            drawerMap.forEach(drawerInstance => {\n                enableDrawerTooltips(drawerInstance.drawerNode);\n            });\n            getBackdrop().then(backdrop => backdrop.hide()).catch();\n        }\n    };\n\n    window.addEventListener('resize', debounce(closeOnResizeListener, 400));\n};\n\nscroller();\nregisterListeners();\n\nconst drawers = document.querySelectorAll(SELECTORS.DRAWERS);\ndrawers.forEach(drawerNode => Drawers.getDrawerInstanceForNode(drawerNode));\n"],"file":"drawers.min.js"}