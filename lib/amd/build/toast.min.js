define ("core/toast",["exports","core/templates","core/notification","core/pending"],function(_exports,_templates,_notification,_pending){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.addToastRegion=_exports.add=void 0;_templates=_interopRequireDefault(_templates);_notification=_interopRequireDefault(_notification);_pending=_interopRequireDefault(_pending);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1,source;i<arguments.length;i++){source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}var addToastRegion=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(parent){var pendingPromise,_yield$Templates$rend,html,js;return regeneratorRuntime.wrap(function(_context){while(1){switch(_context.prev=_context.next){case 0:pendingPromise=new _pending.default("addToastRegion");_context.prev=1;_context.next=4;return _templates.default.renderForPromise("core/local/toast/wrapper",{});case 4:_yield$Templates$rend=_context.sent;html=_yield$Templates$rend.html;js=_yield$Templates$rend.js;_templates.default.prependNodeContents(parent,html,js);_context.next=13;break;case 10:_context.prev=10;_context.t0=_context["catch"](1);_notification.default.exception(_context.t0);case 13:pendingPromise.resolve();case 14:case"end":return _context.stop();}}},_callee,null,[[1,10]])}));return function(){return _ref.apply(this,arguments)}}();_exports.addToastRegion=addToastRegion;var add=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(message,configuration){var pendingPromise,templateName,targetNode,_yield$Templates$rend2,html,js;return regeneratorRuntime.wrap(function(_context2){while(1){switch(_context2.prev=_context2.next){case 0:pendingPromise=new _pending.default("addToastRegion");configuration=_objectSpread({closeButton:!1,autohide:!0,delay:4e3},configuration);templateName="core/local/toast/message";_context2.prev=3;_context2.next=6;return getTargetNode();case 6:targetNode=_context2.sent;_context2.next=9;return _templates.default.renderForPromise(templateName,_objectSpread({message:message},configuration));case 9:_yield$Templates$rend2=_context2.sent;html=_yield$Templates$rend2.html;js=_yield$Templates$rend2.js;_templates.default.prependNodeContents(targetNode,html,js);_context2.next=18;break;case 15:_context2.prev=15;_context2.t0=_context2["catch"](3);_notification.default.exception(_context2.t0);case 18:pendingPromise.resolve();case 19:case"end":return _context2.stop();}}},_callee2,null,[[3,15]])}));return function(){return _ref2.apply(this,arguments)}}();_exports.add=add;var getTargetNode=function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var regions;return regeneratorRuntime.wrap(function(_context3){while(1){switch(_context3.prev=_context3.next){case 0:regions=document.querySelectorAll(".toast-wrapper");if(!regions.length){_context3.next=3;break}return _context3.abrupt("return",regions[regions.length-1]);case 3:_context3.next=5;return addToastRegion(document.body,"fixed-bottom");case 5:return _context3.abrupt("return",getTargetNode());case 6:case"end":return _context3.stop();}}},_callee3)}));return function(){return _ref3.apply(this,arguments)}}()});
//# sourceMappingURL=toast.min.js.map
