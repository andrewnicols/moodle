define ("core/checkbox-toggleall",["jquery","core/pubsub","core/events"],function(a,b,c){var d=!1,f={checkboxToggled:"core/checkbox-toggleall:checkboxToggled"},g=function(a,b,c){if(c){return a.find("[data-action=\"toggle\"][data-togglegroup=\""+b+"\"]")}else{return a.find("[data-action=\"toggle\"][data-togglegroup^=\""+b+"\"]")}},h=function(a,b){return g(a,b,!1).filter("[data-toggle=\"slave\"]")},i=function(a,b,c){return g(a,b,c).filter("[data-toggle=\"master\"]")},j=function(a,b){return g(a,b,!0).filter("[data-toggle=\"action\"]")},k=function(b){var c=b.data.root,d=a(b.target),e=d.data("togglegroup"),f;if(d.is(":checkbox")){f=d.is(":checked")}else{f=1===d.data("checkall")}n(c,e,f)},l=function(a,b){var c=h(a,b);if(0<c.length){var d=c.filter(":checked"),e=c.length===d.length;q(a,b,e,!0);p(a,b,!d.length)}},m=function(a){var b=a.split(" "),c=[],d="";b.forEach(function(a){d+=" "+a;c.push(d.trim())});return c},n=function(a,d,e){var g=h(a,d);g.prop("checked",e).trigger("change");var i=g.filter(":checked");q(a,d,e,!1);p(a,d,!i.length);var j=m(d).filter(function(a){return a!==d});j.forEach(function(b){l(a,b)});c.notifyCheckboxToggleToggled({root:a,toggleGroupName:d,slaves:g,checkedSlaves:i,anyChecked:e});b.publish(f.checkboxToggled,{root:a,toggleGroupName:d,slaves:g,checkedSlaves:i,anyChecked:e},c.eventTypes.checkboxToggleToggled)},o=function(c){var d=c.data.root,e=a(c.target),g=e.data("togglegroup"),i=h(d,g),j=i.filter(":checked"),k=m(g);k.forEach(function(a){l(d,a)});b.publish(f.checkboxToggled,{root:d,toggleGroupName:g,slaves:i,checkedSlaves:j,anyChecked:!!j.length})},p=function(a,b,c){j(a,b).prop("disabled",c)},q=function(b,c,d,e){var f=i(b,c,e);f.prop("checked",d);f.each(function(c,e){e=a(e);var f;if(d){f=e.data("toggle-deselectall")}else{f=e.data("toggle-selectall")}if(e.is(":checkbox")){var g=b.find("[for=\""+e.attr("id")+"\"]");if(g.length){if(g.html()!==f){g.html(f)}}}else{e.text(f);e.data("checkall",d?0:1)}})},r=function(){if(!d){d=!0;var b=a(document.body);b.on("click","[data-action=\"toggle\"][data-toggle=\"master\"]",{root:b},k);b.on("click","[data-action=\"toggle\"][data-toggle=\"slave\"]",{root:b},o)}};return{init:function init(){r()},events:f,setGroupState:function setGroupState(b,c,d){b=a(b);q(b,c,d,!0);n(b,c,d)},updateSlavesFromMasterState:function updateSlavesFromMasterState(b,c){b=a(b);var d=i(b,c,!1),e;if(d.is(":checkbox")){e=d.is(":checked")}else{e=1===d.data("checkall")}n(b,c,e)}}});
//# sourceMappingURL=checkbox-toggleall.min.js.map
