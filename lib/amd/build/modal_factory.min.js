function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor)n=o.constructor.name;if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(null==len||len>arr.length)len=arr.length;for(var i=0,arr2=Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _arr=[],_n=!0,_d=!1,_s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=!0){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=!0;_e=err}finally{try{if(!_n&&null!=_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}define ("core/modal_factory",["jquery","core/modal_events","core/modal_registry","core/modal","core/modal_save_cancel","core/modal_cancel","core/local/modal/alert","core/templates","core/notification","core/custom_interaction_events","core/pending"],function($,ModalEvents,ModalRegistry,Modal,ModalSaveCancel,ModalCancel,ModalAlert,Templates,Notification,CustomEvents,Pending){var TEMPLATES={DEFAULT:"core/modal",SAVE_CANCEL:"core/modal_save_cancel",CANCEL:"core/modal_cancel",ALERT:"core/local/modal/alert"},TYPES={DEFAULT:"DEFAULT",SAVE_CANCEL:"SAVE_CANCEL",CANCEL:"CANCEL",ALERT:"ALERT"};ModalRegistry.register(TYPES.DEFAULT,Modal,TEMPLATES.DEFAULT);ModalRegistry.register(TYPES.SAVE_CANCEL,ModalSaveCancel,TEMPLATES.SAVE_CANCEL);ModalRegistry.register(TYPES.CANCEL,ModalCancel,TEMPLATES.CANCEL);ModalRegistry.register(TYPES.ALERT,ModalAlert,TEMPLATES.ALERT);var setUpTrigger=function(modalPromise,triggerElement,modalConfig){var actualTriggerElement=null,hasPreShowCallback="function"==typeof modalConfig.preShowCallback,triggeredCallback=function(e,data){var pendingPromise=new Pending("core/modal_factory:setUpTrigger:triggeredCallback");actualTriggerElement=$(e.currentTarget);modalPromise.then(function(modal){if(hasPreShowCallback){modalConfig.preShowCallback(actualTriggerElement,modal)}modal.show();return modal}).then(pendingPromise.resolve);data.originalEvent.preventDefault()};if(Array.isArray(triggerElement)){var selector=triggerElement[1];triggerElement=triggerElement[0];CustomEvents.define(triggerElement,[CustomEvents.events.activate]);triggerElement.on(CustomEvents.events.activate,selector,triggeredCallback)}else{CustomEvents.define(triggerElement,[CustomEvents.events.activate]);triggerElement.on(CustomEvents.events.activate,triggeredCallback)}modalPromise.then(function(modal){modal.getRoot().on(ModalEvents.hidden,function(){if(null!==actualTriggerElement){actualTriggerElement.focus()}});return modal})},createFromElement=function(registryConf,modalElement){modalElement=$(modalElement);var module=registryConf.module,modal=new module(modalElement);return modal},createFromType=function(registryConf,templateContext){var templateName=registryConf.template,modalPromise=Templates.render(templateName,templateContext).then(function(html){var modalElement=$(html);return createFromElement(registryConf,modalElement)}).fail(Notification.exception);return modalPromise};return{create:function create(modalConfig,triggerElement){var type=modalConfig.type||TYPES.DEFAULT,isLarge=modalConfig.large?!0:!1,registryConf=null,templateContext={};registryConf=ModalRegistry.get(type);if(!registryConf){Notification.exception({message:"Unable to find modal of type: "+type})}if("undefined"!=typeof modalConfig.templateContext){templateContext=modalConfig.templateContext}var modalPromise=createFromType(registryConf,templateContext).then(function(modal){if("undefined"!=typeof modalConfig.title){modal.setTitle(modalConfig.title)}if("undefined"!=typeof modalConfig.body){modal.setBody(modalConfig.body)}if("undefined"!=typeof modalConfig.footer){modal.setFooter(modalConfig.footer)}if(modalConfig.buttons){Object.entries(modalConfig.buttons).forEach(function(_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],value=_ref2[1];modal.setButtonText(key,value)})}if(isLarge){modal.setLarge()}if("undefined"!=typeof modalConfig.removeOnClose){modal.setRemoveOnClose(modalConfig.removeOnClose)}return modal});if("undefined"!=typeof triggerElement){setUpTrigger(modalPromise,triggerElement,modalConfig)}return modalPromise},types:TYPES}});
//# sourceMappingURL=modal_factory.min.js.map
