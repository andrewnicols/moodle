define ("core/icon_system_fontawesome",["core/icon_system","jquery","core/ajax","core/mustache","core/localstorage","core/url"],function(IconSystem,$,Ajax,Mustache,LocalStorage,Url){var staticMap=null,fetchMap=null,IconSystemFontawesome=function(){IconSystem.apply(this,arguments)};IconSystemFontawesome.prototype=Object.create(IconSystem.prototype);IconSystemFontawesome.prototype.init=function(){var currTheme=M.cfg.theme;if(staticMap){return $.when(this)}var map=LocalStorage.get("core_iconsystem/theme/"+currTheme+"/core/iconmap-fontawesome");if(map){map=JSON.parse(map)}if(map){staticMap=map;return $.when(this)}if(null===fetchMap){fetchMap=Ajax.call([{methodname:"core_output_load_fontawesome_icon_system_map",args:{themename:M.cfg.theme}}],!0,!1,!1,0,M.cfg.themerev)[0]}return fetchMap.then(function(map){staticMap={};$.each(map,function(index,value){staticMap[value.component+"/"+value.pix]=value.to});LocalStorage.set("core_iconsystem/theme/"+currTheme+"/core/iconmap-fontawesome",JSON.stringify(staticMap));return this}.bind(this))};IconSystemFontawesome.prototype.renderIcon=function(key,component,title,template){var mappedIcon=staticMap[component+"/"+key],unmappedIcon=!1;if("undefined"==typeof mappedIcon){var url=Url.imageUrl(key,component);unmappedIcon={attributes:[{name:"src",value:url},{name:"alt",value:title},{name:"title",value:title}]}}var context={key:mappedIcon,title:title,alt:title,unmappedIcon:unmappedIcon};if("undefined"==typeof title||""===title){context["aria-hidden"]=!0}var result=Mustache.render(template,context);return result.trim()};IconSystemFontawesome.prototype.getTemplateName=function(){return"core/pix_icon_fontawesome"};return IconSystemFontawesome});
//# sourceMappingURL=icon_system_fontawesome.min.js.map
