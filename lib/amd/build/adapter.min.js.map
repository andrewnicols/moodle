{"version":3,"sources":["../src/adapter.js"],"names":["define","e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","module","_adapter_factory","adapter","adapterFactory","window","Object","defineProperty","value","_ref","arguments","options","shimChrome","shimFirefox","shimEdge","shimSafari","logging","utils","log","browserDetails","detectBrowser","commonShim","extractVersion","disableLog","disableWarnings","browser","chromeShim","shimPeerConnection","browserShim","shimGetUserMedia","shimMediaStream","shimOnTrack","shimAddTrackRemoveTrack","shimGetSendersWithDtmf","shimGetStats","shimSenderReceiverGetStats","fixNegotiationNeeded","shimRTCIceCandidate","shimConnectionState","shimMaxMessageSize","shimSendThrowTypeError","removeAllowExtmapMixed","firefoxShim","shimRemoveStream","shimSenderGetStats","shimReceiverGetStats","shimRTCDataChannel","shimAddTransceiver","shimCreateOffer","shimCreateAnswer","edgeShim","shimGetDisplayMedia","shimReplaceTrack","safariShim","shimRTCIceServerUrls","shimCreateOfferLegacy","shimCallbacksAPI","shimLocalStreamsAPI","shimRemoteStreamsAPI","shimTrackEventTransceiver","_utils","_interopRequireWildcard","_chrome_shim","_edge_shim","_firefox_shim","_safari_shim","_common_shim","obj","__esModule","newObj","key","prototype","hasOwnProperty","default","_typeof","Symbol","iterator","constructor","_getusermedia","enumerable","get","_getdisplaymedia","MediaStream","webkitMediaStream","RTCPeerConnection","origGetStats","getStats","_this5","_arguments","Array","slice","selector","onSucc","onErr","apply","fixChromeStats_","response","standardReport","reports","result","forEach","report","standardStats","id","timestamp","type","localcandidate","remotecandidate","names","name","stat","makeMapStats","stats","Map","keys","map","successCallbackWrapper_","Promise","resolve","reject","then","shimAddTrackRemoveTrackWithNative","addTrack","version","origGetLocalStreams","getLocalStreams","_this11","nativeStreams","_reverseStreams","stream","origAddStream","addStream","_this12","_streams","getTracks","track","alreadyExists","getSenders","find","DOMException","newStream","origRemoveStream","removeStream","_this13","signalingState","streams","oldStream","dispatchEvent","Event","replaceInternalStreamId","pc","description","sdp","internalId","externalStream","internalStream","replace","RegExp","RTCSessionDescription","replaceExternalStreamId","method","nativeMethod","methodObj","_defineProperty","_this14","args","isLegacyCall","desc","err","origSetLocalDescription","setLocalDescription","origLocalDescription","getOwnPropertyDescriptor","removeTrack","sender","_this15","_pc","isLocal","streamid","hasTrack","webkitRTCPeerConnection","RTCIceCandidate","nativeAddIceCandidate","addIceCandidate","candidate","wrapPeerConnectionEvent","target","configurable","writable","_ontrack","set","removeEventListener","addEventListener","origSetRemoteDescription","setRemoteDescription","_this","_ontrackpoly","te","receiver","getReceivers","event","transceiver","shimSenderWithDtmf","dtmf","_dtmf","kind","createDTMFSender","_senders","origAddTrack","push","origRemoveTrack","idx","indexOf","splice","_this2","_this3","RTCRtpSender","origGetSenders","_this4","senders","RTCRtpReceiver","_this6","filterStats","origGetReceivers","_this7","receivers","srcElement","MediaStreamTrack","_this8","_shimmedLocalStreams","streamId","_this9","existingSenders","newSenders","filter","newSender","concat","_this10","getSourceId","navigator","mediaDevices","console","error","getDisplayMedia","constraints","sourceId","widthSpecified","video","width","heightSpecified","height","frameRateSpecified","frameRate","mandatory","chromeMediaSource","chromeMediaSourceId","maxFrameRate","maxWidth","maxHeight","getUserMedia","constraintsToChrome_","c","optional","cc","ideal","exact","min","max","oldname_","prefix","charAt","toUpperCase","oc","mix","advanced","shimConstraints_","func","JSON","parse","stringify","audio","remap","b","face","facingMode","getSupportedFacingModeLies","getSupportedConstraints","matches","enumerateDevices","devices","d","dev","some","match","label","toLowerCase","includes","deviceId","shimError_","PermissionDeniedError","PermissionDismissedError","InvalidStateError","DevicesNotFoundError","ConstraintNotSatisfiedError","TrackStartError","MediaDeviceFailedDueToShutdown","MediaDeviceKillSwitchOn","TabCaptureError","ScreenCaptureError","DeviceCaptureError","message","constraint","constraintName","toString","onSuccess","onError","webkitGetUserMedia","bind","origGetUserMedia","cs","getAudioTracks","getVideoTracks","stop","nativeSRD","split","line","trim","join","_sdp","_sdp2","NativeRTCIceCandidate","substr","nativeCandidate","parsedCandidate","parseCandidate","augmentedCandidate","assign","toJSON","sdpMid","sdpMLineIndex","usernameFragment","_sctp","sctpInDescription","sections","splitSections","shift","mediaSection","mLine","parseMLine","protocol","getRemoteFirefoxVersion","parseInt","getCanSendMaxMessageSize","remoteIsFirefox","canSendMaxMessageSize","getMaxMessageSize","maxMessageSize","matchPrefix","_getConfiguration","getConfiguration","sdpSemantics","isFirefox","canSendMMS","remoteMMS","Number","POSITIVE_INFINITY","Math","sctp","wrapDcSend","dc","origDataChannelSend","send","data","size","byteLength","readyState","TypeError","origCreateDataChannel","createDataChannel","dataChannel","channel","proto","completed","checking","iceConnectionState","_onconnectionstatechange","cb","origMethod","_connectionstatechangepoly","_lastConnectionState","connectionState","newEvent","_filtericeservers","_rtcpeerconnectionShim","_rtcpeerconnectionShim2","RTCIceGatherer","origMSTEnabled","ev","enabled","RTCDtmfSender","RTCDTMFSender","RTCPeerConnectionShim","config","iceServers","filterIceServers","replaceTrack","setTrack","hasTurn","server","urls","url","deprecated","isString","validTurn","startsWith","catch","mozRTCPeerConnection","modernStatsTypes","inboundrtp","outboundrtp","candidatepair","nativeGetStats","DataChannel","RTCDataChannel","origAddTransceiver","addTransceiver","setParametersPromises","initParameters","shouldPerformCheck","sendEncodings","encodingParam","test","rid","parseFloat","scaleResolutionDownBy","RangeError","maxFramerate","params","getParameters","encodings","setParameters","origCreateOffer","createOffer","_arguments2","all","finally","origCreateAnswer","createAnswer","_arguments3","RTCTrackEvent","preferredMediaSource","mediaSource","nativeGetUserMedia","getSettings","nativeGetSettings","applyConstraints","nativeApplyConstraints","successCallback","failureCallback","promise","withCallback","_getUserMedia","shimConstraints","errcb","offerOptions","offerToReceiveAudio","audioTransceiver","getTransceivers","direction","setDirection","offerToReceiveVideo","videoTransceiver","_localStreams","_addTrack","index","tracks","getRemoteStreams","_remoteStreams","_onaddstream","_onaddstreampoly","compactObject","OrigPeerConnection","pcConfig","pcConstraints","newIceServers","generateCertificate","eventNameToWrap","wrapper","nativeAddEventListener","nativeEventName","wrappedCallback","modifiedEvent","_eventMap","nativeRemoveEventListener","unwrappedCb","bool","logDisabled_","deprecationWarnings_","walkStats","outbound","streamStatsType","filteredResult","trackStats","trackIdentifier","trackStat","trackId","uastring","expr","pos","oldMethod","newMethod","warn","mozGetUserMedia","userAgent","isSecureContext","supportsUnifiedPlan","RTCRtpTransceiver","isObject","val","reduce","accumulator","isObj","isEmptyObject","base","resultSet","has","endsWith","SDPUtils","fixStatsType","writeMediaSection","caps","dtlsRole","writeRtpDescription","writeIceParameters","iceGatherer","getLocalParameters","writeDtlsParameters","dtlsTransport","mid","rtpSender","rtpReceiver","_initialTrackId","msid","sendEncodingParameters","ssrc","rtx","localCName","edgeVersion","getCommonCapabilities","localCapabilities","remoteCapabilities","commonCapabilities","codecs","headerExtensions","fecMechanisms","findCodecByPayloadType","pt","payloadType","preferredPayloadType","rtxCapabilityMatches","lRtx","rRtx","lCodecs","rCodecs","lCodec","parameters","apt","rCodec","clockRate","numChannels","rtcpFeedback","fb","j","parameter","lHeaderExtension","rHeaderExtension","uri","isActionAllowedInSignalingState","action","offer","answer","maybeAddCandidate","iceTransport","alreadyAdded","getRemoteCandidates","remoteCandidate","foundation","ip","port","priority","addRemoteCandidate","makeError","NotSupportedError","InvalidAccessError","OperationError","addTrackToStreamAndFireEvent","MediaStreamTrackEvent","removeTrackFromStreamAndFireEvent","fireAddTrack","trackEvent","setTimeout","_dispatchEvent","_eventTarget","document","createDocumentFragment","canTrickleIceCandidates","needNegotiation","localStreams","remoteStreams","_localDescription","_remoteDescription","iceGatheringState","usingBundle","bundlePolicy","rtcpMuxPolicy","iceTransportPolicy","_iceGatherers","iceCandidatePoolSize","gatherPolicy","_config","transceivers","_sdpSessionId","generateSessionId","_sdpSessionVersion","_dtlsRole","_isClosed","onicecandidate","onaddstream","ontrack","onremovestream","onsignalingstatechange","oniceconnectionstatechange","onconnectionstatechange","onicegatheringstatechange","onnegotiationneeded","ondatachannel","_emitGatheringStateChange","_createTransceiver","doNotAdd","hasBundleTransport","recvEncodingParameters","associatedRemoteMediaStreams","wantReceive","transports","_createIceAndDtlsTransports","_maybeFireNegotiationNeeded","clonedStream","clone","clonedTrack","_createIceGatherer","bufferedCandidateEvents","bufferCandidates","end","state","_gather","onlocalcandidate","evt","cand","component","ufrag","serializedCandidate","writeCandidate","getMediaSections","getDescription","complete","every","RTCIceTransport","onicestatechange","_updateIceConnectionState","_updateConnectionState","RTCDtlsTransport","ondtlsstatechange","onerror","_disposeIceAndDtlsTransports","_transceive","recv","rtcp","cname","compound","rtcpParameters","p","receive","sessionpart","parseRtpParameters","isIceLite","rejected","isRejected","remoteIceParameters","getIceParameters","remoteDtlsParameters","getDtlsParameters","role","start","_updateSignalingState","receiverList","iceOptions","lines","splitLines","getKind","getDirection","remoteMsid","parseMsid","getMid","generateIdentifier","parseRtpEncodingParameters","parseRtcpParameters","isComplete","cands","setTransport","setRemoteCandidates","getCapabilities","codec","isNewTrack","nativeTrack","hasRtx","sid","item","close","newState","states","closed","connected","disconnected","failed","new","connecting","numAudioTracks","numVideoTracks","writeSessionBoilerplate","remoteCodec","hdrExt","remoteExtensions","rHdrExt","getLocalCandidates","mediaSectionsInOffer","localTrack","reducedSize","candidateString","senderOrReceiver","promises","allStats","results","ortcObjectName","nativeGetstats","nativeStats","mapStats","methods","random","blob","parts","part","substring","address","relatedAddress","relatedPort","tcpType","parseIceOptions","parseRtpMap","parsed","channels","writeRtpMap","parseExtmap","writeExtmap","headerExtension","preferredId","parseFmtp","kv","writeFmtp","param","parseRtcpFb","writeRtcpFb","parseSsrcMedia","sp","colon","attribute","parseSsrcGroup","semantics","ssrcs","parseFingerprint","algorithm","fingerprints","setupType","fp","parseCryptoLine","tag","cryptoSuite","keyParams","sessionParams","writeCryptoLine","writeCryptoKeyParams","parseCryptoKeyParams","keyMethod","keySalt","lifeTime","mkiValue","mkiLength","getCryptoParameters","pwd","password","mline","rtpmapline","fmtps","maxptime","extension","encodingParameters","hasRed","hasUlpfec","primarySsrc","secondarySsrc","flows","encParam","codecPayloadType","fec","mechanism","bandwidth","maxBitrate","remoteSsrc","rsize","mux","spec","planB","msidParts","parseSctpDescription","maxSizeLine","isNaN","sctpPort","fmt","sctpMapLines","writeSctpDescription","media","output","sessId","sessVer","sessUser","sessionId","parseOLine","username","sessionVersion","netType","addressType","isValidSDP"],"mappings":"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","sourcesContent":["/**\n * Description of import/upgrade into Moodle:\n *\n * 1. Visit https://github.com/webrtc/adapter/releases.\n * 2. Check if the version has been updated from what is listed in lib/thirdpartylibs.xml in the Moodle wwwroot.\n * 3. If it has -\n *    1. Download the source code.\n *    2. Copy the content of the file release/adapter.js from the archive (ignore the first line).\n *    3. Replace the content below \"return (function e(t,n,r) ..\" in this file with the content you copied.\n *    4. Ensure to update lib/thirdpartylibs.xml with any changes.\n */\n\n// ESLint directives.\n/* eslint-disable */\n\n// JSHint directives.\n/* jshint ignore:start */\n\ndefine([], function() {\nreturn (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n\n'use strict';\n\nvar _adapter_factory = require('./adapter_factory.js');\n\nvar adapter = (0, _adapter_factory.adapterFactory)({ window: window });\nmodule.exports = adapter; // this is the difference from adapter_core.\n\n},{\"./adapter_factory.js\":2}],2:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.adapterFactory = adapterFactory;\n\nvar _utils = require('./utils');\n\nvar utils = _interopRequireWildcard(_utils);\n\nvar _chrome_shim = require('./chrome/chrome_shim');\n\nvar chromeShim = _interopRequireWildcard(_chrome_shim);\n\nvar _edge_shim = require('./edge/edge_shim');\n\nvar edgeShim = _interopRequireWildcard(_edge_shim);\n\nvar _firefox_shim = require('./firefox/firefox_shim');\n\nvar firefoxShim = _interopRequireWildcard(_firefox_shim);\n\nvar _safari_shim = require('./safari/safari_shim');\n\nvar safariShim = _interopRequireWildcard(_safari_shim);\n\nvar _common_shim = require('./common_shim');\n\nvar commonShim = _interopRequireWildcard(_common_shim);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n// Shimming starts here.\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\nfunction adapterFactory() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      window = _ref.window;\n\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n    shimChrome: true,\n    shimFirefox: true,\n    shimEdge: true,\n    shimSafari: true\n  };\n\n  // Utils.\n  var logging = utils.log;\n  var browserDetails = utils.detectBrowser(window);\n\n  var adapter = {\n    browserDetails: browserDetails,\n    commonShim: commonShim,\n    extractVersion: utils.extractVersion,\n    disableLog: utils.disableLog,\n    disableWarnings: utils.disableWarnings\n  };\n\n  // Shim browser if found.\n  switch (browserDetails.browser) {\n    case 'chrome':\n      if (!chromeShim || !chromeShim.shimPeerConnection || !options.shimChrome) {\n        logging('Chrome shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming chrome.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = chromeShim;\n\n      chromeShim.shimGetUserMedia(window);\n      chromeShim.shimMediaStream(window);\n      chromeShim.shimPeerConnection(window);\n      chromeShim.shimOnTrack(window);\n      chromeShim.shimAddTrackRemoveTrack(window);\n      chromeShim.shimGetSendersWithDtmf(window);\n      chromeShim.shimGetStats(window);\n      chromeShim.shimSenderReceiverGetStats(window);\n      chromeShim.fixNegotiationNeeded(window);\n\n      commonShim.shimRTCIceCandidate(window);\n      commonShim.shimConnectionState(window);\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      commonShim.removeAllowExtmapMixed(window);\n      break;\n    case 'firefox':\n      if (!firefoxShim || !firefoxShim.shimPeerConnection || !options.shimFirefox) {\n        logging('Firefox shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming firefox.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = firefoxShim;\n\n      firefoxShim.shimGetUserMedia(window);\n      firefoxShim.shimPeerConnection(window);\n      firefoxShim.shimOnTrack(window);\n      firefoxShim.shimRemoveStream(window);\n      firefoxShim.shimSenderGetStats(window);\n      firefoxShim.shimReceiverGetStats(window);\n      firefoxShim.shimRTCDataChannel(window);\n      firefoxShim.shimAddTransceiver(window);\n      firefoxShim.shimCreateOffer(window);\n      firefoxShim.shimCreateAnswer(window);\n\n      commonShim.shimRTCIceCandidate(window);\n      commonShim.shimConnectionState(window);\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      break;\n    case 'edge':\n      if (!edgeShim || !edgeShim.shimPeerConnection || !options.shimEdge) {\n        logging('MS edge shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming edge.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = edgeShim;\n\n      edgeShim.shimGetUserMedia(window);\n      edgeShim.shimGetDisplayMedia(window);\n      edgeShim.shimPeerConnection(window);\n      edgeShim.shimReplaceTrack(window);\n\n      // the edge shim implements the full RTCIceCandidate object.\n\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      break;\n    case 'safari':\n      if (!safariShim || !options.shimSafari) {\n        logging('Safari shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming safari.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = safariShim;\n\n      safariShim.shimRTCIceServerUrls(window);\n      safariShim.shimCreateOfferLegacy(window);\n      safariShim.shimCallbacksAPI(window);\n      safariShim.shimLocalStreamsAPI(window);\n      safariShim.shimRemoteStreamsAPI(window);\n      safariShim.shimTrackEventTransceiver(window);\n      safariShim.shimGetUserMedia(window);\n\n      commonShim.shimRTCIceCandidate(window);\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      commonShim.removeAllowExtmapMixed(window);\n      break;\n    default:\n      logging('Unsupported browser!');\n      break;\n  }\n\n  return adapter;\n}\n\n// Browser shims.\n\n},{\"./chrome/chrome_shim\":3,\"./common_shim\":6,\"./edge/edge_shim\":7,\"./firefox/firefox_shim\":11,\"./safari/safari_shim\":14,\"./utils\":15}],3:[function(require,module,exports){\n\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.shimGetDisplayMedia = exports.shimGetUserMedia = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _getusermedia = require('./getusermedia');\n\nObject.defineProperty(exports, 'shimGetUserMedia', {\n  enumerable: true,\n  get: function get() {\n    return _getusermedia.shimGetUserMedia;\n  }\n});\n\nvar _getdisplaymedia = require('./getdisplaymedia');\n\nObject.defineProperty(exports, 'shimGetDisplayMedia', {\n  enumerable: true,\n  get: function get() {\n    return _getdisplaymedia.shimGetDisplayMedia;\n  }\n});\nexports.shimMediaStream = shimMediaStream;\nexports.shimOnTrack = shimOnTrack;\nexports.shimGetSendersWithDtmf = shimGetSendersWithDtmf;\nexports.shimGetStats = shimGetStats;\nexports.shimSenderReceiverGetStats = shimSenderReceiverGetStats;\nexports.shimAddTrackRemoveTrackWithNative = shimAddTrackRemoveTrackWithNative;\nexports.shimAddTrackRemoveTrack = shimAddTrackRemoveTrack;\nexports.shimPeerConnection = shimPeerConnection;\nexports.fixNegotiationNeeded = fixNegotiationNeeded;\n\nvar _utils = require('../utils.js');\n\nvar utils = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction shimMediaStream(window) {\n  window.MediaStream = window.MediaStream || window.webkitMediaStream;\n}\n\nfunction shimOnTrack(window) {\n  if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection && !('ontrack' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n      get: function get() {\n        return this._ontrack;\n      },\n      set: function set(f) {\n        if (this._ontrack) {\n          this.removeEventListener('track', this._ontrack);\n        }\n        this.addEventListener('track', this._ontrack = f);\n      },\n\n      enumerable: true,\n      configurable: true\n    });\n    var origSetRemoteDescription = window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription = function setRemoteDescription() {\n      var _this = this;\n\n      if (!this._ontrackpoly) {\n        this._ontrackpoly = function (e) {\n          // onaddstream does not fire when a track is added to an existing\n          // stream. But stream.onaddtrack is implemented so we use that.\n          e.stream.addEventListener('addtrack', function (te) {\n            var receiver = void 0;\n            if (window.RTCPeerConnection.prototype.getReceivers) {\n              receiver = _this.getReceivers().find(function (r) {\n                return r.track && r.track.id === te.track.id;\n              });\n            } else {\n              receiver = { track: te.track };\n            }\n\n            var event = new Event('track');\n            event.track = te.track;\n            event.receiver = receiver;\n            event.transceiver = { receiver: receiver };\n            event.streams = [e.stream];\n            _this.dispatchEvent(event);\n          });\n          e.stream.getTracks().forEach(function (track) {\n            var receiver = void 0;\n            if (window.RTCPeerConnection.prototype.getReceivers) {\n              receiver = _this.getReceivers().find(function (r) {\n                return r.track && r.track.id === track.id;\n              });\n            } else {\n              receiver = { track: track };\n            }\n            var event = new Event('track');\n            event.track = track;\n            event.receiver = receiver;\n            event.transceiver = { receiver: receiver };\n            event.streams = [e.stream];\n            _this.dispatchEvent(event);\n          });\n        };\n        this.addEventListener('addstream', this._ontrackpoly);\n      }\n      return origSetRemoteDescription.apply(this, arguments);\n    };\n  } else {\n    // even if RTCRtpTransceiver is in window, it is only used and\n    // emitted in unified-plan. Unfortunately this means we need\n    // to unconditionally wrap the event.\n    utils.wrapPeerConnectionEvent(window, 'track', function (e) {\n      if (!e.transceiver) {\n        Object.defineProperty(e, 'transceiver', { value: { receiver: e.receiver } });\n      }\n      return e;\n    });\n  }\n}\n\nfunction shimGetSendersWithDtmf(window) {\n  // Overrides addTrack/removeTrack, depends on shimAddTrackRemoveTrack.\n  if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection && !('getSenders' in window.RTCPeerConnection.prototype) && 'createDTMFSender' in window.RTCPeerConnection.prototype) {\n    var shimSenderWithDtmf = function shimSenderWithDtmf(pc, track) {\n      return {\n        track: track,\n        get dtmf() {\n          if (this._dtmf === undefined) {\n            if (track.kind === 'audio') {\n              this._dtmf = pc.createDTMFSender(track);\n            } else {\n              this._dtmf = null;\n            }\n          }\n          return this._dtmf;\n        },\n        _pc: pc\n      };\n    };\n\n    // augment addTrack when getSenders is not available.\n    if (!window.RTCPeerConnection.prototype.getSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n        this._senders = this._senders || [];\n        return this._senders.slice(); // return a copy of the internal state.\n      };\n      var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n      window.RTCPeerConnection.prototype.addTrack = function addTrack(track, stream) {\n        var sender = origAddTrack.apply(this, arguments);\n        if (!sender) {\n          sender = shimSenderWithDtmf(this, track);\n          this._senders.push(sender);\n        }\n        return sender;\n      };\n\n      var origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n      window.RTCPeerConnection.prototype.removeTrack = function removeTrack(sender) {\n        origRemoveTrack.apply(this, arguments);\n        var idx = this._senders.indexOf(sender);\n        if (idx !== -1) {\n          this._senders.splice(idx, 1);\n        }\n      };\n    }\n    var origAddStream = window.RTCPeerConnection.prototype.addStream;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      var _this2 = this;\n\n      this._senders = this._senders || [];\n      origAddStream.apply(this, [stream]);\n      stream.getTracks().forEach(function (track) {\n        _this2._senders.push(shimSenderWithDtmf(_this2, track));\n      });\n    };\n\n    var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n    window.RTCPeerConnection.prototype.removeStream = function removeStream(stream) {\n      var _this3 = this;\n\n      this._senders = this._senders || [];\n      origRemoveStream.apply(this, [stream]);\n\n      stream.getTracks().forEach(function (track) {\n        var sender = _this3._senders.find(function (s) {\n          return s.track === track;\n        });\n        if (sender) {\n          // remove sender\n          _this3._senders.splice(_this3._senders.indexOf(sender), 1);\n        }\n      });\n    };\n  } else if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection && 'getSenders' in window.RTCPeerConnection.prototype && 'createDTMFSender' in window.RTCPeerConnection.prototype && window.RTCRtpSender && !('dtmf' in window.RTCRtpSender.prototype)) {\n    var origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n    window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n      var _this4 = this;\n\n      var senders = origGetSenders.apply(this, []);\n      senders.forEach(function (sender) {\n        return sender._pc = _this4;\n      });\n      return senders;\n    };\n\n    Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n      get: function get() {\n        if (this._dtmf === undefined) {\n          if (this.track.kind === 'audio') {\n            this._dtmf = this._pc.createDTMFSender(this.track);\n          } else {\n            this._dtmf = null;\n          }\n        }\n        return this._dtmf;\n      }\n    });\n  }\n}\n\nfunction shimGetStats(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  var origGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    var _this5 = this;\n\n    var _arguments = Array.prototype.slice.call(arguments),\n        selector = _arguments[0],\n        onSucc = _arguments[1],\n        onErr = _arguments[2];\n\n    // If selector is a function then we are in the old style stats so just\n    // pass back the original getStats format to avoid breaking old users.\n\n\n    if (arguments.length > 0 && typeof selector === 'function') {\n      return origGetStats.apply(this, arguments);\n    }\n\n    // When spec-style getStats is supported, return those when called with\n    // either no arguments or the selector argument is null.\n    if (origGetStats.length === 0 && (arguments.length === 0 || typeof selector !== 'function')) {\n      return origGetStats.apply(this, []);\n    }\n\n    var fixChromeStats_ = function fixChromeStats_(response) {\n      var standardReport = {};\n      var reports = response.result();\n      reports.forEach(function (report) {\n        var standardStats = {\n          id: report.id,\n          timestamp: report.timestamp,\n          type: {\n            localcandidate: 'local-candidate',\n            remotecandidate: 'remote-candidate'\n          }[report.type] || report.type\n        };\n        report.names().forEach(function (name) {\n          standardStats[name] = report.stat(name);\n        });\n        standardReport[standardStats.id] = standardStats;\n      });\n\n      return standardReport;\n    };\n\n    // shim getStats with maplike support\n    var makeMapStats = function makeMapStats(stats) {\n      return new Map(Object.keys(stats).map(function (key) {\n        return [key, stats[key]];\n      }));\n    };\n\n    if (arguments.length >= 2) {\n      var successCallbackWrapper_ = function successCallbackWrapper_(response) {\n        onSucc(makeMapStats(fixChromeStats_(response)));\n      };\n\n      return origGetStats.apply(this, [successCallbackWrapper_, selector]);\n    }\n\n    // promise-support\n    return new Promise(function (resolve, reject) {\n      origGetStats.apply(_this5, [function (response) {\n        resolve(makeMapStats(fixChromeStats_(response)));\n      }, reject]);\n    }).then(onSucc, onErr);\n  };\n}\n\nfunction shimSenderReceiverGetStats(window) {\n  if (!((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection && window.RTCRtpSender && window.RTCRtpReceiver)) {\n    return;\n  }\n\n  // shim sender stats.\n  if (!('getStats' in window.RTCRtpSender.prototype)) {\n    var origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n    if (origGetSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n        var _this6 = this;\n\n        var senders = origGetSenders.apply(this, []);\n        senders.forEach(function (sender) {\n          return sender._pc = _this6;\n        });\n        return senders;\n      };\n    }\n\n    var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n    if (origAddTrack) {\n      window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n        var sender = origAddTrack.apply(this, arguments);\n        sender._pc = this;\n        return sender;\n      };\n    }\n    window.RTCRtpSender.prototype.getStats = function getStats() {\n      var sender = this;\n      return this._pc.getStats().then(function (result) {\n        return (\n          /* Note: this will include stats of all senders that\n           *   send a track with the same id as sender.track as\n           *   it is not possible to identify the RTCRtpSender.\n           */\n          utils.filterStats(result, sender.track, true)\n        );\n      });\n    };\n  }\n\n  // shim receiver stats.\n  if (!('getStats' in window.RTCRtpReceiver.prototype)) {\n    var origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n    if (origGetReceivers) {\n      window.RTCPeerConnection.prototype.getReceivers = function getReceivers() {\n        var _this7 = this;\n\n        var receivers = origGetReceivers.apply(this, []);\n        receivers.forEach(function (receiver) {\n          return receiver._pc = _this7;\n        });\n        return receivers;\n      };\n    }\n    utils.wrapPeerConnectionEvent(window, 'track', function (e) {\n      e.receiver._pc = e.srcElement;\n      return e;\n    });\n    window.RTCRtpReceiver.prototype.getStats = function getStats() {\n      var receiver = this;\n      return this._pc.getStats().then(function (result) {\n        return utils.filterStats(result, receiver.track, false);\n      });\n    };\n  }\n\n  if (!('getStats' in window.RTCRtpSender.prototype && 'getStats' in window.RTCRtpReceiver.prototype)) {\n    return;\n  }\n\n  // shim RTCPeerConnection.getStats(track).\n  var origGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    if (arguments.length > 0 && arguments[0] instanceof window.MediaStreamTrack) {\n      var track = arguments[0];\n      var sender = void 0;\n      var receiver = void 0;\n      var err = void 0;\n      this.getSenders().forEach(function (s) {\n        if (s.track === track) {\n          if (sender) {\n            err = true;\n          } else {\n            sender = s;\n          }\n        }\n      });\n      this.getReceivers().forEach(function (r) {\n        if (r.track === track) {\n          if (receiver) {\n            err = true;\n          } else {\n            receiver = r;\n          }\n        }\n        return r.track === track;\n      });\n      if (err || sender && receiver) {\n        return Promise.reject(new DOMException('There are more than one sender or receiver for the track.', 'InvalidAccessError'));\n      } else if (sender) {\n        return sender.getStats();\n      } else if (receiver) {\n        return receiver.getStats();\n      }\n      return Promise.reject(new DOMException('There is no sender or receiver for the track.', 'InvalidAccessError'));\n    }\n    return origGetStats.apply(this, arguments);\n  };\n}\n\nfunction shimAddTrackRemoveTrackWithNative(window) {\n  // shim addTrack/removeTrack with native variants in order to make\n  // the interactions with legacy getLocalStreams behave as in other browsers.\n  // Keeps a mapping stream.id => [stream, rtpsenders...]\n  window.RTCPeerConnection.prototype.getLocalStreams = function getLocalStreams() {\n    var _this8 = this;\n\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n    return Object.keys(this._shimmedLocalStreams).map(function (streamId) {\n      return _this8._shimmedLocalStreams[streamId][0];\n    });\n  };\n\n  var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n  window.RTCPeerConnection.prototype.addTrack = function addTrack(track, stream) {\n    if (!stream) {\n      return origAddTrack.apply(this, arguments);\n    }\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n    var sender = origAddTrack.apply(this, arguments);\n    if (!this._shimmedLocalStreams[stream.id]) {\n      this._shimmedLocalStreams[stream.id] = [stream, sender];\n    } else if (this._shimmedLocalStreams[stream.id].indexOf(sender) === -1) {\n      this._shimmedLocalStreams[stream.id].push(sender);\n    }\n    return sender;\n  };\n\n  var origAddStream = window.RTCPeerConnection.prototype.addStream;\n  window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n    var _this9 = this;\n\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n    stream.getTracks().forEach(function (track) {\n      var alreadyExists = _this9.getSenders().find(function (s) {\n        return s.track === track;\n      });\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.', 'InvalidAccessError');\n      }\n    });\n    var existingSenders = this.getSenders();\n    origAddStream.apply(this, arguments);\n    var newSenders = this.getSenders().filter(function (newSender) {\n      return existingSenders.indexOf(newSender) === -1;\n    });\n    this._shimmedLocalStreams[stream.id] = [stream].concat(newSenders);\n  };\n\n  var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n  window.RTCPeerConnection.prototype.removeStream = function removeStream(stream) {\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n    delete this._shimmedLocalStreams[stream.id];\n    return origRemoveStream.apply(this, arguments);\n  };\n\n  var origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n  window.RTCPeerConnection.prototype.removeTrack = function removeTrack(sender) {\n    var _this10 = this;\n\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n    if (sender) {\n      Object.keys(this._shimmedLocalStreams).forEach(function (streamId) {\n        var idx = _this10._shimmedLocalStreams[streamId].indexOf(sender);\n        if (idx !== -1) {\n          _this10._shimmedLocalStreams[streamId].splice(idx, 1);\n        }\n        if (_this10._shimmedLocalStreams[streamId].length === 1) {\n          delete _this10._shimmedLocalStreams[streamId];\n        }\n      });\n    }\n    return origRemoveTrack.apply(this, arguments);\n  };\n}\n\nfunction shimAddTrackRemoveTrack(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  var browserDetails = utils.detectBrowser(window);\n  // shim addTrack and removeTrack.\n  if (window.RTCPeerConnection.prototype.addTrack && browserDetails.version >= 65) {\n    return shimAddTrackRemoveTrackWithNative(window);\n  }\n\n  // also shim pc.getLocalStreams when addTrack is shimmed\n  // to return the original streams.\n  var origGetLocalStreams = window.RTCPeerConnection.prototype.getLocalStreams;\n  window.RTCPeerConnection.prototype.getLocalStreams = function getLocalStreams() {\n    var _this11 = this;\n\n    var nativeStreams = origGetLocalStreams.apply(this);\n    this._reverseStreams = this._reverseStreams || {};\n    return nativeStreams.map(function (stream) {\n      return _this11._reverseStreams[stream.id];\n    });\n  };\n\n  var origAddStream = window.RTCPeerConnection.prototype.addStream;\n  window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n    var _this12 = this;\n\n    this._streams = this._streams || {};\n    this._reverseStreams = this._reverseStreams || {};\n\n    stream.getTracks().forEach(function (track) {\n      var alreadyExists = _this12.getSenders().find(function (s) {\n        return s.track === track;\n      });\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.', 'InvalidAccessError');\n      }\n    });\n    // Add identity mapping for consistency with addTrack.\n    // Unless this is being used with a stream from addTrack.\n    if (!this._reverseStreams[stream.id]) {\n      var newStream = new window.MediaStream(stream.getTracks());\n      this._streams[stream.id] = newStream;\n      this._reverseStreams[newStream.id] = stream;\n      stream = newStream;\n    }\n    origAddStream.apply(this, [stream]);\n  };\n\n  var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n  window.RTCPeerConnection.prototype.removeStream = function removeStream(stream) {\n    this._streams = this._streams || {};\n    this._reverseStreams = this._reverseStreams || {};\n\n    origRemoveStream.apply(this, [this._streams[stream.id] || stream]);\n    delete this._reverseStreams[this._streams[stream.id] ? this._streams[stream.id].id : stream.id];\n    delete this._streams[stream.id];\n  };\n\n  window.RTCPeerConnection.prototype.addTrack = function addTrack(track, stream) {\n    var _this13 = this;\n\n    if (this.signalingState === 'closed') {\n      throw new DOMException('The RTCPeerConnection\\'s signalingState is \\'closed\\'.', 'InvalidStateError');\n    }\n    var streams = [].slice.call(arguments, 1);\n    if (streams.length !== 1 || !streams[0].getTracks().find(function (t) {\n      return t === track;\n    })) {\n      // this is not fully correct but all we can manage without\n      // [[associated MediaStreams]] internal slot.\n      throw new DOMException('The adapter.js addTrack polyfill only supports a single ' + ' stream which is associated with the specified track.', 'NotSupportedError');\n    }\n\n    var alreadyExists = this.getSenders().find(function (s) {\n      return s.track === track;\n    });\n    if (alreadyExists) {\n      throw new DOMException('Track already exists.', 'InvalidAccessError');\n    }\n\n    this._streams = this._streams || {};\n    this._reverseStreams = this._reverseStreams || {};\n    var oldStream = this._streams[stream.id];\n    if (oldStream) {\n      // this is using odd Chrome behaviour, use with caution:\n      // https://bugs.chromium.org/p/webrtc/issues/detail?id=7815\n      // Note: we rely on the high-level addTrack/dtmf shim to\n      // create the sender with a dtmf sender.\n      oldStream.addTrack(track);\n\n      // Trigger ONN async.\n      Promise.resolve().then(function () {\n        _this13.dispatchEvent(new Event('negotiationneeded'));\n      });\n    } else {\n      var newStream = new window.MediaStream([track]);\n      this._streams[stream.id] = newStream;\n      this._reverseStreams[newStream.id] = stream;\n      this.addStream(newStream);\n    }\n    return this.getSenders().find(function (s) {\n      return s.track === track;\n    });\n  };\n\n  // replace the internal stream id with the external one and\n  // vice versa.\n  function replaceInternalStreamId(pc, description) {\n    var sdp = description.sdp;\n    Object.keys(pc._reverseStreams || []).forEach(function (internalId) {\n      var externalStream = pc._reverseStreams[internalId];\n      var internalStream = pc._streams[externalStream.id];\n      sdp = sdp.replace(new RegExp(internalStream.id, 'g'), externalStream.id);\n    });\n    return new RTCSessionDescription({\n      type: description.type,\n      sdp: sdp\n    });\n  }\n  function replaceExternalStreamId(pc, description) {\n    var sdp = description.sdp;\n    Object.keys(pc._reverseStreams || []).forEach(function (internalId) {\n      var externalStream = pc._reverseStreams[internalId];\n      var internalStream = pc._streams[externalStream.id];\n      sdp = sdp.replace(new RegExp(externalStream.id, 'g'), internalStream.id);\n    });\n    return new RTCSessionDescription({\n      type: description.type,\n      sdp: sdp\n    });\n  }\n  ['createOffer', 'createAnswer'].forEach(function (method) {\n    var nativeMethod = window.RTCPeerConnection.prototype[method];\n    var methodObj = _defineProperty({}, method, function () {\n      var _this14 = this;\n\n      var args = arguments;\n      var isLegacyCall = arguments.length && typeof arguments[0] === 'function';\n      if (isLegacyCall) {\n        return nativeMethod.apply(this, [function (description) {\n          var desc = replaceInternalStreamId(_this14, description);\n          args[0].apply(null, [desc]);\n        }, function (err) {\n          if (args[1]) {\n            args[1].apply(null, err);\n          }\n        }, arguments[2]]);\n      }\n      return nativeMethod.apply(this, arguments).then(function (description) {\n        return replaceInternalStreamId(_this14, description);\n      });\n    });\n    window.RTCPeerConnection.prototype[method] = methodObj[method];\n  });\n\n  var origSetLocalDescription = window.RTCPeerConnection.prototype.setLocalDescription;\n  window.RTCPeerConnection.prototype.setLocalDescription = function setLocalDescription() {\n    if (!arguments.length || !arguments[0].type) {\n      return origSetLocalDescription.apply(this, arguments);\n    }\n    arguments[0] = replaceExternalStreamId(this, arguments[0]);\n    return origSetLocalDescription.apply(this, arguments);\n  };\n\n  // TODO: mangle getStats: https://w3c.github.io/webrtc-stats/#dom-rtcmediastreamstats-streamidentifier\n\n  var origLocalDescription = Object.getOwnPropertyDescriptor(window.RTCPeerConnection.prototype, 'localDescription');\n  Object.defineProperty(window.RTCPeerConnection.prototype, 'localDescription', {\n    get: function get() {\n      var description = origLocalDescription.get.apply(this);\n      if (description.type === '') {\n        return description;\n      }\n      return replaceInternalStreamId(this, description);\n    }\n  });\n\n  window.RTCPeerConnection.prototype.removeTrack = function removeTrack(sender) {\n    var _this15 = this;\n\n    if (this.signalingState === 'closed') {\n      throw new DOMException('The RTCPeerConnection\\'s signalingState is \\'closed\\'.', 'InvalidStateError');\n    }\n    // We can not yet check for sender instanceof RTCRtpSender\n    // since we shim RTPSender. So we check if sender._pc is set.\n    if (!sender._pc) {\n      throw new DOMException('Argument 1 of RTCPeerConnection.removeTrack ' + 'does not implement interface RTCRtpSender.', 'TypeError');\n    }\n    var isLocal = sender._pc === this;\n    if (!isLocal) {\n      throw new DOMException('Sender was not created by this connection.', 'InvalidAccessError');\n    }\n\n    // Search for the native stream the senders track belongs to.\n    this._streams = this._streams || {};\n    var stream = void 0;\n    Object.keys(this._streams).forEach(function (streamid) {\n      var hasTrack = _this15._streams[streamid].getTracks().find(function (track) {\n        return sender.track === track;\n      });\n      if (hasTrack) {\n        stream = _this15._streams[streamid];\n      }\n    });\n\n    if (stream) {\n      if (stream.getTracks().length === 1) {\n        // if this is the last track of the stream, remove the stream. This\n        // takes care of any shimmed _senders.\n        this.removeStream(this._reverseStreams[stream.id]);\n      } else {\n        // relying on the same odd chrome behaviour as above.\n        stream.removeTrack(sender.track);\n      }\n      this.dispatchEvent(new Event('negotiationneeded'));\n    }\n  };\n}\n\nfunction shimPeerConnection(window) {\n  var browserDetails = utils.detectBrowser(window);\n\n  if (!window.RTCPeerConnection && window.webkitRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.webkitRTCPeerConnection;\n  }\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  // shim implicit creation of RTCSessionDescription/RTCIceCandidate\n  if (browserDetails.version < 53) {\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate'].forEach(function (method) {\n      var nativeMethod = window.RTCPeerConnection.prototype[method];\n      var methodObj = _defineProperty({}, method, function () {\n        arguments[0] = new (method === 'addIceCandidate' ? window.RTCIceCandidate : window.RTCSessionDescription)(arguments[0]);\n        return nativeMethod.apply(this, arguments);\n      });\n      window.RTCPeerConnection.prototype[method] = methodObj[method];\n    });\n  }\n\n  // support for addIceCandidate(null or undefined)\n  var nativeAddIceCandidate = window.RTCPeerConnection.prototype.addIceCandidate;\n  window.RTCPeerConnection.prototype.addIceCandidate = function addIceCandidate() {\n    if (!arguments[0]) {\n      if (arguments[1]) {\n        arguments[1].apply(null);\n      }\n      return Promise.resolve();\n    }\n    // Firefox 68+ emits and processes {candidate: \"\", ...}, ignore\n    // in older versions. Native support planned for Chrome M77.\n    if (browserDetails.version < 78 && arguments[0] && arguments[0].candidate === '') {\n      return Promise.resolve();\n    }\n    return nativeAddIceCandidate.apply(this, arguments);\n  };\n}\n\nfunction fixNegotiationNeeded(window) {\n  utils.wrapPeerConnectionEvent(window, 'negotiationneeded', function (e) {\n    var pc = e.target;\n    if (pc.signalingState !== 'stable') {\n      return;\n    }\n    return e;\n  });\n}\n\n},{\"../utils.js\":15,\"./getdisplaymedia\":4,\"./getusermedia\":5}],4:[function(require,module,exports){\n/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.shimGetDisplayMedia = shimGetDisplayMedia;\nfunction shimGetDisplayMedia(window, getSourceId) {\n  if (window.navigator.mediaDevices && 'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  if (!window.navigator.mediaDevices) {\n    return;\n  }\n  // getSourceId is a function that returns a promise resolving with\n  // the sourceId of the screen/window/tab to be shared.\n  if (typeof getSourceId !== 'function') {\n    console.error('shimGetDisplayMedia: getSourceId argument is not ' + 'a function');\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia = function getDisplayMedia(constraints) {\n    return getSourceId(constraints).then(function (sourceId) {\n      var widthSpecified = constraints.video && constraints.video.width;\n      var heightSpecified = constraints.video && constraints.video.height;\n      var frameRateSpecified = constraints.video && constraints.video.frameRate;\n      constraints.video = {\n        mandatory: {\n          chromeMediaSource: 'desktop',\n          chromeMediaSourceId: sourceId,\n          maxFrameRate: frameRateSpecified || 3\n        }\n      };\n      if (widthSpecified) {\n        constraints.video.mandatory.maxWidth = widthSpecified;\n      }\n      if (heightSpecified) {\n        constraints.video.mandatory.maxHeight = heightSpecified;\n      }\n      return window.navigator.mediaDevices.getUserMedia(constraints);\n    });\n  };\n}\n\n},{}],5:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.shimGetUserMedia = shimGetUserMedia;\n\nvar _utils = require('../utils.js');\n\nvar utils = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nvar logging = utils.log;\n\nfunction shimGetUserMedia(window) {\n  var navigator = window && window.navigator;\n\n  if (!navigator.mediaDevices) {\n    return;\n  }\n\n  var browserDetails = utils.detectBrowser(window);\n\n  var constraintsToChrome_ = function constraintsToChrome_(c) {\n    if ((typeof c === 'undefined' ? 'undefined' : _typeof(c)) !== 'object' || c.mandatory || c.optional) {\n      return c;\n    }\n    var cc = {};\n    Object.keys(c).forEach(function (key) {\n      if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n        return;\n      }\n      var r = _typeof(c[key]) === 'object' ? c[key] : { ideal: c[key] };\n      if (r.exact !== undefined && typeof r.exact === 'number') {\n        r.min = r.max = r.exact;\n      }\n      var oldname_ = function oldname_(prefix, name) {\n        if (prefix) {\n          return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n        }\n        return name === 'deviceId' ? 'sourceId' : name;\n      };\n      if (r.ideal !== undefined) {\n        cc.optional = cc.optional || [];\n        var oc = {};\n        if (typeof r.ideal === 'number') {\n          oc[oldname_('min', key)] = r.ideal;\n          cc.optional.push(oc);\n          oc = {};\n          oc[oldname_('max', key)] = r.ideal;\n          cc.optional.push(oc);\n        } else {\n          oc[oldname_('', key)] = r.ideal;\n          cc.optional.push(oc);\n        }\n      }\n      if (r.exact !== undefined && typeof r.exact !== 'number') {\n        cc.mandatory = cc.mandatory || {};\n        cc.mandatory[oldname_('', key)] = r.exact;\n      } else {\n        ['min', 'max'].forEach(function (mix) {\n          if (r[mix] !== undefined) {\n            cc.mandatory = cc.mandatory || {};\n            cc.mandatory[oldname_(mix, key)] = r[mix];\n          }\n        });\n      }\n    });\n    if (c.advanced) {\n      cc.optional = (cc.optional || []).concat(c.advanced);\n    }\n    return cc;\n  };\n\n  var shimConstraints_ = function shimConstraints_(constraints, func) {\n    if (browserDetails.version >= 61) {\n      return func(constraints);\n    }\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (constraints && _typeof(constraints.audio) === 'object') {\n      var remap = function remap(obj, a, b) {\n        if (a in obj && !(b in obj)) {\n          obj[b] = obj[a];\n          delete obj[a];\n        }\n      };\n      constraints = JSON.parse(JSON.stringify(constraints));\n      remap(constraints.audio, 'autoGainControl', 'googAutoGainControl');\n      remap(constraints.audio, 'noiseSuppression', 'googNoiseSuppression');\n      constraints.audio = constraintsToChrome_(constraints.audio);\n    }\n    if (constraints && _typeof(constraints.video) === 'object') {\n      // Shim facingMode for mobile & surface pro.\n      var face = constraints.video.facingMode;\n      face = face && ((typeof face === 'undefined' ? 'undefined' : _typeof(face)) === 'object' ? face : { ideal: face });\n      var getSupportedFacingModeLies = browserDetails.version < 66;\n\n      if (face && (face.exact === 'user' || face.exact === 'environment' || face.ideal === 'user' || face.ideal === 'environment') && !(navigator.mediaDevices.getSupportedConstraints && navigator.mediaDevices.getSupportedConstraints().facingMode && !getSupportedFacingModeLies)) {\n        delete constraints.video.facingMode;\n        var matches = void 0;\n        if (face.exact === 'environment' || face.ideal === 'environment') {\n          matches = ['back', 'rear'];\n        } else if (face.exact === 'user' || face.ideal === 'user') {\n          matches = ['front'];\n        }\n        if (matches) {\n          // Look for matches in label, or use last cam for back (typical).\n          return navigator.mediaDevices.enumerateDevices().then(function (devices) {\n            devices = devices.filter(function (d) {\n              return d.kind === 'videoinput';\n            });\n            var dev = devices.find(function (d) {\n              return matches.some(function (match) {\n                return d.label.toLowerCase().includes(match);\n              });\n            });\n            if (!dev && devices.length && matches.includes('back')) {\n              dev = devices[devices.length - 1]; // more likely the back cam\n            }\n            if (dev) {\n              constraints.video.deviceId = face.exact ? { exact: dev.deviceId } : { ideal: dev.deviceId };\n            }\n            constraints.video = constraintsToChrome_(constraints.video);\n            logging('chrome: ' + JSON.stringify(constraints));\n            return func(constraints);\n          });\n        }\n      }\n      constraints.video = constraintsToChrome_(constraints.video);\n    }\n    logging('chrome: ' + JSON.stringify(constraints));\n    return func(constraints);\n  };\n\n  var shimError_ = function shimError_(e) {\n    if (browserDetails.version >= 64) {\n      return e;\n    }\n    return {\n      name: {\n        PermissionDeniedError: 'NotAllowedError',\n        PermissionDismissedError: 'NotAllowedError',\n        InvalidStateError: 'NotAllowedError',\n        DevicesNotFoundError: 'NotFoundError',\n        ConstraintNotSatisfiedError: 'OverconstrainedError',\n        TrackStartError: 'NotReadableError',\n        MediaDeviceFailedDueToShutdown: 'NotAllowedError',\n        MediaDeviceKillSwitchOn: 'NotAllowedError',\n        TabCaptureError: 'AbortError',\n        ScreenCaptureError: 'AbortError',\n        DeviceCaptureError: 'AbortError'\n      }[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint || e.constraintName,\n      toString: function toString() {\n        return this.name + (this.message && ': ') + this.message;\n      }\n    };\n  };\n\n  var getUserMedia_ = function getUserMedia_(constraints, onSuccess, onError) {\n    shimConstraints_(constraints, function (c) {\n      navigator.webkitGetUserMedia(c, onSuccess, function (e) {\n        if (onError) {\n          onError(shimError_(e));\n        }\n      });\n    });\n  };\n  navigator.getUserMedia = getUserMedia_.bind(navigator);\n\n  // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n  // function which returns a Promise, it does not accept spec-style\n  // constraints.\n  if (navigator.mediaDevices.getUserMedia) {\n    var origGetUserMedia = navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function (cs) {\n      return shimConstraints_(cs, function (c) {\n        return origGetUserMedia(c).then(function (stream) {\n          if (c.audio && !stream.getAudioTracks().length || c.video && !stream.getVideoTracks().length) {\n            stream.getTracks().forEach(function (track) {\n              track.stop();\n            });\n            throw new DOMException('', 'NotFoundError');\n          }\n          return stream;\n        }, function (e) {\n          return Promise.reject(shimError_(e));\n        });\n      });\n    };\n  }\n}\n\n},{\"../utils.js\":15}],6:[function(require,module,exports){\n/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.shimRTCIceCandidate = shimRTCIceCandidate;\nexports.shimMaxMessageSize = shimMaxMessageSize;\nexports.shimSendThrowTypeError = shimSendThrowTypeError;\nexports.shimConnectionState = shimConnectionState;\nexports.removeAllowExtmapMixed = removeAllowExtmapMixed;\n\nvar _sdp = require('sdp');\n\nvar _sdp2 = _interopRequireDefault(_sdp);\n\nvar _utils = require('./utils');\n\nvar utils = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction shimRTCIceCandidate(window) {\n  // foundation is arbitrarily chosen as an indicator for full support for\n  // https://w3c.github.io/webrtc-pc/#rtcicecandidate-interface\n  if (!window.RTCIceCandidate || window.RTCIceCandidate && 'foundation' in window.RTCIceCandidate.prototype) {\n    return;\n  }\n\n  var NativeRTCIceCandidate = window.RTCIceCandidate;\n  window.RTCIceCandidate = function RTCIceCandidate(args) {\n    // Remove the a= which shouldn't be part of the candidate string.\n    if ((typeof args === 'undefined' ? 'undefined' : _typeof(args)) === 'object' && args.candidate && args.candidate.indexOf('a=') === 0) {\n      args = JSON.parse(JSON.stringify(args));\n      args.candidate = args.candidate.substr(2);\n    }\n\n    if (args.candidate && args.candidate.length) {\n      // Augment the native candidate with the parsed fields.\n      var nativeCandidate = new NativeRTCIceCandidate(args);\n      var parsedCandidate = _sdp2.default.parseCandidate(args.candidate);\n      var augmentedCandidate = Object.assign(nativeCandidate, parsedCandidate);\n\n      // Add a serializer that does not serialize the extra attributes.\n      augmentedCandidate.toJSON = function toJSON() {\n        return {\n          candidate: augmentedCandidate.candidate,\n          sdpMid: augmentedCandidate.sdpMid,\n          sdpMLineIndex: augmentedCandidate.sdpMLineIndex,\n          usernameFragment: augmentedCandidate.usernameFragment\n        };\n      };\n      return augmentedCandidate;\n    }\n    return new NativeRTCIceCandidate(args);\n  };\n  window.RTCIceCandidate.prototype = NativeRTCIceCandidate.prototype;\n\n  // Hook up the augmented candidate in onicecandidate and\n  // addEventListener('icecandidate', ...)\n  utils.wrapPeerConnectionEvent(window, 'icecandidate', function (e) {\n    if (e.candidate) {\n      Object.defineProperty(e, 'candidate', {\n        value: new window.RTCIceCandidate(e.candidate),\n        writable: 'false'\n      });\n    }\n    return e;\n  });\n}\n\nfunction shimMaxMessageSize(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  var browserDetails = utils.detectBrowser(window);\n\n  if (!('sctp' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'sctp', {\n      get: function get() {\n        return typeof this._sctp === 'undefined' ? null : this._sctp;\n      }\n    });\n  }\n\n  var sctpInDescription = function sctpInDescription(description) {\n    if (!description || !description.sdp) {\n      return false;\n    }\n    var sections = _sdp2.default.splitSections(description.sdp);\n    sections.shift();\n    return sections.some(function (mediaSection) {\n      var mLine = _sdp2.default.parseMLine(mediaSection);\n      return mLine && mLine.kind === 'application' && mLine.protocol.indexOf('SCTP') !== -1;\n    });\n  };\n\n  var getRemoteFirefoxVersion = function getRemoteFirefoxVersion(description) {\n    // TODO: Is there a better solution for detecting Firefox?\n    var match = description.sdp.match(/mozilla...THIS_IS_SDPARTA-(\\d+)/);\n    if (match === null || match.length < 2) {\n      return -1;\n    }\n    var version = parseInt(match[1], 10);\n    // Test for NaN (yes, this is ugly)\n    return version !== version ? -1 : version;\n  };\n\n  var getCanSendMaxMessageSize = function getCanSendMaxMessageSize(remoteIsFirefox) {\n    // Every implementation we know can send at least 64 KiB.\n    // Note: Although Chrome is technically able to send up to 256 KiB, the\n    //       data does not reach the other peer reliably.\n    //       See: https://bugs.chromium.org/p/webrtc/issues/detail?id=8419\n    var canSendMaxMessageSize = 65536;\n    if (browserDetails.browser === 'firefox') {\n      if (browserDetails.version < 57) {\n        if (remoteIsFirefox === -1) {\n          // FF < 57 will send in 16 KiB chunks using the deprecated PPID\n          // fragmentation.\n          canSendMaxMessageSize = 16384;\n        } else {\n          // However, other FF (and RAWRTC) can reassemble PPID-fragmented\n          // messages. Thus, supporting ~2 GiB when sending.\n          canSendMaxMessageSize = 2147483637;\n        }\n      } else if (browserDetails.version < 60) {\n        // Currently, all FF >= 57 will reset the remote maximum message size\n        // to the default value when a data channel is created at a later\n        // stage. :(\n        // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n        canSendMaxMessageSize = browserDetails.version === 57 ? 65535 : 65536;\n      } else {\n        // FF >= 60 supports sending ~2 GiB\n        canSendMaxMessageSize = 2147483637;\n      }\n    }\n    return canSendMaxMessageSize;\n  };\n\n  var getMaxMessageSize = function getMaxMessageSize(description, remoteIsFirefox) {\n    // Note: 65536 bytes is the default value from the SDP spec. Also,\n    //       every implementation we know supports receiving 65536 bytes.\n    var maxMessageSize = 65536;\n\n    // FF 57 has a slightly incorrect default remote max message size, so\n    // we need to adjust it here to avoid a failure when sending.\n    // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1425697\n    if (browserDetails.browser === 'firefox' && browserDetails.version === 57) {\n      maxMessageSize = 65535;\n    }\n\n    var match = _sdp2.default.matchPrefix(description.sdp, 'a=max-message-size:');\n    if (match.length > 0) {\n      maxMessageSize = parseInt(match[0].substr(19), 10);\n    } else if (browserDetails.browser === 'firefox' && remoteIsFirefox !== -1) {\n      // If the maximum message size is not present in the remote SDP and\n      // both local and remote are Firefox, the remote peer can receive\n      // ~2 GiB.\n      maxMessageSize = 2147483637;\n    }\n    return maxMessageSize;\n  };\n\n  var origSetRemoteDescription = window.RTCPeerConnection.prototype.setRemoteDescription;\n  window.RTCPeerConnection.prototype.setRemoteDescription = function setRemoteDescription() {\n    this._sctp = null;\n    // Chrome decided to not expose .sctp in plan-b mode.\n    // As usual, adapter.js has to do an 'ugly worakaround'\n    // to cover up the mess.\n    if (browserDetails.browser === 'chrome' && browserDetails.version >= 76) {\n      var _getConfiguration = this.getConfiguration(),\n          sdpSemantics = _getConfiguration.sdpSemantics;\n\n      if (sdpSemantics === 'plan-b') {\n        Object.defineProperty(this, 'sctp', {\n          get: function get() {\n            return typeof this._sctp === 'undefined' ? null : this._sctp;\n          },\n\n          enumerable: true,\n          configurable: true\n        });\n      }\n    }\n\n    if (sctpInDescription(arguments[0])) {\n      // Check if the remote is FF.\n      var isFirefox = getRemoteFirefoxVersion(arguments[0]);\n\n      // Get the maximum message size the local peer is capable of sending\n      var canSendMMS = getCanSendMaxMessageSize(isFirefox);\n\n      // Get the maximum message size of the remote peer.\n      var remoteMMS = getMaxMessageSize(arguments[0], isFirefox);\n\n      // Determine final maximum message size\n      var maxMessageSize = void 0;\n      if (canSendMMS === 0 && remoteMMS === 0) {\n        maxMessageSize = Number.POSITIVE_INFINITY;\n      } else if (canSendMMS === 0 || remoteMMS === 0) {\n        maxMessageSize = Math.max(canSendMMS, remoteMMS);\n      } else {\n        maxMessageSize = Math.min(canSendMMS, remoteMMS);\n      }\n\n      // Create a dummy RTCSctpTransport object and the 'maxMessageSize'\n      // attribute.\n      var sctp = {};\n      Object.defineProperty(sctp, 'maxMessageSize', {\n        get: function get() {\n          return maxMessageSize;\n        }\n      });\n      this._sctp = sctp;\n    }\n\n    return origSetRemoteDescription.apply(this, arguments);\n  };\n}\n\nfunction shimSendThrowTypeError(window) {\n  if (!(window.RTCPeerConnection && 'createDataChannel' in window.RTCPeerConnection.prototype)) {\n    return;\n  }\n\n  // Note: Although Firefox >= 57 has a native implementation, the maximum\n  //       message size can be reset for all data channels at a later stage.\n  //       See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n\n  function wrapDcSend(dc, pc) {\n    var origDataChannelSend = dc.send;\n    dc.send = function send() {\n      var data = arguments[0];\n      var length = data.length || data.size || data.byteLength;\n      if (dc.readyState === 'open' && pc.sctp && length > pc.sctp.maxMessageSize) {\n        throw new TypeError('Message too large (can send a maximum of ' + pc.sctp.maxMessageSize + ' bytes)');\n      }\n      return origDataChannelSend.apply(dc, arguments);\n    };\n  }\n  var origCreateDataChannel = window.RTCPeerConnection.prototype.createDataChannel;\n  window.RTCPeerConnection.prototype.createDataChannel = function createDataChannel() {\n    var dataChannel = origCreateDataChannel.apply(this, arguments);\n    wrapDcSend(dataChannel, this);\n    return dataChannel;\n  };\n  utils.wrapPeerConnectionEvent(window, 'datachannel', function (e) {\n    wrapDcSend(e.channel, e.target);\n    return e;\n  });\n}\n\n/* shims RTCConnectionState by pretending it is the same as iceConnectionState.\n * See https://bugs.chromium.org/p/webrtc/issues/detail?id=6145#c12\n * for why this is a valid hack in Chrome. In Firefox it is slightly incorrect\n * since DTLS failures would be hidden. See\n * https://bugzilla.mozilla.org/show_bug.cgi?id=1265827\n * for the Firefox tracking bug.\n */\nfunction shimConnectionState(window) {\n  if (!window.RTCPeerConnection || 'connectionState' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n  var proto = window.RTCPeerConnection.prototype;\n  Object.defineProperty(proto, 'connectionState', {\n    get: function get() {\n      return {\n        completed: 'connected',\n        checking: 'connecting'\n      }[this.iceConnectionState] || this.iceConnectionState;\n    },\n\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(proto, 'onconnectionstatechange', {\n    get: function get() {\n      return this._onconnectionstatechange || null;\n    },\n    set: function set(cb) {\n      if (this._onconnectionstatechange) {\n        this.removeEventListener('connectionstatechange', this._onconnectionstatechange);\n        delete this._onconnectionstatechange;\n      }\n      if (cb) {\n        this.addEventListener('connectionstatechange', this._onconnectionstatechange = cb);\n      }\n    },\n\n    enumerable: true,\n    configurable: true\n  });\n\n  ['setLocalDescription', 'setRemoteDescription'].forEach(function (method) {\n    var origMethod = proto[method];\n    proto[method] = function () {\n      if (!this._connectionstatechangepoly) {\n        this._connectionstatechangepoly = function (e) {\n          var pc = e.target;\n          if (pc._lastConnectionState !== pc.connectionState) {\n            pc._lastConnectionState = pc.connectionState;\n            var newEvent = new Event('connectionstatechange', e);\n            pc.dispatchEvent(newEvent);\n          }\n          return e;\n        };\n        this.addEventListener('iceconnectionstatechange', this._connectionstatechangepoly);\n      }\n      return origMethod.apply(this, arguments);\n    };\n  });\n}\n\nfunction removeAllowExtmapMixed(window) {\n  /* remove a=extmap-allow-mixed for Chrome < M71 */\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  var browserDetails = utils.detectBrowser(window);\n  if (browserDetails.browser === 'chrome' && browserDetails.version >= 71) {\n    return;\n  }\n  var nativeSRD = window.RTCPeerConnection.prototype.setRemoteDescription;\n  window.RTCPeerConnection.prototype.setRemoteDescription = function setRemoteDescription(desc) {\n    if (desc && desc.sdp && desc.sdp.indexOf('\\na=extmap-allow-mixed') !== -1) {\n      desc.sdp = desc.sdp.split('\\n').filter(function (line) {\n        return line.trim() !== 'a=extmap-allow-mixed';\n      }).join('\\n');\n    }\n    return nativeSRD.apply(this, arguments);\n  };\n}\n\n},{\"./utils\":15,\"sdp\":17}],7:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.shimGetDisplayMedia = exports.shimGetUserMedia = undefined;\n\nvar _getusermedia = require('./getusermedia');\n\nObject.defineProperty(exports, 'shimGetUserMedia', {\n  enumerable: true,\n  get: function get() {\n    return _getusermedia.shimGetUserMedia;\n  }\n});\n\nvar _getdisplaymedia = require('./getdisplaymedia');\n\nObject.defineProperty(exports, 'shimGetDisplayMedia', {\n  enumerable: true,\n  get: function get() {\n    return _getdisplaymedia.shimGetDisplayMedia;\n  }\n});\nexports.shimPeerConnection = shimPeerConnection;\nexports.shimReplaceTrack = shimReplaceTrack;\n\nvar _utils = require('../utils');\n\nvar utils = _interopRequireWildcard(_utils);\n\nvar _filtericeservers = require('./filtericeservers');\n\nvar _rtcpeerconnectionShim = require('rtcpeerconnection-shim');\n\nvar _rtcpeerconnectionShim2 = _interopRequireDefault(_rtcpeerconnectionShim);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction shimPeerConnection(window) {\n  var browserDetails = utils.detectBrowser(window);\n\n  if (window.RTCIceGatherer) {\n    if (!window.RTCIceCandidate) {\n      window.RTCIceCandidate = function RTCIceCandidate(args) {\n        return args;\n      };\n    }\n    if (!window.RTCSessionDescription) {\n      window.RTCSessionDescription = function RTCSessionDescription(args) {\n        return args;\n      };\n    }\n    // this adds an additional event listener to MediaStrackTrack that signals\n    // when a tracks enabled property was changed. Workaround for a bug in\n    // addStream, see below. No longer required in 15025+\n    if (browserDetails.version < 15025) {\n      var origMSTEnabled = Object.getOwnPropertyDescriptor(window.MediaStreamTrack.prototype, 'enabled');\n      Object.defineProperty(window.MediaStreamTrack.prototype, 'enabled', {\n        set: function set(value) {\n          origMSTEnabled.set.call(this, value);\n          var ev = new Event('enabled');\n          ev.enabled = value;\n          this.dispatchEvent(ev);\n        }\n      });\n    }\n  }\n\n  // ORTC defines the DTMF sender a bit different.\n  // https://github.com/w3c/ortc/issues/714\n  if (window.RTCRtpSender && !('dtmf' in window.RTCRtpSender.prototype)) {\n    Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n      get: function get() {\n        if (this._dtmf === undefined) {\n          if (this.track.kind === 'audio') {\n            this._dtmf = new window.RTCDtmfSender(this);\n          } else if (this.track.kind === 'video') {\n            this._dtmf = null;\n          }\n        }\n        return this._dtmf;\n      }\n    });\n  }\n  // Edge currently only implements the RTCDtmfSender, not the\n  // RTCDTMFSender alias. See http://draft.ortc.org/#rtcdtmfsender2*\n  if (window.RTCDtmfSender && !window.RTCDTMFSender) {\n    window.RTCDTMFSender = window.RTCDtmfSender;\n  }\n\n  var RTCPeerConnectionShim = (0, _rtcpeerconnectionShim2.default)(window, browserDetails.version);\n  window.RTCPeerConnection = function RTCPeerConnection(config) {\n    if (config && config.iceServers) {\n      config.iceServers = (0, _filtericeservers.filterIceServers)(config.iceServers, browserDetails.version);\n      utils.log('ICE servers after filtering:', config.iceServers);\n    }\n    return new RTCPeerConnectionShim(config);\n  };\n  window.RTCPeerConnection.prototype = RTCPeerConnectionShim.prototype;\n}\n\nfunction shimReplaceTrack(window) {\n  // ORTC has replaceTrack -- https://github.com/w3c/ortc/issues/614\n  if (window.RTCRtpSender && !('replaceTrack' in window.RTCRtpSender.prototype)) {\n    window.RTCRtpSender.prototype.replaceTrack = window.RTCRtpSender.prototype.setTrack;\n  }\n}\n\n},{\"../utils\":15,\"./filtericeservers\":8,\"./getdisplaymedia\":9,\"./getusermedia\":10,\"rtcpeerconnection-shim\":16}],8:[function(require,module,exports){\n/*\n *  Copyright (c) 2018 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.filterIceServers = filterIceServers;\n\nvar _utils = require('../utils');\n\nvar utils = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n// Edge does not like\n// 1) stun: filtered after 14393 unless ?transport=udp is present\n// 2) turn: that does not have all of turn:host:port?transport=udp\n// 3) turn: with ipv6 addresses\n// 4) turn: occurring muliple times\nfunction filterIceServers(iceServers, edgeVersion) {\n  var hasTurn = false;\n  iceServers = JSON.parse(JSON.stringify(iceServers));\n  return iceServers.filter(function (server) {\n    if (server && (server.urls || server.url)) {\n      var urls = server.urls || server.url;\n      if (server.url && !server.urls) {\n        utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n      }\n      var isString = typeof urls === 'string';\n      if (isString) {\n        urls = [urls];\n      }\n      urls = urls.filter(function (url) {\n        // filter STUN unconditionally.\n        if (url.indexOf('stun:') === 0) {\n          return false;\n        }\n\n        var validTurn = url.startsWith('turn') && !url.startsWith('turn:[') && url.includes('transport=udp');\n        if (validTurn && !hasTurn) {\n          hasTurn = true;\n          return true;\n        }\n        return validTurn && !hasTurn;\n      });\n\n      delete server.url;\n      server.urls = isString ? urls[0] : urls;\n      return !!urls.length;\n    }\n  });\n}\n\n},{\"../utils\":15}],9:[function(require,module,exports){\n/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.shimGetDisplayMedia = shimGetDisplayMedia;\nfunction shimGetDisplayMedia(window) {\n  if (!('getDisplayMedia' in window.navigator)) {\n    return;\n  }\n  if (!window.navigator.mediaDevices) {\n    return;\n  }\n  if (window.navigator.mediaDevices && 'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia = window.navigator.getDisplayMedia.bind(window.navigator);\n}\n\n},{}],10:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.shimGetUserMedia = shimGetUserMedia;\nfunction shimGetUserMedia(window) {\n  var navigator = window && window.navigator;\n\n  var shimError_ = function shimError_(e) {\n    return {\n      name: { PermissionDeniedError: 'NotAllowedError' }[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint,\n      toString: function toString() {\n        return this.name;\n      }\n    };\n  };\n\n  // getUserMedia error shim.\n  var origGetUserMedia = navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);\n  navigator.mediaDevices.getUserMedia = function (c) {\n    return origGetUserMedia(c).catch(function (e) {\n      return Promise.reject(shimError_(e));\n    });\n  };\n}\n\n},{}],11:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.shimGetDisplayMedia = exports.shimGetUserMedia = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _getusermedia = require('./getusermedia');\n\nObject.defineProperty(exports, 'shimGetUserMedia', {\n  enumerable: true,\n  get: function get() {\n    return _getusermedia.shimGetUserMedia;\n  }\n});\n\nvar _getdisplaymedia = require('./getdisplaymedia');\n\nObject.defineProperty(exports, 'shimGetDisplayMedia', {\n  enumerable: true,\n  get: function get() {\n    return _getdisplaymedia.shimGetDisplayMedia;\n  }\n});\nexports.shimOnTrack = shimOnTrack;\nexports.shimPeerConnection = shimPeerConnection;\nexports.shimSenderGetStats = shimSenderGetStats;\nexports.shimReceiverGetStats = shimReceiverGetStats;\nexports.shimRemoveStream = shimRemoveStream;\nexports.shimRTCDataChannel = shimRTCDataChannel;\nexports.shimAddTransceiver = shimAddTransceiver;\nexports.shimCreateOffer = shimCreateOffer;\nexports.shimCreateAnswer = shimCreateAnswer;\n\nvar _utils = require('../utils');\n\nvar utils = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction shimOnTrack(window) {\n  if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCTrackEvent && 'receiver' in window.RTCTrackEvent.prototype && !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get: function get() {\n        return { receiver: this.receiver };\n      }\n    });\n  }\n}\n\nfunction shimPeerConnection(window) {\n  var browserDetails = utils.detectBrowser(window);\n\n  if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) !== 'object' || !(window.RTCPeerConnection || window.mozRTCPeerConnection)) {\n    return; // probably media.peerconnection.enabled=false in about:config\n  }\n  if (!window.RTCPeerConnection && window.mozRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.mozRTCPeerConnection;\n  }\n\n  if (browserDetails.version < 53) {\n    // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate'].forEach(function (method) {\n      var nativeMethod = window.RTCPeerConnection.prototype[method];\n      var methodObj = _defineProperty({}, method, function () {\n        arguments[0] = new (method === 'addIceCandidate' ? window.RTCIceCandidate : window.RTCSessionDescription)(arguments[0]);\n        return nativeMethod.apply(this, arguments);\n      });\n      window.RTCPeerConnection.prototype[method] = methodObj[method];\n    });\n  }\n\n  // support for addIceCandidate(null or undefined)\n  // as well as ignoring {sdpMid, candidate: \"\"}\n  if (browserDetails.version < 68) {\n    var nativeAddIceCandidate = window.RTCPeerConnection.prototype.addIceCandidate;\n    window.RTCPeerConnection.prototype.addIceCandidate = function addIceCandidate() {\n      if (!arguments[0]) {\n        if (arguments[1]) {\n          arguments[1].apply(null);\n        }\n        return Promise.resolve();\n      }\n      // Firefox 68+ emits and processes {candidate: \"\", ...}, ignore\n      // in older versions.\n      if (arguments[0] && arguments[0].candidate === '') {\n        return Promise.resolve();\n      }\n      return nativeAddIceCandidate.apply(this, arguments);\n    };\n  }\n\n  var modernStatsTypes = {\n    inboundrtp: 'inbound-rtp',\n    outboundrtp: 'outbound-rtp',\n    candidatepair: 'candidate-pair',\n    localcandidate: 'local-candidate',\n    remotecandidate: 'remote-candidate'\n  };\n\n  var nativeGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    var _arguments = Array.prototype.slice.call(arguments),\n        selector = _arguments[0],\n        onSucc = _arguments[1],\n        onErr = _arguments[2];\n\n    return nativeGetStats.apply(this, [selector || null]).then(function (stats) {\n      if (browserDetails.version < 53 && !onSucc) {\n        // Shim only promise getStats with spec-hyphens in type names\n        // Leave callback version alone; misc old uses of forEach before Map\n        try {\n          stats.forEach(function (stat) {\n            stat.type = modernStatsTypes[stat.type] || stat.type;\n          });\n        } catch (e) {\n          if (e.name !== 'TypeError') {\n            throw e;\n          }\n          // Avoid TypeError: \"type\" is read-only, in old versions. 34-43ish\n          stats.forEach(function (stat, i) {\n            stats.set(i, Object.assign({}, stat, {\n              type: modernStatsTypes[stat.type] || stat.type\n            }));\n          });\n        }\n      }\n      return stats;\n    }).then(onSucc, onErr);\n  };\n}\n\nfunction shimSenderGetStats(window) {\n  if (!((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection && window.RTCRtpSender)) {\n    return;\n  }\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpSender.prototype) {\n    return;\n  }\n  var origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n  if (origGetSenders) {\n    window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n      var _this = this;\n\n      var senders = origGetSenders.apply(this, []);\n      senders.forEach(function (sender) {\n        return sender._pc = _this;\n      });\n      return senders;\n    };\n  }\n\n  var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n  if (origAddTrack) {\n    window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n      var sender = origAddTrack.apply(this, arguments);\n      sender._pc = this;\n      return sender;\n    };\n  }\n  window.RTCRtpSender.prototype.getStats = function getStats() {\n    return this.track ? this._pc.getStats(this.track) : Promise.resolve(new Map());\n  };\n}\n\nfunction shimReceiverGetStats(window) {\n  if (!((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection && window.RTCRtpSender)) {\n    return;\n  }\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpReceiver.prototype) {\n    return;\n  }\n  var origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n  if (origGetReceivers) {\n    window.RTCPeerConnection.prototype.getReceivers = function getReceivers() {\n      var _this2 = this;\n\n      var receivers = origGetReceivers.apply(this, []);\n      receivers.forEach(function (receiver) {\n        return receiver._pc = _this2;\n      });\n      return receivers;\n    };\n  }\n  utils.wrapPeerConnectionEvent(window, 'track', function (e) {\n    e.receiver._pc = e.srcElement;\n    return e;\n  });\n  window.RTCRtpReceiver.prototype.getStats = function getStats() {\n    return this._pc.getStats(this.track);\n  };\n}\n\nfunction shimRemoveStream(window) {\n  if (!window.RTCPeerConnection || 'removeStream' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n  window.RTCPeerConnection.prototype.removeStream = function removeStream(stream) {\n    var _this3 = this;\n\n    utils.deprecated('removeStream', 'removeTrack');\n    this.getSenders().forEach(function (sender) {\n      if (sender.track && stream.getTracks().includes(sender.track)) {\n        _this3.removeTrack(sender);\n      }\n    });\n  };\n}\n\nfunction shimRTCDataChannel(window) {\n  // rename DataChannel to RTCDataChannel (native fix in FF60):\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1173851\n  if (window.DataChannel && !window.RTCDataChannel) {\n    window.RTCDataChannel = window.DataChannel;\n  }\n}\n\nfunction shimAddTransceiver(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  var origAddTransceiver = window.RTCPeerConnection.prototype.addTransceiver;\n  if (origAddTransceiver) {\n    window.RTCPeerConnection.prototype.addTransceiver = function addTransceiver() {\n      this.setParametersPromises = [];\n      var initParameters = arguments[1];\n      var shouldPerformCheck = initParameters && 'sendEncodings' in initParameters;\n      if (shouldPerformCheck) {\n        // If sendEncodings params are provided, validate grammar\n        initParameters.sendEncodings.forEach(function (encodingParam) {\n          if ('rid' in encodingParam) {\n            var ridRegex = /^[a-z0-9]{0,16}$/i;\n            if (!ridRegex.test(encodingParam.rid)) {\n              throw new TypeError('Invalid RID value provided.');\n            }\n          }\n          if ('scaleResolutionDownBy' in encodingParam) {\n            if (!(parseFloat(encodingParam.scaleResolutionDownBy) >= 1.0)) {\n              throw new RangeError('scale_resolution_down_by must be >= 1.0');\n            }\n          }\n          if ('maxFramerate' in encodingParam) {\n            if (!(parseFloat(encodingParam.maxFramerate) >= 0)) {\n              throw new RangeError('max_framerate must be >= 0.0');\n            }\n          }\n        });\n      }\n      var transceiver = origAddTransceiver.apply(this, arguments);\n      if (shouldPerformCheck) {\n        // Check if the init options were applied. If not we do this in an\n        // asynchronous way and save the promise reference in a global object.\n        // This is an ugly hack, but at the same time is way more robust than\n        // checking the sender parameters before and after the createOffer\n        // Also note that after the createoffer we are not 100% sure that\n        // the params were asynchronously applied so we might miss the\n        // opportunity to recreate offer.\n        var sender = transceiver.sender;\n\n        var params = sender.getParameters();\n        if (!('encodings' in params)) {\n          params.encodings = initParameters.sendEncodings;\n          this.setParametersPromises.push(sender.setParameters(params).catch(function () {}));\n        }\n      }\n      return transceiver;\n    };\n  }\n}\n\nfunction shimCreateOffer(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  var origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n  window.RTCPeerConnection.prototype.createOffer = function createOffer() {\n    var _this4 = this,\n        _arguments2 = arguments;\n\n    if (this.setParametersPromises && this.setParametersPromises.length) {\n      return Promise.all(this.setParametersPromises).then(function () {\n        return origCreateOffer.apply(_this4, _arguments2);\n      }).finally(function () {\n        _this4.setParametersPromises = [];\n      });\n    }\n    return origCreateOffer.apply(this, arguments);\n  };\n}\n\nfunction shimCreateAnswer(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  var origCreateAnswer = window.RTCPeerConnection.prototype.createAnswer;\n  window.RTCPeerConnection.prototype.createAnswer = function createAnswer() {\n    var _this5 = this,\n        _arguments3 = arguments;\n\n    if (this.setParametersPromises && this.setParametersPromises.length) {\n      return Promise.all(this.setParametersPromises).then(function () {\n        return origCreateAnswer.apply(_this5, _arguments3);\n      }).finally(function () {\n        _this5.setParametersPromises = [];\n      });\n    }\n    return origCreateAnswer.apply(this, arguments);\n  };\n}\n\n},{\"../utils\":15,\"./getdisplaymedia\":12,\"./getusermedia\":13}],12:[function(require,module,exports){\n/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.shimGetDisplayMedia = shimGetDisplayMedia;\nfunction shimGetDisplayMedia(window, preferredMediaSource) {\n  if (window.navigator.mediaDevices && 'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  if (!window.navigator.mediaDevices) {\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia = function getDisplayMedia(constraints) {\n    if (!(constraints && constraints.video)) {\n      var err = new DOMException('getDisplayMedia without video ' + 'constraints is undefined');\n      err.name = 'NotFoundError';\n      // from https://heycam.github.io/webidl/#idl-DOMException-error-names\n      err.code = 8;\n      return Promise.reject(err);\n    }\n    if (constraints.video === true) {\n      constraints.video = { mediaSource: preferredMediaSource };\n    } else {\n      constraints.video.mediaSource = preferredMediaSource;\n    }\n    return window.navigator.mediaDevices.getUserMedia(constraints);\n  };\n}\n\n},{}],13:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.shimGetUserMedia = shimGetUserMedia;\n\nvar _utils = require('../utils');\n\nvar utils = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction shimGetUserMedia(window) {\n  var browserDetails = utils.detectBrowser(window);\n  var navigator = window && window.navigator;\n  var MediaStreamTrack = window && window.MediaStreamTrack;\n\n  navigator.getUserMedia = function (constraints, onSuccess, onError) {\n    // Replace Firefox 44+'s deprecation warning with unprefixed version.\n    utils.deprecated('navigator.getUserMedia', 'navigator.mediaDevices.getUserMedia');\n    navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\n  };\n\n  if (!(browserDetails.version > 55 && 'autoGainControl' in navigator.mediaDevices.getSupportedConstraints())) {\n    var remap = function remap(obj, a, b) {\n      if (a in obj && !(b in obj)) {\n        obj[b] = obj[a];\n        delete obj[a];\n      }\n    };\n\n    var nativeGetUserMedia = navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function (c) {\n      if ((typeof c === 'undefined' ? 'undefined' : _typeof(c)) === 'object' && _typeof(c.audio) === 'object') {\n        c = JSON.parse(JSON.stringify(c));\n        remap(c.audio, 'autoGainControl', 'mozAutoGainControl');\n        remap(c.audio, 'noiseSuppression', 'mozNoiseSuppression');\n      }\n      return nativeGetUserMedia(c);\n    };\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.getSettings) {\n      var nativeGetSettings = MediaStreamTrack.prototype.getSettings;\n      MediaStreamTrack.prototype.getSettings = function () {\n        var obj = nativeGetSettings.apply(this, arguments);\n        remap(obj, 'mozAutoGainControl', 'autoGainControl');\n        remap(obj, 'mozNoiseSuppression', 'noiseSuppression');\n        return obj;\n      };\n    }\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.applyConstraints) {\n      var nativeApplyConstraints = MediaStreamTrack.prototype.applyConstraints;\n      MediaStreamTrack.prototype.applyConstraints = function (c) {\n        if (this.kind === 'audio' && (typeof c === 'undefined' ? 'undefined' : _typeof(c)) === 'object') {\n          c = JSON.parse(JSON.stringify(c));\n          remap(c, 'autoGainControl', 'mozAutoGainControl');\n          remap(c, 'noiseSuppression', 'mozNoiseSuppression');\n        }\n        return nativeApplyConstraints.apply(this, [c]);\n      };\n    }\n  }\n}\n\n},{\"../utils\":15}],14:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.shimLocalStreamsAPI = shimLocalStreamsAPI;\nexports.shimRemoteStreamsAPI = shimRemoteStreamsAPI;\nexports.shimCallbacksAPI = shimCallbacksAPI;\nexports.shimGetUserMedia = shimGetUserMedia;\nexports.shimConstraints = shimConstraints;\nexports.shimRTCIceServerUrls = shimRTCIceServerUrls;\nexports.shimTrackEventTransceiver = shimTrackEventTransceiver;\nexports.shimCreateOfferLegacy = shimCreateOfferLegacy;\n\nvar _utils = require('../utils');\n\nvar utils = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction shimLocalStreamsAPI(window) {\n  if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getLocalStreams = function getLocalStreams() {\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n      return this._localStreams;\n    };\n  }\n  if (!('addStream' in window.RTCPeerConnection.prototype)) {\n    var _addTrack = window.RTCPeerConnection.prototype.addTrack;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      var _this = this;\n\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n      if (!this._localStreams.includes(stream)) {\n        this._localStreams.push(stream);\n      }\n      // Try to emulate Chrome's behaviour of adding in audio-video order.\n      // Safari orders by track id.\n      stream.getAudioTracks().forEach(function (track) {\n        return _addTrack.call(_this, track, stream);\n      });\n      stream.getVideoTracks().forEach(function (track) {\n        return _addTrack.call(_this, track, stream);\n      });\n    };\n\n    window.RTCPeerConnection.prototype.addTrack = function addTrack(track) {\n      var stream = arguments[1];\n      if (stream) {\n        if (!this._localStreams) {\n          this._localStreams = [stream];\n        } else if (!this._localStreams.includes(stream)) {\n          this._localStreams.push(stream);\n        }\n      }\n      return _addTrack.apply(this, arguments);\n    };\n  }\n  if (!('removeStream' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.removeStream = function removeStream(stream) {\n      var _this2 = this;\n\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n      var index = this._localStreams.indexOf(stream);\n      if (index === -1) {\n        return;\n      }\n      this._localStreams.splice(index, 1);\n      var tracks = stream.getTracks();\n      this.getSenders().forEach(function (sender) {\n        if (tracks.includes(sender.track)) {\n          _this2.removeTrack(sender);\n        }\n      });\n    };\n  }\n}\n\nfunction shimRemoteStreamsAPI(window) {\n  if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getRemoteStreams = function getRemoteStreams() {\n      return this._remoteStreams ? this._remoteStreams : [];\n    };\n  }\n  if (!('onaddstream' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\n      get: function get() {\n        return this._onaddstream;\n      },\n      set: function set(f) {\n        var _this3 = this;\n\n        if (this._onaddstream) {\n          this.removeEventListener('addstream', this._onaddstream);\n          this.removeEventListener('track', this._onaddstreampoly);\n        }\n        this.addEventListener('addstream', this._onaddstream = f);\n        this.addEventListener('track', this._onaddstreampoly = function (e) {\n          e.streams.forEach(function (stream) {\n            if (!_this3._remoteStreams) {\n              _this3._remoteStreams = [];\n            }\n            if (_this3._remoteStreams.includes(stream)) {\n              return;\n            }\n            _this3._remoteStreams.push(stream);\n            var event = new Event('addstream');\n            event.stream = stream;\n            _this3.dispatchEvent(event);\n          });\n        });\n      }\n    });\n    var origSetRemoteDescription = window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription = function setRemoteDescription() {\n      var pc = this;\n      if (!this._onaddstreampoly) {\n        this.addEventListener('track', this._onaddstreampoly = function (e) {\n          e.streams.forEach(function (stream) {\n            if (!pc._remoteStreams) {\n              pc._remoteStreams = [];\n            }\n            if (pc._remoteStreams.indexOf(stream) >= 0) {\n              return;\n            }\n            pc._remoteStreams.push(stream);\n            var event = new Event('addstream');\n            event.stream = stream;\n            pc.dispatchEvent(event);\n          });\n        });\n      }\n      return origSetRemoteDescription.apply(pc, arguments);\n    };\n  }\n}\n\nfunction shimCallbacksAPI(window) {\n  if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  var prototype = window.RTCPeerConnection.prototype;\n  var origCreateOffer = prototype.createOffer;\n  var origCreateAnswer = prototype.createAnswer;\n  var setLocalDescription = prototype.setLocalDescription;\n  var setRemoteDescription = prototype.setRemoteDescription;\n  var addIceCandidate = prototype.addIceCandidate;\n\n  prototype.createOffer = function createOffer(successCallback, failureCallback) {\n    var options = arguments.length >= 2 ? arguments[2] : arguments[0];\n    var promise = origCreateOffer.apply(this, [options]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n\n  prototype.createAnswer = function createAnswer(successCallback, failureCallback) {\n    var options = arguments.length >= 2 ? arguments[2] : arguments[0];\n    var promise = origCreateAnswer.apply(this, [options]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n\n  var withCallback = function withCallback(description, successCallback, failureCallback) {\n    var promise = setLocalDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setLocalDescription = withCallback;\n\n  withCallback = function withCallback(description, successCallback, failureCallback) {\n    var promise = setRemoteDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setRemoteDescription = withCallback;\n\n  withCallback = function withCallback(candidate, successCallback, failureCallback) {\n    var promise = addIceCandidate.apply(this, [candidate]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.addIceCandidate = withCallback;\n}\n\nfunction shimGetUserMedia(window) {\n  var navigator = window && window.navigator;\n\n  if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n    // shim not needed in Safari 12.1\n    var mediaDevices = navigator.mediaDevices;\n    var _getUserMedia = mediaDevices.getUserMedia.bind(mediaDevices);\n    navigator.mediaDevices.getUserMedia = function (constraints) {\n      return _getUserMedia(shimConstraints(constraints));\n    };\n  }\n\n  if (!navigator.getUserMedia && navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n    navigator.getUserMedia = function getUserMedia(constraints, cb, errcb) {\n      navigator.mediaDevices.getUserMedia(constraints).then(cb, errcb);\n    }.bind(navigator);\n  }\n}\n\nfunction shimConstraints(constraints) {\n  if (constraints && constraints.video !== undefined) {\n    return Object.assign({}, constraints, { video: utils.compactObject(constraints.video) });\n  }\n\n  return constraints;\n}\n\nfunction shimRTCIceServerUrls(window) {\n  // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n  var OrigPeerConnection = window.RTCPeerConnection;\n  window.RTCPeerConnection = function RTCPeerConnection(pcConfig, pcConstraints) {\n    if (pcConfig && pcConfig.iceServers) {\n      var newIceServers = [];\n      for (var i = 0; i < pcConfig.iceServers.length; i++) {\n        var server = pcConfig.iceServers[i];\n        if (!server.hasOwnProperty('urls') && server.hasOwnProperty('url')) {\n          utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n          server = JSON.parse(JSON.stringify(server));\n          server.urls = server.url;\n          delete server.url;\n          newIceServers.push(server);\n        } else {\n          newIceServers.push(pcConfig.iceServers[i]);\n        }\n      }\n      pcConfig.iceServers = newIceServers;\n    }\n    return new OrigPeerConnection(pcConfig, pcConstraints);\n  };\n  window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n  // wrap static methods. Currently just generateCertificate.\n  if ('generateCertificate' in window.RTCPeerConnection) {\n    Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n      get: function get() {\n        return OrigPeerConnection.generateCertificate;\n      }\n    });\n  }\n}\n\nfunction shimTrackEventTransceiver(window) {\n  // Add event.transceiver member over deprecated event.receiver\n  if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCTrackEvent && 'receiver' in window.RTCTrackEvent.prototype && !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get: function get() {\n        return { receiver: this.receiver };\n      }\n    });\n  }\n}\n\nfunction shimCreateOfferLegacy(window) {\n  var origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n  window.RTCPeerConnection.prototype.createOffer = function createOffer(offerOptions) {\n    if (offerOptions) {\n      if (typeof offerOptions.offerToReceiveAudio !== 'undefined') {\n        // support bit values\n        offerOptions.offerToReceiveAudio = !!offerOptions.offerToReceiveAudio;\n      }\n      var audioTransceiver = this.getTransceivers().find(function (transceiver) {\n        return transceiver.receiver.track.kind === 'audio';\n      });\n      if (offerOptions.offerToReceiveAudio === false && audioTransceiver) {\n        if (audioTransceiver.direction === 'sendrecv') {\n          if (audioTransceiver.setDirection) {\n            audioTransceiver.setDirection('sendonly');\n          } else {\n            audioTransceiver.direction = 'sendonly';\n          }\n        } else if (audioTransceiver.direction === 'recvonly') {\n          if (audioTransceiver.setDirection) {\n            audioTransceiver.setDirection('inactive');\n          } else {\n            audioTransceiver.direction = 'inactive';\n          }\n        }\n      } else if (offerOptions.offerToReceiveAudio === true && !audioTransceiver) {\n        this.addTransceiver('audio');\n      }\n\n      if (typeof offerOptions.offerToReceiveVideo !== 'undefined') {\n        // support bit values\n        offerOptions.offerToReceiveVideo = !!offerOptions.offerToReceiveVideo;\n      }\n      var videoTransceiver = this.getTransceivers().find(function (transceiver) {\n        return transceiver.receiver.track.kind === 'video';\n      });\n      if (offerOptions.offerToReceiveVideo === false && videoTransceiver) {\n        if (videoTransceiver.direction === 'sendrecv') {\n          if (videoTransceiver.setDirection) {\n            videoTransceiver.setDirection('sendonly');\n          } else {\n            videoTransceiver.direction = 'sendonly';\n          }\n        } else if (videoTransceiver.direction === 'recvonly') {\n          if (videoTransceiver.setDirection) {\n            videoTransceiver.setDirection('inactive');\n          } else {\n            videoTransceiver.direction = 'inactive';\n          }\n        }\n      } else if (offerOptions.offerToReceiveVideo === true && !videoTransceiver) {\n        this.addTransceiver('video');\n      }\n    }\n    return origCreateOffer.apply(this, arguments);\n  };\n}\n\n},{\"../utils\":15}],15:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.extractVersion = extractVersion;\nexports.wrapPeerConnectionEvent = wrapPeerConnectionEvent;\nexports.disableLog = disableLog;\nexports.disableWarnings = disableWarnings;\nexports.log = log;\nexports.deprecated = deprecated;\nexports.detectBrowser = detectBrowser;\nexports.compactObject = compactObject;\nexports.walkStats = walkStats;\nexports.filterStats = filterStats;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar logDisabled_ = true;\nvar deprecationWarnings_ = true;\n\n/**\n * Extract browser version out of the provided user agent string.\n *\n * @param {!string} uastring userAgent string.\n * @param {!string} expr Regular expression used as match criteria.\n * @param {!number} pos position in the version string to be returned.\n * @return {!number} browser version.\n */\nfunction extractVersion(uastring, expr, pos) {\n  var match = uastring.match(expr);\n  return match && match.length >= pos && parseInt(match[pos], 10);\n}\n\n// Wraps the peerconnection event eventNameToWrap in a function\n// which returns the modified event object (or false to prevent\n// the event).\nfunction wrapPeerConnectionEvent(window, eventNameToWrap, wrapper) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  var proto = window.RTCPeerConnection.prototype;\n  var nativeAddEventListener = proto.addEventListener;\n  proto.addEventListener = function (nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap) {\n      return nativeAddEventListener.apply(this, arguments);\n    }\n    var wrappedCallback = function wrappedCallback(e) {\n      var modifiedEvent = wrapper(e);\n      if (modifiedEvent) {\n        cb(modifiedEvent);\n      }\n    };\n    this._eventMap = this._eventMap || {};\n    this._eventMap[cb] = wrappedCallback;\n    return nativeAddEventListener.apply(this, [nativeEventName, wrappedCallback]);\n  };\n\n  var nativeRemoveEventListener = proto.removeEventListener;\n  proto.removeEventListener = function (nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap || !this._eventMap || !this._eventMap[cb]) {\n      return nativeRemoveEventListener.apply(this, arguments);\n    }\n    var unwrappedCb = this._eventMap[cb];\n    delete this._eventMap[cb];\n    return nativeRemoveEventListener.apply(this, [nativeEventName, unwrappedCb]);\n  };\n\n  Object.defineProperty(proto, 'on' + eventNameToWrap, {\n    get: function get() {\n      return this['_on' + eventNameToWrap];\n    },\n    set: function set(cb) {\n      if (this['_on' + eventNameToWrap]) {\n        this.removeEventListener(eventNameToWrap, this['_on' + eventNameToWrap]);\n        delete this['_on' + eventNameToWrap];\n      }\n      if (cb) {\n        this.addEventListener(eventNameToWrap, this['_on' + eventNameToWrap] = cb);\n      }\n    },\n\n    enumerable: true,\n    configurable: true\n  });\n}\n\nfunction disableLog(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + (typeof bool === 'undefined' ? 'undefined' : _typeof(bool)) + '. Please use a boolean.');\n  }\n  logDisabled_ = bool;\n  return bool ? 'adapter.js logging disabled' : 'adapter.js logging enabled';\n}\n\n/**\n * Disable or enable deprecation warnings\n * @param {!boolean} bool set to true to disable warnings.\n */\nfunction disableWarnings(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + (typeof bool === 'undefined' ? 'undefined' : _typeof(bool)) + '. Please use a boolean.');\n  }\n  deprecationWarnings_ = !bool;\n  return 'adapter.js deprecation warnings ' + (bool ? 'disabled' : 'enabled');\n}\n\nfunction log() {\n  if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object') {\n    if (logDisabled_) {\n      return;\n    }\n    if (typeof console !== 'undefined' && typeof console.log === 'function') {\n      console.log.apply(console, arguments);\n    }\n  }\n}\n\n/**\n * Shows a deprecation warning suggesting the modern and spec-compatible API.\n */\nfunction deprecated(oldMethod, newMethod) {\n  if (!deprecationWarnings_) {\n    return;\n  }\n  console.warn(oldMethod + ' is deprecated, please use ' + newMethod + ' instead.');\n}\n\n/**\n * Browser detector.\n *\n * @return {object} result containing browser and version\n *     properties.\n */\nfunction detectBrowser(window) {\n  var navigator = window.navigator;\n\n  // Returned result object.\n\n  var result = { browser: null, version: null };\n\n  // Fail early if it's not a browser\n  if (typeof window === 'undefined' || !window.navigator) {\n    result.browser = 'Not a browser.';\n    return result;\n  }\n\n  if (navigator.mozGetUserMedia) {\n    // Firefox.\n    result.browser = 'firefox';\n    result.version = extractVersion(navigator.userAgent, /Firefox\\/(\\d+)\\./, 1);\n  } else if (navigator.webkitGetUserMedia || window.isSecureContext === false && window.webkitRTCPeerConnection && !window.RTCIceGatherer) {\n    // Chrome, Chromium, Webview, Opera.\n    // Version matches Chrome/WebRTC version.\n    // Chrome 74 removed webkitGetUserMedia on http as well so we need the\n    // more complicated fallback to webkitRTCPeerConnection.\n    result.browser = 'chrome';\n    result.version = extractVersion(navigator.userAgent, /Chrom(e|ium)\\/(\\d+)\\./, 2);\n  } else if (navigator.mediaDevices && navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)) {\n    // Edge.\n    result.browser = 'edge';\n    result.version = extractVersion(navigator.userAgent, /Edge\\/(\\d+).(\\d+)$/, 2);\n  } else if (window.RTCPeerConnection && navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) {\n    // Safari.\n    result.browser = 'safari';\n    result.version = extractVersion(navigator.userAgent, /AppleWebKit\\/(\\d+)\\./, 1);\n    result.supportsUnifiedPlan = window.RTCRtpTransceiver && 'currentDirection' in window.RTCRtpTransceiver.prototype;\n  } else {\n    // Default fallthrough: not supported.\n    result.browser = 'Not a supported browser.';\n    return result;\n  }\n\n  return result;\n}\n\n/**\n * Checks if something is an object.\n *\n * @param {*} val The something you want to check.\n * @return true if val is an object, false otherwise.\n */\nfunction isObject(val) {\n  return Object.prototype.toString.call(val) === '[object Object]';\n}\n\n/**\n * Remove all empty objects and undefined values\n * from a nested object -- an enhanced and vanilla version\n * of Lodash's `compact`.\n */\nfunction compactObject(data) {\n  if (!isObject(data)) {\n    return data;\n  }\n\n  return Object.keys(data).reduce(function (accumulator, key) {\n    var isObj = isObject(data[key]);\n    var value = isObj ? compactObject(data[key]) : data[key];\n    var isEmptyObject = isObj && !Object.keys(value).length;\n    if (value === undefined || isEmptyObject) {\n      return accumulator;\n    }\n    return Object.assign(accumulator, _defineProperty({}, key, value));\n  }, {});\n}\n\n/* iterates the stats graph recursively. */\nfunction walkStats(stats, base, resultSet) {\n  if (!base || resultSet.has(base.id)) {\n    return;\n  }\n  resultSet.set(base.id, base);\n  Object.keys(base).forEach(function (name) {\n    if (name.endsWith('Id')) {\n      walkStats(stats, stats.get(base[name]), resultSet);\n    } else if (name.endsWith('Ids')) {\n      base[name].forEach(function (id) {\n        walkStats(stats, stats.get(id), resultSet);\n      });\n    }\n  });\n}\n\n/* filter getStats for a sender/receiver track. */\nfunction filterStats(result, track, outbound) {\n  var streamStatsType = outbound ? 'outbound-rtp' : 'inbound-rtp';\n  var filteredResult = new Map();\n  if (track === null) {\n    return filteredResult;\n  }\n  var trackStats = [];\n  result.forEach(function (value) {\n    if (value.type === 'track' && value.trackIdentifier === track.id) {\n      trackStats.push(value);\n    }\n  });\n  trackStats.forEach(function (trackStat) {\n    result.forEach(function (stats) {\n      if (stats.type === streamStatsType && stats.trackId === trackStat.id) {\n        walkStats(result, stats, filteredResult);\n      }\n    });\n  });\n  return filteredResult;\n}\n\n},{}],16:[function(require,module,exports){\n/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar SDPUtils = require('sdp');\n\nfunction fixStatsType(stat) {\n  return {\n    inboundrtp: 'inbound-rtp',\n    outboundrtp: 'outbound-rtp',\n    candidatepair: 'candidate-pair',\n    localcandidate: 'local-candidate',\n    remotecandidate: 'remote-candidate'\n  }[stat.type] || stat.type;\n}\n\nfunction writeMediaSection(transceiver, caps, type, stream, dtlsRole) {\n  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n  // Map ICE parameters (ufrag, pwd) to SDP.\n  sdp += SDPUtils.writeIceParameters(\n      transceiver.iceGatherer.getLocalParameters());\n\n  // Map DTLS parameters to SDP.\n  sdp += SDPUtils.writeDtlsParameters(\n      transceiver.dtlsTransport.getLocalParameters(),\n      type === 'offer' ? 'actpass' : dtlsRole || 'active');\n\n  sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n  if (transceiver.rtpSender && transceiver.rtpReceiver) {\n    sdp += 'a=sendrecv\\r\\n';\n  } else if (transceiver.rtpSender) {\n    sdp += 'a=sendonly\\r\\n';\n  } else if (transceiver.rtpReceiver) {\n    sdp += 'a=recvonly\\r\\n';\n  } else {\n    sdp += 'a=inactive\\r\\n';\n  }\n\n  if (transceiver.rtpSender) {\n    var trackId = transceiver.rtpSender._initialTrackId ||\n        transceiver.rtpSender.track.id;\n    transceiver.rtpSender._initialTrackId = trackId;\n    // spec.\n    var msid = 'msid:' + (stream ? stream.id : '-') + ' ' +\n        trackId + '\\r\\n';\n    sdp += 'a=' + msid;\n    // for Chrome. Legacy should no longer be required.\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n        ' ' + msid;\n\n    // RTX\n    if (transceiver.sendEncodingParameters[0].rtx) {\n      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n          ' ' + msid;\n      sdp += 'a=ssrc-group:FID ' +\n          transceiver.sendEncodingParameters[0].ssrc + ' ' +\n          transceiver.sendEncodingParameters[0].rtx.ssrc +\n          '\\r\\n';\n    }\n  }\n  // FIXME: this should be written by writeRtpDescription.\n  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n      ' cname:' + SDPUtils.localCName + '\\r\\n';\n  if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n        ' cname:' + SDPUtils.localCName + '\\r\\n';\n  }\n  return sdp;\n}\n\n// Edge does not like\n// 1) stun: filtered after 14393 unless ?transport=udp is present\n// 2) turn: that does not have all of turn:host:port?transport=udp\n// 3) turn: with ipv6 addresses\n// 4) turn: occurring muliple times\nfunction filterIceServers(iceServers, edgeVersion) {\n  var hasTurn = false;\n  iceServers = JSON.parse(JSON.stringify(iceServers));\n  return iceServers.filter(function(server) {\n    if (server && (server.urls || server.url)) {\n      var urls = server.urls || server.url;\n      if (server.url && !server.urls) {\n        console.warn('RTCIceServer.url is deprecated! Use urls instead.');\n      }\n      var isString = typeof urls === 'string';\n      if (isString) {\n        urls = [urls];\n      }\n      urls = urls.filter(function(url) {\n        var validTurn = url.indexOf('turn:') === 0 &&\n            url.indexOf('transport=udp') !== -1 &&\n            url.indexOf('turn:[') === -1 &&\n            !hasTurn;\n\n        if (validTurn) {\n          hasTurn = true;\n          return true;\n        }\n        return url.indexOf('stun:') === 0 && edgeVersion >= 14393 &&\n            url.indexOf('?transport=udp') === -1;\n      });\n\n      delete server.url;\n      server.urls = isString ? urls[0] : urls;\n      return !!urls.length;\n    }\n  });\n}\n\n// Determines the intersection of local and remote capabilities.\nfunction getCommonCapabilities(localCapabilities, remoteCapabilities) {\n  var commonCapabilities = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: []\n  };\n\n  var findCodecByPayloadType = function(pt, codecs) {\n    pt = parseInt(pt, 10);\n    for (var i = 0; i < codecs.length; i++) {\n      if (codecs[i].payloadType === pt ||\n          codecs[i].preferredPayloadType === pt) {\n        return codecs[i];\n      }\n    }\n  };\n\n  var rtxCapabilityMatches = function(lRtx, rRtx, lCodecs, rCodecs) {\n    var lCodec = findCodecByPayloadType(lRtx.parameters.apt, lCodecs);\n    var rCodec = findCodecByPayloadType(rRtx.parameters.apt, rCodecs);\n    return lCodec && rCodec &&\n        lCodec.name.toLowerCase() === rCodec.name.toLowerCase();\n  };\n\n  localCapabilities.codecs.forEach(function(lCodec) {\n    for (var i = 0; i < remoteCapabilities.codecs.length; i++) {\n      var rCodec = remoteCapabilities.codecs[i];\n      if (lCodec.name.toLowerCase() === rCodec.name.toLowerCase() &&\n          lCodec.clockRate === rCodec.clockRate) {\n        if (lCodec.name.toLowerCase() === 'rtx' &&\n            lCodec.parameters && rCodec.parameters.apt) {\n          // for RTX we need to find the local rtx that has a apt\n          // which points to the same local codec as the remote one.\n          if (!rtxCapabilityMatches(lCodec, rCodec,\n              localCapabilities.codecs, remoteCapabilities.codecs)) {\n            continue;\n          }\n        }\n        rCodec = JSON.parse(JSON.stringify(rCodec)); // deepcopy\n        // number of channels is the highest common number of channels\n        rCodec.numChannels = Math.min(lCodec.numChannels,\n            rCodec.numChannels);\n        // push rCodec so we reply with offerer payload type\n        commonCapabilities.codecs.push(rCodec);\n\n        // determine common feedback mechanisms\n        rCodec.rtcpFeedback = rCodec.rtcpFeedback.filter(function(fb) {\n          for (var j = 0; j < lCodec.rtcpFeedback.length; j++) {\n            if (lCodec.rtcpFeedback[j].type === fb.type &&\n                lCodec.rtcpFeedback[j].parameter === fb.parameter) {\n              return true;\n            }\n          }\n          return false;\n        });\n        // FIXME: also need to determine .parameters\n        //  see https://github.com/openpeer/ortc/issues/569\n        break;\n      }\n    }\n  });\n\n  localCapabilities.headerExtensions.forEach(function(lHeaderExtension) {\n    for (var i = 0; i < remoteCapabilities.headerExtensions.length;\n         i++) {\n      var rHeaderExtension = remoteCapabilities.headerExtensions[i];\n      if (lHeaderExtension.uri === rHeaderExtension.uri) {\n        commonCapabilities.headerExtensions.push(rHeaderExtension);\n        break;\n      }\n    }\n  });\n\n  // FIXME: fecMechanisms\n  return commonCapabilities;\n}\n\n// is action=setLocalDescription with type allowed in signalingState\nfunction isActionAllowedInSignalingState(action, type, signalingState) {\n  return {\n    offer: {\n      setLocalDescription: ['stable', 'have-local-offer'],\n      setRemoteDescription: ['stable', 'have-remote-offer']\n    },\n    answer: {\n      setLocalDescription: ['have-remote-offer', 'have-local-pranswer'],\n      setRemoteDescription: ['have-local-offer', 'have-remote-pranswer']\n    }\n  }[type][action].indexOf(signalingState) !== -1;\n}\n\nfunction maybeAddCandidate(iceTransport, candidate) {\n  // Edge's internal representation adds some fields therefore\n  // not all field are taken into account.\n  var alreadyAdded = iceTransport.getRemoteCandidates()\n      .find(function(remoteCandidate) {\n        return candidate.foundation === remoteCandidate.foundation &&\n            candidate.ip === remoteCandidate.ip &&\n            candidate.port === remoteCandidate.port &&\n            candidate.priority === remoteCandidate.priority &&\n            candidate.protocol === remoteCandidate.protocol &&\n            candidate.type === remoteCandidate.type;\n      });\n  if (!alreadyAdded) {\n    iceTransport.addRemoteCandidate(candidate);\n  }\n  return !alreadyAdded;\n}\n\n\nfunction makeError(name, description) {\n  var e = new Error(description);\n  e.name = name;\n  // legacy error codes from https://heycam.github.io/webidl/#idl-DOMException-error-names\n  e.code = {\n    NotSupportedError: 9,\n    InvalidStateError: 11,\n    InvalidAccessError: 15,\n    TypeError: undefined,\n    OperationError: undefined\n  }[name];\n  return e;\n}\n\nmodule.exports = function(window, edgeVersion) {\n  // https://w3c.github.io/mediacapture-main/#mediastream\n  // Helper function to add the track to the stream and\n  // dispatch the event ourselves.\n  function addTrackToStreamAndFireEvent(track, stream) {\n    stream.addTrack(track);\n    stream.dispatchEvent(new window.MediaStreamTrackEvent('addtrack',\n        {track: track}));\n  }\n\n  function removeTrackFromStreamAndFireEvent(track, stream) {\n    stream.removeTrack(track);\n    stream.dispatchEvent(new window.MediaStreamTrackEvent('removetrack',\n        {track: track}));\n  }\n\n  function fireAddTrack(pc, track, receiver, streams) {\n    var trackEvent = new Event('track');\n    trackEvent.track = track;\n    trackEvent.receiver = receiver;\n    trackEvent.transceiver = {receiver: receiver};\n    trackEvent.streams = streams;\n    window.setTimeout(function() {\n      pc._dispatchEvent('track', trackEvent);\n    });\n  }\n\n  var RTCPeerConnection = function(config) {\n    var pc = this;\n\n    var _eventTarget = document.createDocumentFragment();\n    ['addEventListener', 'removeEventListener', 'dispatchEvent']\n        .forEach(function(method) {\n          pc[method] = _eventTarget[method].bind(_eventTarget);\n        });\n\n    this.canTrickleIceCandidates = null;\n\n    this.needNegotiation = false;\n\n    this.localStreams = [];\n    this.remoteStreams = [];\n\n    this._localDescription = null;\n    this._remoteDescription = null;\n\n    this.signalingState = 'stable';\n    this.iceConnectionState = 'new';\n    this.connectionState = 'new';\n    this.iceGatheringState = 'new';\n\n    config = JSON.parse(JSON.stringify(config || {}));\n\n    this.usingBundle = config.bundlePolicy === 'max-bundle';\n    if (config.rtcpMuxPolicy === 'negotiate') {\n      throw(makeError('NotSupportedError',\n          'rtcpMuxPolicy \\'negotiate\\' is not supported'));\n    } else if (!config.rtcpMuxPolicy) {\n      config.rtcpMuxPolicy = 'require';\n    }\n\n    switch (config.iceTransportPolicy) {\n      case 'all':\n      case 'relay':\n        break;\n      default:\n        config.iceTransportPolicy = 'all';\n        break;\n    }\n\n    switch (config.bundlePolicy) {\n      case 'balanced':\n      case 'max-compat':\n      case 'max-bundle':\n        break;\n      default:\n        config.bundlePolicy = 'balanced';\n        break;\n    }\n\n    config.iceServers = filterIceServers(config.iceServers || [], edgeVersion);\n\n    this._iceGatherers = [];\n    if (config.iceCandidatePoolSize) {\n      for (var i = config.iceCandidatePoolSize; i > 0; i--) {\n        this._iceGatherers.push(new window.RTCIceGatherer({\n          iceServers: config.iceServers,\n          gatherPolicy: config.iceTransportPolicy\n        }));\n      }\n    } else {\n      config.iceCandidatePoolSize = 0;\n    }\n\n    this._config = config;\n\n    // per-track iceGathers, iceTransports, dtlsTransports, rtpSenders, ...\n    // everything that is needed to describe a SDP m-line.\n    this.transceivers = [];\n\n    this._sdpSessionId = SDPUtils.generateSessionId();\n    this._sdpSessionVersion = 0;\n\n    this._dtlsRole = undefined; // role for a=setup to use in answers.\n\n    this._isClosed = false;\n  };\n\n  Object.defineProperty(RTCPeerConnection.prototype, 'localDescription', {\n    configurable: true,\n    get: function() {\n      return this._localDescription;\n    }\n  });\n  Object.defineProperty(RTCPeerConnection.prototype, 'remoteDescription', {\n    configurable: true,\n    get: function() {\n      return this._remoteDescription;\n    }\n  });\n\n  // set up event handlers on prototype\n  RTCPeerConnection.prototype.onicecandidate = null;\n  RTCPeerConnection.prototype.onaddstream = null;\n  RTCPeerConnection.prototype.ontrack = null;\n  RTCPeerConnection.prototype.onremovestream = null;\n  RTCPeerConnection.prototype.onsignalingstatechange = null;\n  RTCPeerConnection.prototype.oniceconnectionstatechange = null;\n  RTCPeerConnection.prototype.onconnectionstatechange = null;\n  RTCPeerConnection.prototype.onicegatheringstatechange = null;\n  RTCPeerConnection.prototype.onnegotiationneeded = null;\n  RTCPeerConnection.prototype.ondatachannel = null;\n\n  RTCPeerConnection.prototype._dispatchEvent = function(name, event) {\n    if (this._isClosed) {\n      return;\n    }\n    this.dispatchEvent(event);\n    if (typeof this['on' + name] === 'function') {\n      this['on' + name](event);\n    }\n  };\n\n  RTCPeerConnection.prototype._emitGatheringStateChange = function() {\n    var event = new Event('icegatheringstatechange');\n    this._dispatchEvent('icegatheringstatechange', event);\n  };\n\n  RTCPeerConnection.prototype.getConfiguration = function() {\n    return this._config;\n  };\n\n  RTCPeerConnection.prototype.getLocalStreams = function() {\n    return this.localStreams;\n  };\n\n  RTCPeerConnection.prototype.getRemoteStreams = function() {\n    return this.remoteStreams;\n  };\n\n  // internal helper to create a transceiver object.\n  // (which is not yet the same as the WebRTC 1.0 transceiver)\n  RTCPeerConnection.prototype._createTransceiver = function(kind, doNotAdd) {\n    var hasBundleTransport = this.transceivers.length > 0;\n    var transceiver = {\n      track: null,\n      iceGatherer: null,\n      iceTransport: null,\n      dtlsTransport: null,\n      localCapabilities: null,\n      remoteCapabilities: null,\n      rtpSender: null,\n      rtpReceiver: null,\n      kind: kind,\n      mid: null,\n      sendEncodingParameters: null,\n      recvEncodingParameters: null,\n      stream: null,\n      associatedRemoteMediaStreams: [],\n      wantReceive: true\n    };\n    if (this.usingBundle && hasBundleTransport) {\n      transceiver.iceTransport = this.transceivers[0].iceTransport;\n      transceiver.dtlsTransport = this.transceivers[0].dtlsTransport;\n    } else {\n      var transports = this._createIceAndDtlsTransports();\n      transceiver.iceTransport = transports.iceTransport;\n      transceiver.dtlsTransport = transports.dtlsTransport;\n    }\n    if (!doNotAdd) {\n      this.transceivers.push(transceiver);\n    }\n    return transceiver;\n  };\n\n  RTCPeerConnection.prototype.addTrack = function(track, stream) {\n    if (this._isClosed) {\n      throw makeError('InvalidStateError',\n          'Attempted to call addTrack on a closed peerconnection.');\n    }\n\n    var alreadyExists = this.transceivers.find(function(s) {\n      return s.track === track;\n    });\n\n    if (alreadyExists) {\n      throw makeError('InvalidAccessError', 'Track already exists.');\n    }\n\n    var transceiver;\n    for (var i = 0; i < this.transceivers.length; i++) {\n      if (!this.transceivers[i].track &&\n          this.transceivers[i].kind === track.kind) {\n        transceiver = this.transceivers[i];\n      }\n    }\n    if (!transceiver) {\n      transceiver = this._createTransceiver(track.kind);\n    }\n\n    this._maybeFireNegotiationNeeded();\n\n    if (this.localStreams.indexOf(stream) === -1) {\n      this.localStreams.push(stream);\n    }\n\n    transceiver.track = track;\n    transceiver.stream = stream;\n    transceiver.rtpSender = new window.RTCRtpSender(track,\n        transceiver.dtlsTransport);\n    return transceiver.rtpSender;\n  };\n\n  RTCPeerConnection.prototype.addStream = function(stream) {\n    var pc = this;\n    if (edgeVersion >= 15025) {\n      stream.getTracks().forEach(function(track) {\n        pc.addTrack(track, stream);\n      });\n    } else {\n      // Clone is necessary for local demos mostly, attaching directly\n      // to two different senders does not work (build 10547).\n      // Fixed in 15025 (or earlier)\n      var clonedStream = stream.clone();\n      stream.getTracks().forEach(function(track, idx) {\n        var clonedTrack = clonedStream.getTracks()[idx];\n        track.addEventListener('enabled', function(event) {\n          clonedTrack.enabled = event.enabled;\n        });\n      });\n      clonedStream.getTracks().forEach(function(track) {\n        pc.addTrack(track, clonedStream);\n      });\n    }\n  };\n\n  RTCPeerConnection.prototype.removeTrack = function(sender) {\n    if (this._isClosed) {\n      throw makeError('InvalidStateError',\n          'Attempted to call removeTrack on a closed peerconnection.');\n    }\n\n    if (!(sender instanceof window.RTCRtpSender)) {\n      throw new TypeError('Argument 1 of RTCPeerConnection.removeTrack ' +\n          'does not implement interface RTCRtpSender.');\n    }\n\n    var transceiver = this.transceivers.find(function(t) {\n      return t.rtpSender === sender;\n    });\n\n    if (!transceiver) {\n      throw makeError('InvalidAccessError',\n          'Sender was not created by this connection.');\n    }\n    var stream = transceiver.stream;\n\n    transceiver.rtpSender.stop();\n    transceiver.rtpSender = null;\n    transceiver.track = null;\n    transceiver.stream = null;\n\n    // remove the stream from the set of local streams\n    var localStreams = this.transceivers.map(function(t) {\n      return t.stream;\n    });\n    if (localStreams.indexOf(stream) === -1 &&\n        this.localStreams.indexOf(stream) > -1) {\n      this.localStreams.splice(this.localStreams.indexOf(stream), 1);\n    }\n\n    this._maybeFireNegotiationNeeded();\n  };\n\n  RTCPeerConnection.prototype.removeStream = function(stream) {\n    var pc = this;\n    stream.getTracks().forEach(function(track) {\n      var sender = pc.getSenders().find(function(s) {\n        return s.track === track;\n      });\n      if (sender) {\n        pc.removeTrack(sender);\n      }\n    });\n  };\n\n  RTCPeerConnection.prototype.getSenders = function() {\n    return this.transceivers.filter(function(transceiver) {\n      return !!transceiver.rtpSender;\n    })\n    .map(function(transceiver) {\n      return transceiver.rtpSender;\n    });\n  };\n\n  RTCPeerConnection.prototype.getReceivers = function() {\n    return this.transceivers.filter(function(transceiver) {\n      return !!transceiver.rtpReceiver;\n    })\n    .map(function(transceiver) {\n      return transceiver.rtpReceiver;\n    });\n  };\n\n\n  RTCPeerConnection.prototype._createIceGatherer = function(sdpMLineIndex,\n      usingBundle) {\n    var pc = this;\n    if (usingBundle && sdpMLineIndex > 0) {\n      return this.transceivers[0].iceGatherer;\n    } else if (this._iceGatherers.length) {\n      return this._iceGatherers.shift();\n    }\n    var iceGatherer = new window.RTCIceGatherer({\n      iceServers: this._config.iceServers,\n      gatherPolicy: this._config.iceTransportPolicy\n    });\n    Object.defineProperty(iceGatherer, 'state',\n        {value: 'new', writable: true}\n    );\n\n    this.transceivers[sdpMLineIndex].bufferedCandidateEvents = [];\n    this.transceivers[sdpMLineIndex].bufferCandidates = function(event) {\n      var end = !event.candidate || Object.keys(event.candidate).length === 0;\n      // polyfill since RTCIceGatherer.state is not implemented in\n      // Edge 10547 yet.\n      iceGatherer.state = end ? 'completed' : 'gathering';\n      if (pc.transceivers[sdpMLineIndex].bufferedCandidateEvents !== null) {\n        pc.transceivers[sdpMLineIndex].bufferedCandidateEvents.push(event);\n      }\n    };\n    iceGatherer.addEventListener('localcandidate',\n      this.transceivers[sdpMLineIndex].bufferCandidates);\n    return iceGatherer;\n  };\n\n  // start gathering from an RTCIceGatherer.\n  RTCPeerConnection.prototype._gather = function(mid, sdpMLineIndex) {\n    var pc = this;\n    var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n    if (iceGatherer.onlocalcandidate) {\n      return;\n    }\n    var bufferedCandidateEvents =\n      this.transceivers[sdpMLineIndex].bufferedCandidateEvents;\n    this.transceivers[sdpMLineIndex].bufferedCandidateEvents = null;\n    iceGatherer.removeEventListener('localcandidate',\n      this.transceivers[sdpMLineIndex].bufferCandidates);\n    iceGatherer.onlocalcandidate = function(evt) {\n      if (pc.usingBundle && sdpMLineIndex > 0) {\n        // if we know that we use bundle we can drop candidates with\n        // dpMLineIndex > 0. If we don't do this then our state gets\n        // confused since we dispose the extra ice gatherer.\n        return;\n      }\n      var event = new Event('icecandidate');\n      event.candidate = {sdpMid: mid, sdpMLineIndex: sdpMLineIndex};\n\n      var cand = evt.candidate;\n      // Edge emits an empty object for RTCIceCandidateComplete\n      var end = !cand || Object.keys(cand).length === 0;\n      if (end) {\n        // polyfill since RTCIceGatherer.state is not implemented in\n        // Edge 10547 yet.\n        if (iceGatherer.state === 'new' || iceGatherer.state === 'gathering') {\n          iceGatherer.state = 'completed';\n        }\n      } else {\n        if (iceGatherer.state === 'new') {\n          iceGatherer.state = 'gathering';\n        }\n        // RTCIceCandidate doesn't have a component, needs to be added\n        cand.component = 1;\n        // also the usernameFragment. TODO: update SDP to take both variants.\n        cand.ufrag = iceGatherer.getLocalParameters().usernameFragment;\n\n        var serializedCandidate = SDPUtils.writeCandidate(cand);\n        event.candidate = Object.assign(event.candidate,\n            SDPUtils.parseCandidate(serializedCandidate));\n\n        event.candidate.candidate = serializedCandidate;\n        event.candidate.toJSON = function() {\n          return {\n            candidate: event.candidate.candidate,\n            sdpMid: event.candidate.sdpMid,\n            sdpMLineIndex: event.candidate.sdpMLineIndex,\n            usernameFragment: event.candidate.usernameFragment\n          };\n        };\n      }\n\n      // update local description.\n      var sections = SDPUtils.getMediaSections(pc._localDescription.sdp);\n      if (!end) {\n        sections[event.candidate.sdpMLineIndex] +=\n            'a=' + event.candidate.candidate + '\\r\\n';\n      } else {\n        sections[event.candidate.sdpMLineIndex] +=\n            'a=end-of-candidates\\r\\n';\n      }\n      pc._localDescription.sdp =\n          SDPUtils.getDescription(pc._localDescription.sdp) +\n          sections.join('');\n      var complete = pc.transceivers.every(function(transceiver) {\n        return transceiver.iceGatherer &&\n            transceiver.iceGatherer.state === 'completed';\n      });\n\n      if (pc.iceGatheringState !== 'gathering') {\n        pc.iceGatheringState = 'gathering';\n        pc._emitGatheringStateChange();\n      }\n\n      // Emit candidate. Also emit null candidate when all gatherers are\n      // complete.\n      if (!end) {\n        pc._dispatchEvent('icecandidate', event);\n      }\n      if (complete) {\n        pc._dispatchEvent('icecandidate', new Event('icecandidate'));\n        pc.iceGatheringState = 'complete';\n        pc._emitGatheringStateChange();\n      }\n    };\n\n    // emit already gathered candidates.\n    window.setTimeout(function() {\n      bufferedCandidateEvents.forEach(function(e) {\n        iceGatherer.onlocalcandidate(e);\n      });\n    }, 0);\n  };\n\n  // Create ICE transport and DTLS transport.\n  RTCPeerConnection.prototype._createIceAndDtlsTransports = function() {\n    var pc = this;\n    var iceTransport = new window.RTCIceTransport(null);\n    iceTransport.onicestatechange = function() {\n      pc._updateIceConnectionState();\n      pc._updateConnectionState();\n    };\n\n    var dtlsTransport = new window.RTCDtlsTransport(iceTransport);\n    dtlsTransport.ondtlsstatechange = function() {\n      pc._updateConnectionState();\n    };\n    dtlsTransport.onerror = function() {\n      // onerror does not set state to failed by itself.\n      Object.defineProperty(dtlsTransport, 'state',\n          {value: 'failed', writable: true});\n      pc._updateConnectionState();\n    };\n\n    return {\n      iceTransport: iceTransport,\n      dtlsTransport: dtlsTransport\n    };\n  };\n\n  // Destroy ICE gatherer, ICE transport and DTLS transport.\n  // Without triggering the callbacks.\n  RTCPeerConnection.prototype._disposeIceAndDtlsTransports = function(\n      sdpMLineIndex) {\n    var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n    if (iceGatherer) {\n      delete iceGatherer.onlocalcandidate;\n      delete this.transceivers[sdpMLineIndex].iceGatherer;\n    }\n    var iceTransport = this.transceivers[sdpMLineIndex].iceTransport;\n    if (iceTransport) {\n      delete iceTransport.onicestatechange;\n      delete this.transceivers[sdpMLineIndex].iceTransport;\n    }\n    var dtlsTransport = this.transceivers[sdpMLineIndex].dtlsTransport;\n    if (dtlsTransport) {\n      delete dtlsTransport.ondtlsstatechange;\n      delete dtlsTransport.onerror;\n      delete this.transceivers[sdpMLineIndex].dtlsTransport;\n    }\n  };\n\n  // Start the RTP Sender and Receiver for a transceiver.\n  RTCPeerConnection.prototype._transceive = function(transceiver,\n      send, recv) {\n    var params = getCommonCapabilities(transceiver.localCapabilities,\n        transceiver.remoteCapabilities);\n    if (send && transceiver.rtpSender) {\n      params.encodings = transceiver.sendEncodingParameters;\n      params.rtcp = {\n        cname: SDPUtils.localCName,\n        compound: transceiver.rtcpParameters.compound\n      };\n      if (transceiver.recvEncodingParameters.length) {\n        params.rtcp.ssrc = transceiver.recvEncodingParameters[0].ssrc;\n      }\n      transceiver.rtpSender.send(params);\n    }\n    if (recv && transceiver.rtpReceiver && params.codecs.length > 0) {\n      // remove RTX field in Edge 14942\n      if (transceiver.kind === 'video'\n          && transceiver.recvEncodingParameters\n          && edgeVersion < 15019) {\n        transceiver.recvEncodingParameters.forEach(function(p) {\n          delete p.rtx;\n        });\n      }\n      if (transceiver.recvEncodingParameters.length) {\n        params.encodings = transceiver.recvEncodingParameters;\n      } else {\n        params.encodings = [{}];\n      }\n      params.rtcp = {\n        compound: transceiver.rtcpParameters.compound\n      };\n      if (transceiver.rtcpParameters.cname) {\n        params.rtcp.cname = transceiver.rtcpParameters.cname;\n      }\n      if (transceiver.sendEncodingParameters.length) {\n        params.rtcp.ssrc = transceiver.sendEncodingParameters[0].ssrc;\n      }\n      transceiver.rtpReceiver.receive(params);\n    }\n  };\n\n  RTCPeerConnection.prototype.setLocalDescription = function(description) {\n    var pc = this;\n\n    // Note: pranswer is not supported.\n    if (['offer', 'answer'].indexOf(description.type) === -1) {\n      return Promise.reject(makeError('TypeError',\n          'Unsupported type \"' + description.type + '\"'));\n    }\n\n    if (!isActionAllowedInSignalingState('setLocalDescription',\n        description.type, pc.signalingState) || pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not set local ' + description.type +\n          ' in state ' + pc.signalingState));\n    }\n\n    var sections;\n    var sessionpart;\n    if (description.type === 'offer') {\n      // VERY limited support for SDP munging. Limited to:\n      // * changing the order of codecs\n      sections = SDPUtils.splitSections(description.sdp);\n      sessionpart = sections.shift();\n      sections.forEach(function(mediaSection, sdpMLineIndex) {\n        var caps = SDPUtils.parseRtpParameters(mediaSection);\n        pc.transceivers[sdpMLineIndex].localCapabilities = caps;\n      });\n\n      pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n        pc._gather(transceiver.mid, sdpMLineIndex);\n      });\n    } else if (description.type === 'answer') {\n      sections = SDPUtils.splitSections(pc._remoteDescription.sdp);\n      sessionpart = sections.shift();\n      var isIceLite = SDPUtils.matchPrefix(sessionpart,\n          'a=ice-lite').length > 0;\n      sections.forEach(function(mediaSection, sdpMLineIndex) {\n        var transceiver = pc.transceivers[sdpMLineIndex];\n        var iceGatherer = transceiver.iceGatherer;\n        var iceTransport = transceiver.iceTransport;\n        var dtlsTransport = transceiver.dtlsTransport;\n        var localCapabilities = transceiver.localCapabilities;\n        var remoteCapabilities = transceiver.remoteCapabilities;\n\n        // treat bundle-only as not-rejected.\n        var rejected = SDPUtils.isRejected(mediaSection) &&\n            SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 0;\n\n        if (!rejected && !transceiver.rejected) {\n          var remoteIceParameters = SDPUtils.getIceParameters(\n              mediaSection, sessionpart);\n          var remoteDtlsParameters = SDPUtils.getDtlsParameters(\n              mediaSection, sessionpart);\n          if (isIceLite) {\n            remoteDtlsParameters.role = 'server';\n          }\n\n          if (!pc.usingBundle || sdpMLineIndex === 0) {\n            pc._gather(transceiver.mid, sdpMLineIndex);\n            if (iceTransport.state === 'new') {\n              iceTransport.start(iceGatherer, remoteIceParameters,\n                  isIceLite ? 'controlling' : 'controlled');\n            }\n            if (dtlsTransport.state === 'new') {\n              dtlsTransport.start(remoteDtlsParameters);\n            }\n          }\n\n          // Calculate intersection of capabilities.\n          var params = getCommonCapabilities(localCapabilities,\n              remoteCapabilities);\n\n          // Start the RTCRtpSender. The RTCRtpReceiver for this\n          // transceiver has already been started in setRemoteDescription.\n          pc._transceive(transceiver,\n              params.codecs.length > 0,\n              false);\n        }\n      });\n    }\n\n    pc._localDescription = {\n      type: description.type,\n      sdp: description.sdp\n    };\n    if (description.type === 'offer') {\n      pc._updateSignalingState('have-local-offer');\n    } else {\n      pc._updateSignalingState('stable');\n    }\n\n    return Promise.resolve();\n  };\n\n  RTCPeerConnection.prototype.setRemoteDescription = function(description) {\n    var pc = this;\n\n    // Note: pranswer is not supported.\n    if (['offer', 'answer'].indexOf(description.type) === -1) {\n      return Promise.reject(makeError('TypeError',\n          'Unsupported type \"' + description.type + '\"'));\n    }\n\n    if (!isActionAllowedInSignalingState('setRemoteDescription',\n        description.type, pc.signalingState) || pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not set remote ' + description.type +\n          ' in state ' + pc.signalingState));\n    }\n\n    var streams = {};\n    pc.remoteStreams.forEach(function(stream) {\n      streams[stream.id] = stream;\n    });\n    var receiverList = [];\n    var sections = SDPUtils.splitSections(description.sdp);\n    var sessionpart = sections.shift();\n    var isIceLite = SDPUtils.matchPrefix(sessionpart,\n        'a=ice-lite').length > 0;\n    var usingBundle = SDPUtils.matchPrefix(sessionpart,\n        'a=group:BUNDLE ').length > 0;\n    pc.usingBundle = usingBundle;\n    var iceOptions = SDPUtils.matchPrefix(sessionpart,\n        'a=ice-options:')[0];\n    if (iceOptions) {\n      pc.canTrickleIceCandidates = iceOptions.substr(14).split(' ')\n          .indexOf('trickle') >= 0;\n    } else {\n      pc.canTrickleIceCandidates = false;\n    }\n\n    sections.forEach(function(mediaSection, sdpMLineIndex) {\n      var lines = SDPUtils.splitLines(mediaSection);\n      var kind = SDPUtils.getKind(mediaSection);\n      // treat bundle-only as not-rejected.\n      var rejected = SDPUtils.isRejected(mediaSection) &&\n          SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 0;\n      var protocol = lines[0].substr(2).split(' ')[2];\n\n      var direction = SDPUtils.getDirection(mediaSection, sessionpart);\n      var remoteMsid = SDPUtils.parseMsid(mediaSection);\n\n      var mid = SDPUtils.getMid(mediaSection) || SDPUtils.generateIdentifier();\n\n      // Reject datachannels which are not implemented yet.\n      if (rejected || (kind === 'application' && (protocol === 'DTLS/SCTP' ||\n          protocol === 'UDP/DTLS/SCTP'))) {\n        // TODO: this is dangerous in the case where a non-rejected m-line\n        //     becomes rejected.\n        pc.transceivers[sdpMLineIndex] = {\n          mid: mid,\n          kind: kind,\n          protocol: protocol,\n          rejected: true\n        };\n        return;\n      }\n\n      if (!rejected && pc.transceivers[sdpMLineIndex] &&\n          pc.transceivers[sdpMLineIndex].rejected) {\n        // recycle a rejected transceiver.\n        pc.transceivers[sdpMLineIndex] = pc._createTransceiver(kind, true);\n      }\n\n      var transceiver;\n      var iceGatherer;\n      var iceTransport;\n      var dtlsTransport;\n      var rtpReceiver;\n      var sendEncodingParameters;\n      var recvEncodingParameters;\n      var localCapabilities;\n\n      var track;\n      // FIXME: ensure the mediaSection has rtcp-mux set.\n      var remoteCapabilities = SDPUtils.parseRtpParameters(mediaSection);\n      var remoteIceParameters;\n      var remoteDtlsParameters;\n      if (!rejected) {\n        remoteIceParameters = SDPUtils.getIceParameters(mediaSection,\n            sessionpart);\n        remoteDtlsParameters = SDPUtils.getDtlsParameters(mediaSection,\n            sessionpart);\n        remoteDtlsParameters.role = 'client';\n      }\n      recvEncodingParameters =\n          SDPUtils.parseRtpEncodingParameters(mediaSection);\n\n      var rtcpParameters = SDPUtils.parseRtcpParameters(mediaSection);\n\n      var isComplete = SDPUtils.matchPrefix(mediaSection,\n          'a=end-of-candidates', sessionpart).length > 0;\n      var cands = SDPUtils.matchPrefix(mediaSection, 'a=candidate:')\n          .map(function(cand) {\n            return SDPUtils.parseCandidate(cand);\n          })\n          .filter(function(cand) {\n            return cand.component === 1;\n          });\n\n      // Check if we can use BUNDLE and dispose transports.\n      if ((description.type === 'offer' || description.type === 'answer') &&\n          !rejected && usingBundle && sdpMLineIndex > 0 &&\n          pc.transceivers[sdpMLineIndex]) {\n        pc._disposeIceAndDtlsTransports(sdpMLineIndex);\n        pc.transceivers[sdpMLineIndex].iceGatherer =\n            pc.transceivers[0].iceGatherer;\n        pc.transceivers[sdpMLineIndex].iceTransport =\n            pc.transceivers[0].iceTransport;\n        pc.transceivers[sdpMLineIndex].dtlsTransport =\n            pc.transceivers[0].dtlsTransport;\n        if (pc.transceivers[sdpMLineIndex].rtpSender) {\n          pc.transceivers[sdpMLineIndex].rtpSender.setTransport(\n              pc.transceivers[0].dtlsTransport);\n        }\n        if (pc.transceivers[sdpMLineIndex].rtpReceiver) {\n          pc.transceivers[sdpMLineIndex].rtpReceiver.setTransport(\n              pc.transceivers[0].dtlsTransport);\n        }\n      }\n      if (description.type === 'offer' && !rejected) {\n        transceiver = pc.transceivers[sdpMLineIndex] ||\n            pc._createTransceiver(kind);\n        transceiver.mid = mid;\n\n        if (!transceiver.iceGatherer) {\n          transceiver.iceGatherer = pc._createIceGatherer(sdpMLineIndex,\n              usingBundle);\n        }\n\n        if (cands.length && transceiver.iceTransport.state === 'new') {\n          if (isComplete && (!usingBundle || sdpMLineIndex === 0)) {\n            transceiver.iceTransport.setRemoteCandidates(cands);\n          } else {\n            cands.forEach(function(candidate) {\n              maybeAddCandidate(transceiver.iceTransport, candidate);\n            });\n          }\n        }\n\n        localCapabilities = window.RTCRtpReceiver.getCapabilities(kind);\n\n        // filter RTX until additional stuff needed for RTX is implemented\n        // in adapter.js\n        if (edgeVersion < 15019) {\n          localCapabilities.codecs = localCapabilities.codecs.filter(\n              function(codec) {\n                return codec.name !== 'rtx';\n              });\n        }\n\n        sendEncodingParameters = transceiver.sendEncodingParameters || [{\n          ssrc: (2 * sdpMLineIndex + 2) * 1001\n        }];\n\n        // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams\n        var isNewTrack = false;\n        if (direction === 'sendrecv' || direction === 'sendonly') {\n          isNewTrack = !transceiver.rtpReceiver;\n          rtpReceiver = transceiver.rtpReceiver ||\n              new window.RTCRtpReceiver(transceiver.dtlsTransport, kind);\n\n          if (isNewTrack) {\n            var stream;\n            track = rtpReceiver.track;\n            // FIXME: does not work with Plan B.\n            if (remoteMsid && remoteMsid.stream === '-') {\n              // no-op. a stream id of '-' means: no associated stream.\n            } else if (remoteMsid) {\n              if (!streams[remoteMsid.stream]) {\n                streams[remoteMsid.stream] = new window.MediaStream();\n                Object.defineProperty(streams[remoteMsid.stream], 'id', {\n                  get: function() {\n                    return remoteMsid.stream;\n                  }\n                });\n              }\n              Object.defineProperty(track, 'id', {\n                get: function() {\n                  return remoteMsid.track;\n                }\n              });\n              stream = streams[remoteMsid.stream];\n            } else {\n              if (!streams.default) {\n                streams.default = new window.MediaStream();\n              }\n              stream = streams.default;\n            }\n            if (stream) {\n              addTrackToStreamAndFireEvent(track, stream);\n              transceiver.associatedRemoteMediaStreams.push(stream);\n            }\n            receiverList.push([track, rtpReceiver, stream]);\n          }\n        } else if (transceiver.rtpReceiver && transceiver.rtpReceiver.track) {\n          transceiver.associatedRemoteMediaStreams.forEach(function(s) {\n            var nativeTrack = s.getTracks().find(function(t) {\n              return t.id === transceiver.rtpReceiver.track.id;\n            });\n            if (nativeTrack) {\n              removeTrackFromStreamAndFireEvent(nativeTrack, s);\n            }\n          });\n          transceiver.associatedRemoteMediaStreams = [];\n        }\n\n        transceiver.localCapabilities = localCapabilities;\n        transceiver.remoteCapabilities = remoteCapabilities;\n        transceiver.rtpReceiver = rtpReceiver;\n        transceiver.rtcpParameters = rtcpParameters;\n        transceiver.sendEncodingParameters = sendEncodingParameters;\n        transceiver.recvEncodingParameters = recvEncodingParameters;\n\n        // Start the RTCRtpReceiver now. The RTPSender is started in\n        // setLocalDescription.\n        pc._transceive(pc.transceivers[sdpMLineIndex],\n            false,\n            isNewTrack);\n      } else if (description.type === 'answer' && !rejected) {\n        transceiver = pc.transceivers[sdpMLineIndex];\n        iceGatherer = transceiver.iceGatherer;\n        iceTransport = transceiver.iceTransport;\n        dtlsTransport = transceiver.dtlsTransport;\n        rtpReceiver = transceiver.rtpReceiver;\n        sendEncodingParameters = transceiver.sendEncodingParameters;\n        localCapabilities = transceiver.localCapabilities;\n\n        pc.transceivers[sdpMLineIndex].recvEncodingParameters =\n            recvEncodingParameters;\n        pc.transceivers[sdpMLineIndex].remoteCapabilities =\n            remoteCapabilities;\n        pc.transceivers[sdpMLineIndex].rtcpParameters = rtcpParameters;\n\n        if (cands.length && iceTransport.state === 'new') {\n          if ((isIceLite || isComplete) &&\n              (!usingBundle || sdpMLineIndex === 0)) {\n            iceTransport.setRemoteCandidates(cands);\n          } else {\n            cands.forEach(function(candidate) {\n              maybeAddCandidate(transceiver.iceTransport, candidate);\n            });\n          }\n        }\n\n        if (!usingBundle || sdpMLineIndex === 0) {\n          if (iceTransport.state === 'new') {\n            iceTransport.start(iceGatherer, remoteIceParameters,\n                'controlling');\n          }\n          if (dtlsTransport.state === 'new') {\n            dtlsTransport.start(remoteDtlsParameters);\n          }\n        }\n\n        // If the offer contained RTX but the answer did not,\n        // remove RTX from sendEncodingParameters.\n        var commonCapabilities = getCommonCapabilities(\n          transceiver.localCapabilities,\n          transceiver.remoteCapabilities);\n\n        var hasRtx = commonCapabilities.codecs.filter(function(c) {\n          return c.name.toLowerCase() === 'rtx';\n        }).length;\n        if (!hasRtx && transceiver.sendEncodingParameters[0].rtx) {\n          delete transceiver.sendEncodingParameters[0].rtx;\n        }\n\n        pc._transceive(transceiver,\n            direction === 'sendrecv' || direction === 'recvonly',\n            direction === 'sendrecv' || direction === 'sendonly');\n\n        // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams\n        if (rtpReceiver &&\n            (direction === 'sendrecv' || direction === 'sendonly')) {\n          track = rtpReceiver.track;\n          if (remoteMsid) {\n            if (!streams[remoteMsid.stream]) {\n              streams[remoteMsid.stream] = new window.MediaStream();\n            }\n            addTrackToStreamAndFireEvent(track, streams[remoteMsid.stream]);\n            receiverList.push([track, rtpReceiver, streams[remoteMsid.stream]]);\n          } else {\n            if (!streams.default) {\n              streams.default = new window.MediaStream();\n            }\n            addTrackToStreamAndFireEvent(track, streams.default);\n            receiverList.push([track, rtpReceiver, streams.default]);\n          }\n        } else {\n          // FIXME: actually the receiver should be created later.\n          delete transceiver.rtpReceiver;\n        }\n      }\n    });\n\n    if (pc._dtlsRole === undefined) {\n      pc._dtlsRole = description.type === 'offer' ? 'active' : 'passive';\n    }\n\n    pc._remoteDescription = {\n      type: description.type,\n      sdp: description.sdp\n    };\n    if (description.type === 'offer') {\n      pc._updateSignalingState('have-remote-offer');\n    } else {\n      pc._updateSignalingState('stable');\n    }\n    Object.keys(streams).forEach(function(sid) {\n      var stream = streams[sid];\n      if (stream.getTracks().length) {\n        if (pc.remoteStreams.indexOf(stream) === -1) {\n          pc.remoteStreams.push(stream);\n          var event = new Event('addstream');\n          event.stream = stream;\n          window.setTimeout(function() {\n            pc._dispatchEvent('addstream', event);\n          });\n        }\n\n        receiverList.forEach(function(item) {\n          var track = item[0];\n          var receiver = item[1];\n          if (stream.id !== item[2].id) {\n            return;\n          }\n          fireAddTrack(pc, track, receiver, [stream]);\n        });\n      }\n    });\n    receiverList.forEach(function(item) {\n      if (item[2]) {\n        return;\n      }\n      fireAddTrack(pc, item[0], item[1], []);\n    });\n\n    // check whether addIceCandidate({}) was called within four seconds after\n    // setRemoteDescription.\n    window.setTimeout(function() {\n      if (!(pc && pc.transceivers)) {\n        return;\n      }\n      pc.transceivers.forEach(function(transceiver) {\n        if (transceiver.iceTransport &&\n            transceiver.iceTransport.state === 'new' &&\n            transceiver.iceTransport.getRemoteCandidates().length > 0) {\n          console.warn('Timeout for addRemoteCandidate. Consider sending ' +\n              'an end-of-candidates notification');\n          transceiver.iceTransport.addRemoteCandidate({});\n        }\n      });\n    }, 4000);\n\n    return Promise.resolve();\n  };\n\n  RTCPeerConnection.prototype.close = function() {\n    this.transceivers.forEach(function(transceiver) {\n      /* not yet\n      if (transceiver.iceGatherer) {\n        transceiver.iceGatherer.close();\n      }\n      */\n      if (transceiver.iceTransport) {\n        transceiver.iceTransport.stop();\n      }\n      if (transceiver.dtlsTransport) {\n        transceiver.dtlsTransport.stop();\n      }\n      if (transceiver.rtpSender) {\n        transceiver.rtpSender.stop();\n      }\n      if (transceiver.rtpReceiver) {\n        transceiver.rtpReceiver.stop();\n      }\n    });\n    // FIXME: clean up tracks, local streams, remote streams, etc\n    this._isClosed = true;\n    this._updateSignalingState('closed');\n  };\n\n  // Update the signaling state.\n  RTCPeerConnection.prototype._updateSignalingState = function(newState) {\n    this.signalingState = newState;\n    var event = new Event('signalingstatechange');\n    this._dispatchEvent('signalingstatechange', event);\n  };\n\n  // Determine whether to fire the negotiationneeded event.\n  RTCPeerConnection.prototype._maybeFireNegotiationNeeded = function() {\n    var pc = this;\n    if (this.signalingState !== 'stable' || this.needNegotiation === true) {\n      return;\n    }\n    this.needNegotiation = true;\n    window.setTimeout(function() {\n      if (pc.needNegotiation) {\n        pc.needNegotiation = false;\n        var event = new Event('negotiationneeded');\n        pc._dispatchEvent('negotiationneeded', event);\n      }\n    }, 0);\n  };\n\n  // Update the ice connection state.\n  RTCPeerConnection.prototype._updateIceConnectionState = function() {\n    var newState;\n    var states = {\n      'new': 0,\n      closed: 0,\n      checking: 0,\n      connected: 0,\n      completed: 0,\n      disconnected: 0,\n      failed: 0\n    };\n    this.transceivers.forEach(function(transceiver) {\n      if (transceiver.iceTransport && !transceiver.rejected) {\n        states[transceiver.iceTransport.state]++;\n      }\n    });\n\n    newState = 'new';\n    if (states.failed > 0) {\n      newState = 'failed';\n    } else if (states.checking > 0) {\n      newState = 'checking';\n    } else if (states.disconnected > 0) {\n      newState = 'disconnected';\n    } else if (states.new > 0) {\n      newState = 'new';\n    } else if (states.connected > 0) {\n      newState = 'connected';\n    } else if (states.completed > 0) {\n      newState = 'completed';\n    }\n\n    if (newState !== this.iceConnectionState) {\n      this.iceConnectionState = newState;\n      var event = new Event('iceconnectionstatechange');\n      this._dispatchEvent('iceconnectionstatechange', event);\n    }\n  };\n\n  // Update the connection state.\n  RTCPeerConnection.prototype._updateConnectionState = function() {\n    var newState;\n    var states = {\n      'new': 0,\n      closed: 0,\n      connecting: 0,\n      connected: 0,\n      completed: 0,\n      disconnected: 0,\n      failed: 0\n    };\n    this.transceivers.forEach(function(transceiver) {\n      if (transceiver.iceTransport && transceiver.dtlsTransport &&\n          !transceiver.rejected) {\n        states[transceiver.iceTransport.state]++;\n        states[transceiver.dtlsTransport.state]++;\n      }\n    });\n    // ICETransport.completed and connected are the same for this purpose.\n    states.connected += states.completed;\n\n    newState = 'new';\n    if (states.failed > 0) {\n      newState = 'failed';\n    } else if (states.connecting > 0) {\n      newState = 'connecting';\n    } else if (states.disconnected > 0) {\n      newState = 'disconnected';\n    } else if (states.new > 0) {\n      newState = 'new';\n    } else if (states.connected > 0) {\n      newState = 'connected';\n    }\n\n    if (newState !== this.connectionState) {\n      this.connectionState = newState;\n      var event = new Event('connectionstatechange');\n      this._dispatchEvent('connectionstatechange', event);\n    }\n  };\n\n  RTCPeerConnection.prototype.createOffer = function() {\n    var pc = this;\n\n    if (pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not call createOffer after close'));\n    }\n\n    var numAudioTracks = pc.transceivers.filter(function(t) {\n      return t.kind === 'audio';\n    }).length;\n    var numVideoTracks = pc.transceivers.filter(function(t) {\n      return t.kind === 'video';\n    }).length;\n\n    // Determine number of audio and video tracks we need to send/recv.\n    var offerOptions = arguments[0];\n    if (offerOptions) {\n      // Reject Chrome legacy constraints.\n      if (offerOptions.mandatory || offerOptions.optional) {\n        throw new TypeError(\n            'Legacy mandatory/optional constraints not supported.');\n      }\n      if (offerOptions.offerToReceiveAudio !== undefined) {\n        if (offerOptions.offerToReceiveAudio === true) {\n          numAudioTracks = 1;\n        } else if (offerOptions.offerToReceiveAudio === false) {\n          numAudioTracks = 0;\n        } else {\n          numAudioTracks = offerOptions.offerToReceiveAudio;\n        }\n      }\n      if (offerOptions.offerToReceiveVideo !== undefined) {\n        if (offerOptions.offerToReceiveVideo === true) {\n          numVideoTracks = 1;\n        } else if (offerOptions.offerToReceiveVideo === false) {\n          numVideoTracks = 0;\n        } else {\n          numVideoTracks = offerOptions.offerToReceiveVideo;\n        }\n      }\n    }\n\n    pc.transceivers.forEach(function(transceiver) {\n      if (transceiver.kind === 'audio') {\n        numAudioTracks--;\n        if (numAudioTracks < 0) {\n          transceiver.wantReceive = false;\n        }\n      } else if (transceiver.kind === 'video') {\n        numVideoTracks--;\n        if (numVideoTracks < 0) {\n          transceiver.wantReceive = false;\n        }\n      }\n    });\n\n    // Create M-lines for recvonly streams.\n    while (numAudioTracks > 0 || numVideoTracks > 0) {\n      if (numAudioTracks > 0) {\n        pc._createTransceiver('audio');\n        numAudioTracks--;\n      }\n      if (numVideoTracks > 0) {\n        pc._createTransceiver('video');\n        numVideoTracks--;\n      }\n    }\n\n    var sdp = SDPUtils.writeSessionBoilerplate(pc._sdpSessionId,\n        pc._sdpSessionVersion++);\n    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      // For each track, create an ice gatherer, ice transport,\n      // dtls transport, potentially rtpsender and rtpreceiver.\n      var track = transceiver.track;\n      var kind = transceiver.kind;\n      var mid = transceiver.mid || SDPUtils.generateIdentifier();\n      transceiver.mid = mid;\n\n      if (!transceiver.iceGatherer) {\n        transceiver.iceGatherer = pc._createIceGatherer(sdpMLineIndex,\n            pc.usingBundle);\n      }\n\n      var localCapabilities = window.RTCRtpSender.getCapabilities(kind);\n      // filter RTX until additional stuff needed for RTX is implemented\n      // in adapter.js\n      if (edgeVersion < 15019) {\n        localCapabilities.codecs = localCapabilities.codecs.filter(\n            function(codec) {\n              return codec.name !== 'rtx';\n            });\n      }\n      localCapabilities.codecs.forEach(function(codec) {\n        // work around https://bugs.chromium.org/p/webrtc/issues/detail?id=6552\n        // by adding level-asymmetry-allowed=1\n        if (codec.name === 'H264' &&\n            codec.parameters['level-asymmetry-allowed'] === undefined) {\n          codec.parameters['level-asymmetry-allowed'] = '1';\n        }\n\n        // for subsequent offers, we might have to re-use the payload\n        // type of the last offer.\n        if (transceiver.remoteCapabilities &&\n            transceiver.remoteCapabilities.codecs) {\n          transceiver.remoteCapabilities.codecs.forEach(function(remoteCodec) {\n            if (codec.name.toLowerCase() === remoteCodec.name.toLowerCase() &&\n                codec.clockRate === remoteCodec.clockRate) {\n              codec.preferredPayloadType = remoteCodec.payloadType;\n            }\n          });\n        }\n      });\n      localCapabilities.headerExtensions.forEach(function(hdrExt) {\n        var remoteExtensions = transceiver.remoteCapabilities &&\n            transceiver.remoteCapabilities.headerExtensions || [];\n        remoteExtensions.forEach(function(rHdrExt) {\n          if (hdrExt.uri === rHdrExt.uri) {\n            hdrExt.id = rHdrExt.id;\n          }\n        });\n      });\n\n      // generate an ssrc now, to be used later in rtpSender.send\n      var sendEncodingParameters = transceiver.sendEncodingParameters || [{\n        ssrc: (2 * sdpMLineIndex + 1) * 1001\n      }];\n      if (track) {\n        // add RTX\n        if (edgeVersion >= 15019 && kind === 'video' &&\n            !sendEncodingParameters[0].rtx) {\n          sendEncodingParameters[0].rtx = {\n            ssrc: sendEncodingParameters[0].ssrc + 1\n          };\n        }\n      }\n\n      if (transceiver.wantReceive) {\n        transceiver.rtpReceiver = new window.RTCRtpReceiver(\n            transceiver.dtlsTransport, kind);\n      }\n\n      transceiver.localCapabilities = localCapabilities;\n      transceiver.sendEncodingParameters = sendEncodingParameters;\n    });\n\n    // always offer BUNDLE and dispose on return if not supported.\n    if (pc._config.bundlePolicy !== 'max-compat') {\n      sdp += 'a=group:BUNDLE ' + pc.transceivers.map(function(t) {\n        return t.mid;\n      }).join(' ') + '\\r\\n';\n    }\n    sdp += 'a=ice-options:trickle\\r\\n';\n\n    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      sdp += writeMediaSection(transceiver, transceiver.localCapabilities,\n          'offer', transceiver.stream, pc._dtlsRole);\n      sdp += 'a=rtcp-rsize\\r\\n';\n\n      if (transceiver.iceGatherer && pc.iceGatheringState !== 'new' &&\n          (sdpMLineIndex === 0 || !pc.usingBundle)) {\n        transceiver.iceGatherer.getLocalCandidates().forEach(function(cand) {\n          cand.component = 1;\n          sdp += 'a=' + SDPUtils.writeCandidate(cand) + '\\r\\n';\n        });\n\n        if (transceiver.iceGatherer.state === 'completed') {\n          sdp += 'a=end-of-candidates\\r\\n';\n        }\n      }\n    });\n\n    var desc = new window.RTCSessionDescription({\n      type: 'offer',\n      sdp: sdp\n    });\n    return Promise.resolve(desc);\n  };\n\n  RTCPeerConnection.prototype.createAnswer = function() {\n    var pc = this;\n\n    if (pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not call createAnswer after close'));\n    }\n\n    if (!(pc.signalingState === 'have-remote-offer' ||\n        pc.signalingState === 'have-local-pranswer')) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not call createAnswer in signalingState ' + pc.signalingState));\n    }\n\n    var sdp = SDPUtils.writeSessionBoilerplate(pc._sdpSessionId,\n        pc._sdpSessionVersion++);\n    if (pc.usingBundle) {\n      sdp += 'a=group:BUNDLE ' + pc.transceivers.map(function(t) {\n        return t.mid;\n      }).join(' ') + '\\r\\n';\n    }\n    sdp += 'a=ice-options:trickle\\r\\n';\n\n    var mediaSectionsInOffer = SDPUtils.getMediaSections(\n        pc._remoteDescription.sdp).length;\n    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      if (sdpMLineIndex + 1 > mediaSectionsInOffer) {\n        return;\n      }\n      if (transceiver.rejected) {\n        if (transceiver.kind === 'application') {\n          if (transceiver.protocol === 'DTLS/SCTP') { // legacy fmt\n            sdp += 'm=application 0 DTLS/SCTP 5000\\r\\n';\n          } else {\n            sdp += 'm=application 0 ' + transceiver.protocol +\n                ' webrtc-datachannel\\r\\n';\n          }\n        } else if (transceiver.kind === 'audio') {\n          sdp += 'm=audio 0 UDP/TLS/RTP/SAVPF 0\\r\\n' +\n              'a=rtpmap:0 PCMU/8000\\r\\n';\n        } else if (transceiver.kind === 'video') {\n          sdp += 'm=video 0 UDP/TLS/RTP/SAVPF 120\\r\\n' +\n              'a=rtpmap:120 VP8/90000\\r\\n';\n        }\n        sdp += 'c=IN IP4 0.0.0.0\\r\\n' +\n            'a=inactive\\r\\n' +\n            'a=mid:' + transceiver.mid + '\\r\\n';\n        return;\n      }\n\n      // FIXME: look at direction.\n      if (transceiver.stream) {\n        var localTrack;\n        if (transceiver.kind === 'audio') {\n          localTrack = transceiver.stream.getAudioTracks()[0];\n        } else if (transceiver.kind === 'video') {\n          localTrack = transceiver.stream.getVideoTracks()[0];\n        }\n        if (localTrack) {\n          // add RTX\n          if (edgeVersion >= 15019 && transceiver.kind === 'video' &&\n              !transceiver.sendEncodingParameters[0].rtx) {\n            transceiver.sendEncodingParameters[0].rtx = {\n              ssrc: transceiver.sendEncodingParameters[0].ssrc + 1\n            };\n          }\n        }\n      }\n\n      // Calculate intersection of capabilities.\n      var commonCapabilities = getCommonCapabilities(\n          transceiver.localCapabilities,\n          transceiver.remoteCapabilities);\n\n      var hasRtx = commonCapabilities.codecs.filter(function(c) {\n        return c.name.toLowerCase() === 'rtx';\n      }).length;\n      if (!hasRtx && transceiver.sendEncodingParameters[0].rtx) {\n        delete transceiver.sendEncodingParameters[0].rtx;\n      }\n\n      sdp += writeMediaSection(transceiver, commonCapabilities,\n          'answer', transceiver.stream, pc._dtlsRole);\n      if (transceiver.rtcpParameters &&\n          transceiver.rtcpParameters.reducedSize) {\n        sdp += 'a=rtcp-rsize\\r\\n';\n      }\n    });\n\n    var desc = new window.RTCSessionDescription({\n      type: 'answer',\n      sdp: sdp\n    });\n    return Promise.resolve(desc);\n  };\n\n  RTCPeerConnection.prototype.addIceCandidate = function(candidate) {\n    var pc = this;\n    var sections;\n    if (candidate && !(candidate.sdpMLineIndex !== undefined ||\n        candidate.sdpMid)) {\n      return Promise.reject(new TypeError('sdpMLineIndex or sdpMid required'));\n    }\n\n    // TODO: needs to go into ops queue.\n    return new Promise(function(resolve, reject) {\n      if (!pc._remoteDescription) {\n        return reject(makeError('InvalidStateError',\n            'Can not add ICE candidate without a remote description'));\n      } else if (!candidate || candidate.candidate === '') {\n        for (var j = 0; j < pc.transceivers.length; j++) {\n          if (pc.transceivers[j].rejected) {\n            continue;\n          }\n          pc.transceivers[j].iceTransport.addRemoteCandidate({});\n          sections = SDPUtils.getMediaSections(pc._remoteDescription.sdp);\n          sections[j] += 'a=end-of-candidates\\r\\n';\n          pc._remoteDescription.sdp =\n              SDPUtils.getDescription(pc._remoteDescription.sdp) +\n              sections.join('');\n          if (pc.usingBundle) {\n            break;\n          }\n        }\n      } else {\n        var sdpMLineIndex = candidate.sdpMLineIndex;\n        if (candidate.sdpMid) {\n          for (var i = 0; i < pc.transceivers.length; i++) {\n            if (pc.transceivers[i].mid === candidate.sdpMid) {\n              sdpMLineIndex = i;\n              break;\n            }\n          }\n        }\n        var transceiver = pc.transceivers[sdpMLineIndex];\n        if (transceiver) {\n          if (transceiver.rejected) {\n            return resolve();\n          }\n          var cand = Object.keys(candidate.candidate).length > 0 ?\n              SDPUtils.parseCandidate(candidate.candidate) : {};\n          // Ignore Chrome's invalid candidates since Edge does not like them.\n          if (cand.protocol === 'tcp' && (cand.port === 0 || cand.port === 9)) {\n            return resolve();\n          }\n          // Ignore RTCP candidates, we assume RTCP-MUX.\n          if (cand.component && cand.component !== 1) {\n            return resolve();\n          }\n          // when using bundle, avoid adding candidates to the wrong\n          // ice transport. And avoid adding candidates added in the SDP.\n          if (sdpMLineIndex === 0 || (sdpMLineIndex > 0 &&\n              transceiver.iceTransport !== pc.transceivers[0].iceTransport)) {\n            if (!maybeAddCandidate(transceiver.iceTransport, cand)) {\n              return reject(makeError('OperationError',\n                  'Can not add ICE candidate'));\n            }\n          }\n\n          // update the remoteDescription.\n          var candidateString = candidate.candidate.trim();\n          if (candidateString.indexOf('a=') === 0) {\n            candidateString = candidateString.substr(2);\n          }\n          sections = SDPUtils.getMediaSections(pc._remoteDescription.sdp);\n          sections[sdpMLineIndex] += 'a=' +\n              (cand.type ? candidateString : 'end-of-candidates')\n              + '\\r\\n';\n          pc._remoteDescription.sdp =\n              SDPUtils.getDescription(pc._remoteDescription.sdp) +\n              sections.join('');\n        } else {\n          return reject(makeError('OperationError',\n              'Can not add ICE candidate'));\n        }\n      }\n      resolve();\n    });\n  };\n\n  RTCPeerConnection.prototype.getStats = function(selector) {\n    if (selector && selector instanceof window.MediaStreamTrack) {\n      var senderOrReceiver = null;\n      this.transceivers.forEach(function(transceiver) {\n        if (transceiver.rtpSender &&\n            transceiver.rtpSender.track === selector) {\n          senderOrReceiver = transceiver.rtpSender;\n        } else if (transceiver.rtpReceiver &&\n            transceiver.rtpReceiver.track === selector) {\n          senderOrReceiver = transceiver.rtpReceiver;\n        }\n      });\n      if (!senderOrReceiver) {\n        throw makeError('InvalidAccessError', 'Invalid selector.');\n      }\n      return senderOrReceiver.getStats();\n    }\n\n    var promises = [];\n    this.transceivers.forEach(function(transceiver) {\n      ['rtpSender', 'rtpReceiver', 'iceGatherer', 'iceTransport',\n          'dtlsTransport'].forEach(function(method) {\n            if (transceiver[method]) {\n              promises.push(transceiver[method].getStats());\n            }\n          });\n    });\n    return Promise.all(promises).then(function(allStats) {\n      var results = new Map();\n      allStats.forEach(function(stats) {\n        stats.forEach(function(stat) {\n          results.set(stat.id, stat);\n        });\n      });\n      return results;\n    });\n  };\n\n  // fix low-level stat names and return Map instead of object.\n  var ortcObjects = ['RTCRtpSender', 'RTCRtpReceiver', 'RTCIceGatherer',\n    'RTCIceTransport', 'RTCDtlsTransport'];\n  ortcObjects.forEach(function(ortcObjectName) {\n    var obj = window[ortcObjectName];\n    if (obj && obj.prototype && obj.prototype.getStats) {\n      var nativeGetstats = obj.prototype.getStats;\n      obj.prototype.getStats = function() {\n        return nativeGetstats.apply(this)\n        .then(function(nativeStats) {\n          var mapStats = new Map();\n          Object.keys(nativeStats).forEach(function(id) {\n            nativeStats[id].type = fixStatsType(nativeStats[id]);\n            mapStats.set(id, nativeStats[id]);\n          });\n          return mapStats;\n        });\n      };\n    }\n  });\n\n  // legacy callback shims. Should be moved to adapter.js some days.\n  var methods = ['createOffer', 'createAnswer'];\n  methods.forEach(function(method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n    RTCPeerConnection.prototype[method] = function() {\n      var args = arguments;\n      if (typeof args[0] === 'function' ||\n          typeof args[1] === 'function') { // legacy\n        return nativeMethod.apply(this, [arguments[2]])\n        .then(function(description) {\n          if (typeof args[0] === 'function') {\n            args[0].apply(null, [description]);\n          }\n        }, function(error) {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null, [error]);\n          }\n        });\n      }\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n\n  methods = ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate'];\n  methods.forEach(function(method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n    RTCPeerConnection.prototype[method] = function() {\n      var args = arguments;\n      if (typeof args[1] === 'function' ||\n          typeof args[2] === 'function') { // legacy\n        return nativeMethod.apply(this, arguments)\n        .then(function() {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null);\n          }\n        }, function(error) {\n          if (typeof args[2] === 'function') {\n            args[2].apply(null, [error]);\n          }\n        });\n      }\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n\n  // getStats is special. It doesn't have a spec legacy method yet we support\n  // getStats(something, cb) without error callbacks.\n  ['getStats'].forEach(function(method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n    RTCPeerConnection.prototype[method] = function() {\n      var args = arguments;\n      if (typeof args[1] === 'function') {\n        return nativeMethod.apply(this, arguments)\n        .then(function() {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null);\n          }\n        });\n      }\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n\n  return RTCPeerConnection;\n};\n\n},{\"sdp\":17}],17:[function(require,module,exports){\n/* eslint-env node */\n'use strict';\n\n// SDP helpers.\nvar SDPUtils = {};\n\n// Generate an alphanumeric identifier for cname or mids.\n// TODO: use UUIDs instead? https://gist.github.com/jed/982883\nSDPUtils.generateIdentifier = function() {\n  return Math.random().toString(36).substr(2, 10);\n};\n\n// The RTCP CNAME used by all peerconnections from the same JS.\nSDPUtils.localCName = SDPUtils.generateIdentifier();\n\n// Splits SDP into lines, dealing with both CRLF and LF.\nSDPUtils.splitLines = function(blob) {\n  return blob.trim().split('\\n').map(function(line) {\n    return line.trim();\n  });\n};\n// Splits SDP into sessionpart and mediasections. Ensures CRLF.\nSDPUtils.splitSections = function(blob) {\n  var parts = blob.split('\\nm=');\n  return parts.map(function(part, index) {\n    return (index > 0 ? 'm=' + part : part).trim() + '\\r\\n';\n  });\n};\n\n// returns the session description.\nSDPUtils.getDescription = function(blob) {\n  var sections = SDPUtils.splitSections(blob);\n  return sections && sections[0];\n};\n\n// returns the individual media sections.\nSDPUtils.getMediaSections = function(blob) {\n  var sections = SDPUtils.splitSections(blob);\n  sections.shift();\n  return sections;\n};\n\n// Returns lines that start with a certain prefix.\nSDPUtils.matchPrefix = function(blob, prefix) {\n  return SDPUtils.splitLines(blob).filter(function(line) {\n    return line.indexOf(prefix) === 0;\n  });\n};\n\n// Parses an ICE candidate line. Sample input:\n// candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\n// rport 55996\"\nSDPUtils.parseCandidate = function(line) {\n  var parts;\n  // Parse both variants.\n  if (line.indexOf('a=candidate:') === 0) {\n    parts = line.substring(12).split(' ');\n  } else {\n    parts = line.substring(10).split(' ');\n  }\n\n  var candidate = {\n    foundation: parts[0],\n    component: parseInt(parts[1], 10),\n    protocol: parts[2].toLowerCase(),\n    priority: parseInt(parts[3], 10),\n    ip: parts[4],\n    address: parts[4], // address is an alias for ip.\n    port: parseInt(parts[5], 10),\n    // skip parts[6] == 'typ'\n    type: parts[7]\n  };\n\n  for (var i = 8; i < parts.length; i += 2) {\n    switch (parts[i]) {\n      case 'raddr':\n        candidate.relatedAddress = parts[i + 1];\n        break;\n      case 'rport':\n        candidate.relatedPort = parseInt(parts[i + 1], 10);\n        break;\n      case 'tcptype':\n        candidate.tcpType = parts[i + 1];\n        break;\n      case 'ufrag':\n        candidate.ufrag = parts[i + 1]; // for backward compability.\n        candidate.usernameFragment = parts[i + 1];\n        break;\n      default: // extension handling, in particular ufrag\n        candidate[parts[i]] = parts[i + 1];\n        break;\n    }\n  }\n  return candidate;\n};\n\n// Translates a candidate object into SDP candidate attribute.\nSDPUtils.writeCandidate = function(candidate) {\n  var sdp = [];\n  sdp.push(candidate.foundation);\n  sdp.push(candidate.component);\n  sdp.push(candidate.protocol.toUpperCase());\n  sdp.push(candidate.priority);\n  sdp.push(candidate.address || candidate.ip);\n  sdp.push(candidate.port);\n\n  var type = candidate.type;\n  sdp.push('typ');\n  sdp.push(type);\n  if (type !== 'host' && candidate.relatedAddress &&\n      candidate.relatedPort) {\n    sdp.push('raddr');\n    sdp.push(candidate.relatedAddress);\n    sdp.push('rport');\n    sdp.push(candidate.relatedPort);\n  }\n  if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {\n    sdp.push('tcptype');\n    sdp.push(candidate.tcpType);\n  }\n  if (candidate.usernameFragment || candidate.ufrag) {\n    sdp.push('ufrag');\n    sdp.push(candidate.usernameFragment || candidate.ufrag);\n  }\n  return 'candidate:' + sdp.join(' ');\n};\n\n// Parses an ice-options line, returns an array of option tags.\n// a=ice-options:foo bar\nSDPUtils.parseIceOptions = function(line) {\n  return line.substr(14).split(' ');\n};\n\n// Parses an rtpmap line, returns RTCRtpCoddecParameters. Sample input:\n// a=rtpmap:111 opus/48000/2\nSDPUtils.parseRtpMap = function(line) {\n  var parts = line.substr(9).split(' ');\n  var parsed = {\n    payloadType: parseInt(parts.shift(), 10) // was: id\n  };\n\n  parts = parts[0].split('/');\n\n  parsed.name = parts[0];\n  parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\n  parsed.channels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\n  // legacy alias, got renamed back to channels in ORTC.\n  parsed.numChannels = parsed.channels;\n  return parsed;\n};\n\n// Generate an a=rtpmap line from RTCRtpCodecCapability or\n// RTCRtpCodecParameters.\nSDPUtils.writeRtpMap = function(codec) {\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  var channels = codec.channels || codec.numChannels || 1;\n  return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +\n      (channels !== 1 ? '/' + channels : '') + '\\r\\n';\n};\n\n// Parses an a=extmap line (headerextension from RFC 5285). Sample input:\n// a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n// a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset\nSDPUtils.parseExtmap = function(line) {\n  var parts = line.substr(9).split(' ');\n  return {\n    id: parseInt(parts[0], 10),\n    direction: parts[0].indexOf('/') > 0 ? parts[0].split('/')[1] : 'sendrecv',\n    uri: parts[1]\n  };\n};\n\n// Generates a=extmap line from RTCRtpHeaderExtensionParameters or\n// RTCRtpHeaderExtension.\nSDPUtils.writeExtmap = function(headerExtension) {\n  return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +\n      (headerExtension.direction && headerExtension.direction !== 'sendrecv'\n        ? '/' + headerExtension.direction\n        : '') +\n      ' ' + headerExtension.uri + '\\r\\n';\n};\n\n// Parses an ftmp line, returns dictionary. Sample input:\n// a=fmtp:96 vbr=on;cng=on\n// Also deals with vbr=on; cng=on\nSDPUtils.parseFmtp = function(line) {\n  var parsed = {};\n  var kv;\n  var parts = line.substr(line.indexOf(' ') + 1).split(';');\n  for (var j = 0; j < parts.length; j++) {\n    kv = parts[j].trim().split('=');\n    parsed[kv[0].trim()] = kv[1];\n  }\n  return parsed;\n};\n\n// Generates an a=ftmp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeFmtp = function(codec) {\n  var line = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.parameters && Object.keys(codec.parameters).length) {\n    var params = [];\n    Object.keys(codec.parameters).forEach(function(param) {\n      if (codec.parameters[param]) {\n        params.push(param + '=' + codec.parameters[param]);\n      } else {\n        params.push(param);\n      }\n    });\n    line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\\r\\n';\n  }\n  return line;\n};\n\n// Parses an rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\n// a=rtcp-fb:98 nack rpsi\nSDPUtils.parseRtcpFb = function(line) {\n  var parts = line.substr(line.indexOf(' ') + 1).split(' ');\n  return {\n    type: parts.shift(),\n    parameter: parts.join(' ')\n  };\n};\n// Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeRtcpFb = function(codec) {\n  var lines = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\n    // FIXME: special handling for trr-int?\n    codec.rtcpFeedback.forEach(function(fb) {\n      lines += 'a=rtcp-fb:' + pt + ' ' + fb.type +\n      (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') +\n          '\\r\\n';\n    });\n  }\n  return lines;\n};\n\n// Parses an RFC 5576 ssrc media attribute. Sample input:\n// a=ssrc:3735928559 cname:something\nSDPUtils.parseSsrcMedia = function(line) {\n  var sp = line.indexOf(' ');\n  var parts = {\n    ssrc: parseInt(line.substr(7, sp - 7), 10)\n  };\n  var colon = line.indexOf(':', sp);\n  if (colon > -1) {\n    parts.attribute = line.substr(sp + 1, colon - sp - 1);\n    parts.value = line.substr(colon + 1);\n  } else {\n    parts.attribute = line.substr(sp + 1);\n  }\n  return parts;\n};\n\nSDPUtils.parseSsrcGroup = function(line) {\n  var parts = line.substr(13).split(' ');\n  return {\n    semantics: parts.shift(),\n    ssrcs: parts.map(function(ssrc) {\n      return parseInt(ssrc, 10);\n    })\n  };\n};\n\n// Extracts the MID (RFC 5888) from a media section.\n// returns the MID or undefined if no mid line was found.\nSDPUtils.getMid = function(mediaSection) {\n  var mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:')[0];\n  if (mid) {\n    return mid.substr(6);\n  }\n};\n\nSDPUtils.parseFingerprint = function(line) {\n  var parts = line.substr(14).split(' ');\n  return {\n    algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.\n    value: parts[1]\n  };\n};\n\n// Extracts DTLS parameters from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the fingerprint line as input. See also getIceParameters.\nSDPUtils.getDtlsParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=fingerprint:');\n  // Note: a=setup line is ignored since we use the 'auto' role.\n  // Note2: 'algorithm' is not case sensitive except in Edge.\n  return {\n    role: 'auto',\n    fingerprints: lines.map(SDPUtils.parseFingerprint)\n  };\n};\n\n// Serializes DTLS parameters to SDP.\nSDPUtils.writeDtlsParameters = function(params, setupType) {\n  var sdp = 'a=setup:' + setupType + '\\r\\n';\n  params.fingerprints.forEach(function(fp) {\n    sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\\r\\n';\n  });\n  return sdp;\n};\n\n// Parses a=crypto lines into\n//   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#dictionary-rtcsrtpsdesparameters-members\nSDPUtils.parseCryptoLine = function(line) {\n  var parts = line.substr(9).split(' ');\n  return {\n    tag: parseInt(parts[0], 10),\n    cryptoSuite: parts[1],\n    keyParams: parts[2],\n    sessionParams: parts.slice(3),\n  };\n};\n\nSDPUtils.writeCryptoLine = function(parameters) {\n  return 'a=crypto:' + parameters.tag + ' ' +\n    parameters.cryptoSuite + ' ' +\n    (typeof parameters.keyParams === 'object'\n      ? SDPUtils.writeCryptoKeyParams(parameters.keyParams)\n      : parameters.keyParams) +\n    (parameters.sessionParams ? ' ' + parameters.sessionParams.join(' ') : '') +\n    '\\r\\n';\n};\n\n// Parses the crypto key parameters into\n//   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#rtcsrtpkeyparam*\nSDPUtils.parseCryptoKeyParams = function(keyParams) {\n  if (keyParams.indexOf('inline:') !== 0) {\n    return null;\n  }\n  var parts = keyParams.substr(7).split('|');\n  return {\n    keyMethod: 'inline',\n    keySalt: parts[0],\n    lifeTime: parts[1],\n    mkiValue: parts[2] ? parts[2].split(':')[0] : undefined,\n    mkiLength: parts[2] ? parts[2].split(':')[1] : undefined,\n  };\n};\n\nSDPUtils.writeCryptoKeyParams = function(keyParams) {\n  return keyParams.keyMethod + ':'\n    + keyParams.keySalt +\n    (keyParams.lifeTime ? '|' + keyParams.lifeTime : '') +\n    (keyParams.mkiValue && keyParams.mkiLength\n      ? '|' + keyParams.mkiValue + ':' + keyParams.mkiLength\n      : '');\n};\n\n// Extracts all SDES paramters.\nSDPUtils.getCryptoParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=crypto:');\n  return lines.map(SDPUtils.parseCryptoLine);\n};\n\n// Parses ICE information from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the ice-ufrag and ice-pwd lines as input.\nSDPUtils.getIceParameters = function(mediaSection, sessionpart) {\n  var ufrag = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=ice-ufrag:')[0];\n  var pwd = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=ice-pwd:')[0];\n  if (!(ufrag && pwd)) {\n    return null;\n  }\n  return {\n    usernameFragment: ufrag.substr(12),\n    password: pwd.substr(10),\n  };\n};\n\n// Serializes ICE parameters to SDP.\nSDPUtils.writeIceParameters = function(params) {\n  return 'a=ice-ufrag:' + params.usernameFragment + '\\r\\n' +\n      'a=ice-pwd:' + params.password + '\\r\\n';\n};\n\n// Parses the SDP media section and returns RTCRtpParameters.\nSDPUtils.parseRtpParameters = function(mediaSection) {\n  var description = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: [],\n    rtcp: []\n  };\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  for (var i = 3; i < mline.length; i++) { // find all codecs from mline[3..]\n    var pt = mline[i];\n    var rtpmapline = SDPUtils.matchPrefix(\n      mediaSection, 'a=rtpmap:' + pt + ' ')[0];\n    if (rtpmapline) {\n      var codec = SDPUtils.parseRtpMap(rtpmapline);\n      var fmtps = SDPUtils.matchPrefix(\n        mediaSection, 'a=fmtp:' + pt + ' ');\n      // Only the first a=fmtp:<pt> is considered.\n      codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};\n      codec.rtcpFeedback = SDPUtils.matchPrefix(\n        mediaSection, 'a=rtcp-fb:' + pt + ' ')\n        .map(SDPUtils.parseRtcpFb);\n      description.codecs.push(codec);\n      // parse FEC mechanisms from rtpmap lines.\n      switch (codec.name.toUpperCase()) {\n        case 'RED':\n        case 'ULPFEC':\n          description.fecMechanisms.push(codec.name.toUpperCase());\n          break;\n        default: // only RED and ULPFEC are recognized as FEC mechanisms.\n          break;\n      }\n    }\n  }\n  SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(function(line) {\n    description.headerExtensions.push(SDPUtils.parseExtmap(line));\n  });\n  // FIXME: parse rtcp.\n  return description;\n};\n\n// Generates parts of the SDP media section describing the capabilities /\n// parameters.\nSDPUtils.writeRtpDescription = function(kind, caps) {\n  var sdp = '';\n\n  // Build the mline.\n  sdp += 'm=' + kind + ' ';\n  sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.\n  sdp += ' UDP/TLS/RTP/SAVPF ';\n  sdp += caps.codecs.map(function(codec) {\n    if (codec.preferredPayloadType !== undefined) {\n      return codec.preferredPayloadType;\n    }\n    return codec.payloadType;\n  }).join(' ') + '\\r\\n';\n\n  sdp += 'c=IN IP4 0.0.0.0\\r\\n';\n  sdp += 'a=rtcp:9 IN IP4 0.0.0.0\\r\\n';\n\n  // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\n  caps.codecs.forEach(function(codec) {\n    sdp += SDPUtils.writeRtpMap(codec);\n    sdp += SDPUtils.writeFmtp(codec);\n    sdp += SDPUtils.writeRtcpFb(codec);\n  });\n  var maxptime = 0;\n  caps.codecs.forEach(function(codec) {\n    if (codec.maxptime > maxptime) {\n      maxptime = codec.maxptime;\n    }\n  });\n  if (maxptime > 0) {\n    sdp += 'a=maxptime:' + maxptime + '\\r\\n';\n  }\n  sdp += 'a=rtcp-mux\\r\\n';\n\n  if (caps.headerExtensions) {\n    caps.headerExtensions.forEach(function(extension) {\n      sdp += SDPUtils.writeExtmap(extension);\n    });\n  }\n  // FIXME: write fecMechanisms.\n  return sdp;\n};\n\n// Parses the SDP media section and returns an array of\n// RTCRtpEncodingParameters.\nSDPUtils.parseRtpEncodingParameters = function(mediaSection) {\n  var encodingParameters = [];\n  var description = SDPUtils.parseRtpParameters(mediaSection);\n  var hasRed = description.fecMechanisms.indexOf('RED') !== -1;\n  var hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;\n\n  // filter a=ssrc:... cname:, ignore PlanB-msid\n  var ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(function(line) {\n      return SDPUtils.parseSsrcMedia(line);\n    })\n    .filter(function(parts) {\n      return parts.attribute === 'cname';\n    });\n  var primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\n  var secondarySsrc;\n\n  var flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')\n    .map(function(line) {\n      var parts = line.substr(17).split(' ');\n      return parts.map(function(part) {\n        return parseInt(part, 10);\n      });\n    });\n  if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {\n    secondarySsrc = flows[0][1];\n  }\n\n  description.codecs.forEach(function(codec) {\n    if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {\n      var encParam = {\n        ssrc: primarySsrc,\n        codecPayloadType: parseInt(codec.parameters.apt, 10)\n      };\n      if (primarySsrc && secondarySsrc) {\n        encParam.rtx = {ssrc: secondarySsrc};\n      }\n      encodingParameters.push(encParam);\n      if (hasRed) {\n        encParam = JSON.parse(JSON.stringify(encParam));\n        encParam.fec = {\n          ssrc: primarySsrc,\n          mechanism: hasUlpfec ? 'red+ulpfec' : 'red'\n        };\n        encodingParameters.push(encParam);\n      }\n    }\n  });\n  if (encodingParameters.length === 0 && primarySsrc) {\n    encodingParameters.push({\n      ssrc: primarySsrc\n    });\n  }\n\n  // we support both b=AS and b=TIAS but interpret AS as TIAS.\n  var bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');\n  if (bandwidth.length) {\n    if (bandwidth[0].indexOf('b=TIAS:') === 0) {\n      bandwidth = parseInt(bandwidth[0].substr(7), 10);\n    } else if (bandwidth[0].indexOf('b=AS:') === 0) {\n      // use formula from JSEP to convert b=AS to TIAS value.\n      bandwidth = parseInt(bandwidth[0].substr(5), 10) * 1000 * 0.95\n          - (50 * 40 * 8);\n    } else {\n      bandwidth = undefined;\n    }\n    encodingParameters.forEach(function(params) {\n      params.maxBitrate = bandwidth;\n    });\n  }\n  return encodingParameters;\n};\n\n// parses http://draft.ortc.org/#rtcrtcpparameters*\nSDPUtils.parseRtcpParameters = function(mediaSection) {\n  var rtcpParameters = {};\n\n  // Gets the first SSRC. Note tha with RTX there might be multiple\n  // SSRCs.\n  var remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(function(line) {\n      return SDPUtils.parseSsrcMedia(line);\n    })\n    .filter(function(obj) {\n      return obj.attribute === 'cname';\n    })[0];\n  if (remoteSsrc) {\n    rtcpParameters.cname = remoteSsrc.value;\n    rtcpParameters.ssrc = remoteSsrc.ssrc;\n  }\n\n  // Edge uses the compound attribute instead of reducedSize\n  // compound is !reducedSize\n  var rsize = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-rsize');\n  rtcpParameters.reducedSize = rsize.length > 0;\n  rtcpParameters.compound = rsize.length === 0;\n\n  // parses the rtcp-mux attrbute.\n  // Note that Edge does not support unmuxed RTCP.\n  var mux = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-mux');\n  rtcpParameters.mux = mux.length > 0;\n\n  return rtcpParameters;\n};\n\n// parses either a=msid: or a=ssrc:... msid lines and returns\n// the id of the MediaStream and MediaStreamTrack.\nSDPUtils.parseMsid = function(mediaSection) {\n  var parts;\n  var spec = SDPUtils.matchPrefix(mediaSection, 'a=msid:');\n  if (spec.length === 1) {\n    parts = spec[0].substr(7).split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n  var planB = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(function(line) {\n      return SDPUtils.parseSsrcMedia(line);\n    })\n    .filter(function(msidParts) {\n      return msidParts.attribute === 'msid';\n    });\n  if (planB.length > 0) {\n    parts = planB[0].value.split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n};\n\n// SCTP\n// parses draft-ietf-mmusic-sctp-sdp-26 first and falls back\n// to draft-ietf-mmusic-sctp-sdp-05\nSDPUtils.parseSctpDescription = function(mediaSection) {\n  var mline = SDPUtils.parseMLine(mediaSection);\n  var maxSizeLine = SDPUtils.matchPrefix(mediaSection, 'a=max-message-size:');\n  var maxMessageSize;\n  if (maxSizeLine.length > 0) {\n    maxMessageSize = parseInt(maxSizeLine[0].substr(19), 10);\n  }\n  if (isNaN(maxMessageSize)) {\n    maxMessageSize = 65536;\n  }\n  var sctpPort = SDPUtils.matchPrefix(mediaSection, 'a=sctp-port:');\n  if (sctpPort.length > 0) {\n    return {\n      port: parseInt(sctpPort[0].substr(12), 10),\n      protocol: mline.fmt,\n      maxMessageSize: maxMessageSize\n    };\n  }\n  var sctpMapLines = SDPUtils.matchPrefix(mediaSection, 'a=sctpmap:');\n  if (sctpMapLines.length > 0) {\n    var parts = SDPUtils.matchPrefix(mediaSection, 'a=sctpmap:')[0]\n      .substr(10)\n      .split(' ');\n    return {\n      port: parseInt(parts[0], 10),\n      protocol: parts[1],\n      maxMessageSize: maxMessageSize\n    };\n  }\n};\n\n// SCTP\n// outputs the draft-ietf-mmusic-sctp-sdp-26 version that all browsers\n// support by now receiving in this format, unless we originally parsed\n// as the draft-ietf-mmusic-sctp-sdp-05 format (indicated by the m-line\n// protocol of DTLS/SCTP -- without UDP/ or TCP/)\nSDPUtils.writeSctpDescription = function(media, sctp) {\n  var output = [];\n  if (media.protocol !== 'DTLS/SCTP') {\n    output = [\n      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.protocol + '\\r\\n',\n      'c=IN IP4 0.0.0.0\\r\\n',\n      'a=sctp-port:' + sctp.port + '\\r\\n'\n    ];\n  } else {\n    output = [\n      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.port + '\\r\\n',\n      'c=IN IP4 0.0.0.0\\r\\n',\n      'a=sctpmap:' + sctp.port + ' ' + sctp.protocol + ' 65535\\r\\n'\n    ];\n  }\n  if (sctp.maxMessageSize !== undefined) {\n    output.push('a=max-message-size:' + sctp.maxMessageSize + '\\r\\n');\n  }\n  return output.join('');\n};\n\n// Generate a session ID for SDP.\n// https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-20#section-5.2.1\n// recommends using a cryptographically random +ve 64-bit value\n// but right now this should be acceptable and within the right range\nSDPUtils.generateSessionId = function() {\n  return Math.random().toString().substr(2, 21);\n};\n\n// Write boilder plate for start of SDP\n// sessId argument is optional - if not supplied it will\n// be generated randomly\n// sessVersion is optional and defaults to 2\n// sessUser is optional and defaults to 'thisisadapterortc'\nSDPUtils.writeSessionBoilerplate = function(sessId, sessVer, sessUser) {\n  var sessionId;\n  var version = sessVer !== undefined ? sessVer : 2;\n  if (sessId) {\n    sessionId = sessId;\n  } else {\n    sessionId = SDPUtils.generateSessionId();\n  }\n  var user = sessUser || 'thisisadapterortc';\n  // FIXME: sess-id should be an NTP timestamp.\n  return 'v=0\\r\\n' +\n      'o=' + user + ' ' + sessionId + ' ' + version +\n        ' IN IP4 127.0.0.1\\r\\n' +\n      's=-\\r\\n' +\n      't=0 0\\r\\n';\n};\n\nSDPUtils.writeMediaSection = function(transceiver, caps, type, stream) {\n  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n  // Map ICE parameters (ufrag, pwd) to SDP.\n  sdp += SDPUtils.writeIceParameters(\n    transceiver.iceGatherer.getLocalParameters());\n\n  // Map DTLS parameters to SDP.\n  sdp += SDPUtils.writeDtlsParameters(\n    transceiver.dtlsTransport.getLocalParameters(),\n    type === 'offer' ? 'actpass' : 'active');\n\n  sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n  if (transceiver.direction) {\n    sdp += 'a=' + transceiver.direction + '\\r\\n';\n  } else if (transceiver.rtpSender && transceiver.rtpReceiver) {\n    sdp += 'a=sendrecv\\r\\n';\n  } else if (transceiver.rtpSender) {\n    sdp += 'a=sendonly\\r\\n';\n  } else if (transceiver.rtpReceiver) {\n    sdp += 'a=recvonly\\r\\n';\n  } else {\n    sdp += 'a=inactive\\r\\n';\n  }\n\n  if (transceiver.rtpSender) {\n    // spec.\n    var msid = 'msid:' + stream.id + ' ' +\n        transceiver.rtpSender.track.id + '\\r\\n';\n    sdp += 'a=' + msid;\n\n    // for Chrome.\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n        ' ' + msid;\n    if (transceiver.sendEncodingParameters[0].rtx) {\n      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n          ' ' + msid;\n      sdp += 'a=ssrc-group:FID ' +\n          transceiver.sendEncodingParameters[0].ssrc + ' ' +\n          transceiver.sendEncodingParameters[0].rtx.ssrc +\n          '\\r\\n';\n    }\n  }\n  // FIXME: this should be written by writeRtpDescription.\n  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n      ' cname:' + SDPUtils.localCName + '\\r\\n';\n  if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n        ' cname:' + SDPUtils.localCName + '\\r\\n';\n  }\n  return sdp;\n};\n\n// Gets the direction from the mediaSection or the sessionpart.\nSDPUtils.getDirection = function(mediaSection, sessionpart) {\n  // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\n  var lines = SDPUtils.splitLines(mediaSection);\n  for (var i = 0; i < lines.length; i++) {\n    switch (lines[i]) {\n      case 'a=sendrecv':\n      case 'a=sendonly':\n      case 'a=recvonly':\n      case 'a=inactive':\n        return lines[i].substr(2);\n      default:\n        // FIXME: What should happen here?\n    }\n  }\n  if (sessionpart) {\n    return SDPUtils.getDirection(sessionpart);\n  }\n  return 'sendrecv';\n};\n\nSDPUtils.getKind = function(mediaSection) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  return mline[0].substr(2);\n};\n\nSDPUtils.isRejected = function(mediaSection) {\n  return mediaSection.split(' ', 2)[1] === '0';\n};\n\nSDPUtils.parseMLine = function(mediaSection) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  var parts = lines[0].substr(2).split(' ');\n  return {\n    kind: parts[0],\n    port: parseInt(parts[1], 10),\n    protocol: parts[2],\n    fmt: parts.slice(3).join(' ')\n  };\n};\n\nSDPUtils.parseOLine = function(mediaSection) {\n  var line = SDPUtils.matchPrefix(mediaSection, 'o=')[0];\n  var parts = line.substr(2).split(' ');\n  return {\n    username: parts[0],\n    sessionId: parts[1],\n    sessionVersion: parseInt(parts[2], 10),\n    netType: parts[3],\n    addressType: parts[4],\n    address: parts[5]\n  };\n};\n\n// a very naive interpretation of a valid SDP.\nSDPUtils.isValidSDP = function(blob) {\n  if (typeof blob !== 'string' || blob.length === 0) {\n    return false;\n  }\n  var lines = SDPUtils.splitLines(blob);\n  for (var i = 0; i < lines.length; i++) {\n    if (lines[i].length < 2 || lines[i].charAt(1) !== '=') {\n      return false;\n    }\n    // TODO: check the modifier a bit more.\n  }\n  return true;\n};\n\n// Expose public methods.\nif (typeof module === 'object') {\n  module.exports = SDPUtils;\n}\n\n},{}]},{},[1])(1)\n});"],"file":"adapter.min.js"}