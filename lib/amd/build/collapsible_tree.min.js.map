{"version":3,"sources":["../src/collapsible_tree.js"],"names":["root","treeRoot","on","refreshVisibleItemsCache","item","itemElement","collapsible","dataset","target","document","querySelector","collapse","Tree"],"mappings":"mLA4BA,OAEA,O,kiEAUI,WAAYA,CAAZ,CAAkB,iBAEd,cAAMA,CAAN,EAGA,EAAKC,QAAL,CAAcC,EAAd,CAAiB,sCAAjB,CAAyD,UAAM,CAC3D,EAAKC,wBAAL,EACH,CAFD,EALc,QAQjB,C,mDAOWC,C,CAAM,CACd,+CAAkBA,CAAlB,EADc,GAGRC,CAAAA,CAAW,CAAG,iBAAWD,CAAX,CAHN,CAIRE,CAAW,CAAGD,CAAW,CAACE,OAAZ,CAAoBC,MAApB,CAA6BC,QAAQ,CAACC,aAAT,CAAuBL,CAAW,CAACE,OAAZ,CAAoBC,MAA3C,CAA7B,CAAkF,IAJxF,CAMd,GAAIF,CAAJ,CAAiB,CAEb,cAAOA,CAAP,EAAoBK,QAApB,CAA6B,MAA7B,CACH,CACJ,C,oDAOaP,C,CAAM,CAChB,iDAAoBA,CAApB,EADgB,GAGVC,CAAAA,CAAW,CAAG,iBAAWD,CAAX,CAHJ,CAIVE,CAAW,CAAGD,CAAW,CAACE,OAAZ,CAAoBC,MAApB,CAA6BC,QAAQ,CAACC,aAAT,CAAuBL,CAAW,CAACE,OAAZ,CAAoBC,MAA3C,CAA7B,CAAkF,IAJtF,CAMhB,GAAIF,CAAJ,CAAiB,CAEb,cAAOA,CAAP,EAAoBK,QAApB,CAA6B,MAA7B,CACH,CACJ,C,cAjDwBC,S","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Course index keyboard navigation and aria-tree compatibility.\n *\n * Node tree and bootstrap collapsibles don't use the same HTML structure. However,\n * all keybindings and logic is compatible. This class translate the primitive opetations\n * to a bootstrap collapsible structure.\n *\n * @module     core/collapsible_tree\n * @class      core/collapsible_tree\n * @copyright  2021 Andrew Lyons <andrew@nicols.co.uk>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport Tree from 'core/tree';\n// The core/tree uses jQuery to expand all nodes.\nimport jQuery from 'jquery';\nimport {getElement} from 'core/normalise';\n\nexport default class extends Tree {\n\n    /**\n     * Setup the core/tree keyboard navigation.\n     *\n     * @param {string} root The root of the tree to support\n     */\n    constructor(root) {\n        // Init this value with the parent DOM element.\n        super(root);\n\n        // All jQuery events can be replaced when MDL-79179 is integrated.\n        this.treeRoot.on('hidden.bs.collapse shown.bs.collapse', () => {\n            this.refreshVisibleItemsCache();\n        });\n    }\n\n    /**\n     * Expand a group item.\n     *\n     * @param {JQuery} item  the jQuery object\n     */\n    expandGroup(item) {\n        super.expandGroup(item);\n\n        const itemElement = getElement(item);\n        const collapsible = itemElement.dataset.target ? document.querySelector(itemElement.dataset.target) : null;\n\n        if (collapsible) {\n            // Bootstrap 4 uses jQuery to interact with collapsibles.\n            jQuery(collapsible).collapse('show');\n        }\n    }\n\n    /**\n     * Collpase a group item.\n     *\n     * @param {JQuery} item  the jQuery object\n     */\n    collapseGroup(item) {\n        super.collapseGroup(item);\n\n        const itemElement = getElement(item);\n        const collapsible = itemElement.dataset.target ? document.querySelector(itemElement.dataset.target) : null;\n\n        if (collapsible) {\n            // Bootstrap 4 uses jQuery to interact with collapsibles.\n            jQuery(collapsible).collapse('hide');\n        }\n    }\n}\n"],"file":"collapsible_tree.min.js"}