define ("core/userfeedback",["exports","core/ajax","core/notification"],function(_exports,_ajax,_notification){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.registerEventListeners=void 0;_ajax=_interopRequireDefault(_ajax);_notification=_interopRequireDefault(_notification);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Selectors={regions:{root:"[data-region=\"core/userfeedback\"]"},actions:{}};Selectors.actions.give="".concat(Selectors.regions.root," [data-action=\"give\"]");Selectors.actions.remind="".concat(Selectors.regions.root," [data-action=\"remind\"]");_exports.registerEventListeners=function registerEventListeners(){document.addEventListener("click",function(e){var giveAction=e.target.closest(Selectors.actions.give);if(giveAction){e.preventDefault();if(!window.open(giveAction.href)){throw new Error("Unable to open popup")}Promise.resolve(giveAction).then(hideRoot).then(recordAction).catch(_notification.default.exception)}var remindAction=e.target.closest(Selectors.actions.remind);if(remindAction){e.preventDefault();Promise.resolve(remindAction).then(hideRoot).then(recordAction).catch(_notification.default.exception)}})};var recordAction=function(clickedItem){if(clickedItem.dataset.record){return _ajax.default.call([{methodname:"core_create_userfeedback_action_record",args:{action:clickedItem.dataset.action,contextid:M.cfg.contextid}}])[0]}return Promise.resolve()},hideRoot=function(clickedItem){if(clickedItem.dataset.hide){clickedItem.closest(Selectors.regions.root).remove()}return clickedItem}});
//# sourceMappingURL=userfeedback.min.js.map
