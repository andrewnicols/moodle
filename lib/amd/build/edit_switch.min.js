define ("core/edit_switch",["exports","core/ajax","core/event_dispatcher","core/notification"],function(_exports,_ajax,_event_dispatcher,_notification){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.init=_exports.eventTypes=void 0;const setEditMode=(context,setmode)=>(0,_ajax.call)([{methodname:"core_change_editmode",args:{context,setmode}}])[0],toggleEditSwitch=editSwitch=>{if(editSwitch.checked){editSwitch.setAttribute("aria-checked",!0)}else{editSwitch.setAttribute("aria-checked",!1)}const event=notifyEditModeSet(editSwitch,editSwitch.checked);if(!event.defaultPrevented){window.location=editSwitch.dataset.pageurl}},eventTypes={editModeSet:"core/edit_switch/editModeSet"};_exports.eventTypes=eventTypes;const notifyEditModeSet=(container,editMode)=>(0,_event_dispatcher.dispatchEvent)(eventTypes.editModeSet,{editMode},container,{cancelable:!0});_exports.init=editingSwitchId=>{const editSwitch=document.getElementById(editingSwitchId);editSwitch.addEventListener("change",()=>{setEditMode(editSwitch.dataset.context,editSwitch.checked).then(result=>{if(result.success){toggleEditSwitch(editSwitch)}else{editSwitch.checked=!1}}).catch(_notification.exception)})}});
//# sourceMappingURL=edit_switch.min.js.map
