define ("core/edit_switch",["exports","core/ajax","core/event_dispatcher","core/notification"],function(_exports,_ajax,_event_dispatcher,_notification){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.init=_exports.eventTypes=void 0;var setEditMode=function(context,setmode){return(0,_ajax.call)([{methodname:"core_change_editmode",args:{context:context,setmode:setmode}}])[0]},toggleEditSwitch=function(editSwitch){if(editSwitch.checked){editSwitch.setAttribute("aria-checked",!0)}else{editSwitch.setAttribute("aria-checked",!1)}var event=notifyEditModeSet(editSwitch,editSwitch.checked);if(!event.defaultPrevented){window.location=editSwitch.dataset.pageurl}},eventTypes={editModeSet:"core/edit_switch/editModeSet"};_exports.eventTypes=eventTypes;var notifyEditModeSet=function(container,editMode){return(0,_event_dispatcher.dispatchEvent)(eventTypes.editModeSet,{editMode:editMode},container,{cancelable:!0})};_exports.init=function init(editingSwitchId){var editSwitch=document.getElementById(editingSwitchId);editSwitch.addEventListener("change",function(){setEditMode(editSwitch.dataset.context,editSwitch.checked).then(function(result){if(result.success){toggleEditSwitch(editSwitch)}else{editSwitch.checked=!1}}).catch(_notification.exception)})}});
//# sourceMappingURL=edit_switch.min.js.map
