{"version":3,"sources":["../../../src/local/itemchooser/tabselector.js"],"names":["name","selectors","tab","addEventListener","getElement","_selectTab","e","selectedTab","target","closest","preventDefault","reactive","dispatch","dataset","tabName","watch","handler","_updateItemVisibility","_updateTabVisibility","element","id","classList","toggle","visible","BaseComponent"],"mappings":"s6DA0Ba,CACL,KAAKA,IAAL,CAAY,aAAZ,CAEA,KAAKC,SAAL,CAAiB,CACbC,GAAG,CAAE,iBADQ,CAGpB,C,+CAEY,CACT,KAAKC,gBAAL,CACI,KAAKC,UAAL,EADJ,CAEI,OAFJ,CAGI,KAAKC,UAHT,CAKH,C,8CAEUC,C,CAAG,CACV,GAAMC,CAAAA,CAAW,CAAGD,CAAC,CAACE,MAAF,CAASC,OAAT,CAAiB,KAAKR,SAAL,CAAeC,GAAhC,CAApB,CACA,GAAI,CAACK,CAAL,CAAkB,CACd,MACH,CAEDD,CAAC,CAACI,cAAF,GACA,KAAKC,QAAL,CAAcC,QAAd,CAAuB,WAAvB,CAAoCL,CAAW,CAACM,OAAZ,CAAoBC,OAAxD,CACH,C,iDAEa,CACV,MAAO,CAAC,CACJC,KAAK,CAAE,eADH,CAEJC,OAAO,CAAE,KAAKC,qBAFV,CAAD,CAGJ,CACCF,KAAK,CAAE,iBADR,CAECC,OAAO,CAAE,KAAKE,oBAFf,CAHI,CAOV,C,qEAEuB,CACpB,KAAKP,QAAL,CAAcC,QAAd,CAAuB,oBAAvB,CAA6C,KAAKD,QAAlD,CACH,C,oEAE+B,IAAVQ,CAAAA,CAAU,GAAVA,OAAU,CACtBjB,CAAG,CAAG,KAAKE,UAAL,CAAgB,KAAKH,SAAL,CAAeC,GAA/B,CAAoCiB,CAAO,CAACC,EAA5C,CADgB,CAE5BlB,CAAG,CAACmB,SAAJ,CAAcC,MAAd,CAAqB,QAArB,CAA+B,CAACH,CAAO,CAACI,OAAxC,CACH,C,cA5CwBC,e","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * The navigation item for the tabs.\n *\n * @module     core/local/itemchooser/tabselector\n * @copyright  2021 Andrew Lyons <andrew@nicols.co.uk>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport {BaseComponent} from 'core/reactive';\n\nexport default class extends BaseComponent {\n    create() {\n        this.name = 'tabselector';\n\n        this.selectors = {\n            tab: '[data-tab-name]',\n        };\n    }\n\n    stateReady() {\n        this.addEventListener(\n            this.getElement(),\n            'click',\n            this._selectTab,\n        );\n    }\n\n    _selectTab(e) {\n        const selectedTab = e.target.closest(this.selectors.tab);\n        if (!selectedTab) {\n            return;\n        }\n\n        e.preventDefault();\n        this.reactive.dispatch('selectTab', selectedTab.dataset.tabName);\n    }\n\n    getWatchers() {\n        return [{\n            watch: 'items:updated',\n            handler: this._updateItemVisibility,\n        }, {\n            watch: 'tabData:updated',\n            handler: this._updateTabVisibility,\n        }];\n    }\n\n    _updateItemVisibility() {\n        this.reactive.dispatch('setTabVisibilities', this.reactive);\n    }\n\n    _updateTabVisibility({element}) {\n        const tab = this.getElement(this.selectors.tab, element.id);\n        tab.classList.toggle('d-none', !element.visible);\n    }\n}\n"],"file":"tabselector.min.js"}