define("core_form/collapsesections",["exports","jquery","core/pending"],(function(_exports,_jquery,_pending){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * Collapse or expand all form sections on clicking the expand all / collapse al link.
   *
   * @module core_form/collapsesections
   * @copyright 2021 Bas Brands
   * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   * @since 4.0
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_jquery=_interopRequireDefault(_jquery),_pending=_interopRequireDefault(_pending);const selectors_header=".fheader",selectors_container=".fcontainer",selectors_uncollapsedSections=".fcontainer:not(.show)",classes_collapsed="collapsed",updateCollapseMenu=collapseMenu=>{document.querySelectorAll(selectors_uncollapsedSections).length?(collapseMenu=>{collapseMenu.classList.add(classes_collapsed),collapseMenu.removeAttribute("aria-expanded",!0)})(collapseMenu):(collapseMenu=>{collapseMenu.classList.remove(classes_collapsed),collapseMenu.setAttribute("aria-expanded",!0)})(collapseMenu)},toggleAllSections=collapseMenu=>{const collapsed=collapseMenu.classList.contains(classes_collapsed);document.querySelectorAll(selectors_container).forEach((collapseContainer=>{(0,_jquery.default)(collapseContainer).collapse(collapsed?"show":"hide")})),collapseMenu.classList.toggle(classes_collapsed)};_exports.init=collapseSections=>{const pendingPromise=new _pending.default("core_form/collapseSections"),collapseMenu=document.querySelector(collapseSections);collapseMenu.addEventListener("keydown",(e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),toggleAllSections(collapseMenu))})),collapseMenu.addEventListener("click",(()=>toggleAllSections(collapseMenu)));const collapsibleElementIds=Array.from(document.querySelectorAll(selectors_header)).map(((element,index)=>(element.id||(element.id="collapsible-".concat(index)),element.id)));collapseMenu.setAttribute("aria-controls",collapsibleElementIds.join(" ")),(0,_jquery.default)(selectors_container).on("hidden.bs.collapse shown.bs.collapse",(()=>updateCollapseMenu(collapseMenu))),updateCollapseMenu(collapseMenu),pendingPromise.resolve()}}));

//# sourceMappingURL=collapsesections.min.js.map