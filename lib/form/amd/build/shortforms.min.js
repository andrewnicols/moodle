define ("core_form/shortforms",["exports","./events"],function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.init=a.toggleFieldset=a.collapseFieldset=a.expandFieldset=a.collapseForm=a.expandForm=void 0;var c={collapsedFieldset:"collapsed",collapseAll:"collapse-all"},d={collapsableFieldsets:"fieldset.collapsible",toggleAllLink:"[data-action=\"core_form-shortforms-toggleall\"]",toggleSectionLink:"[data-action=\"core_form-shortforms-toggle-section\"]"},f=function(a){return a.closest("form")},g=function(a){return a.closest("fieldset")},h=function(a,b){var d=g(a),e=d.form.querySelector("input[name=mform_isexpanded_".concat(d.id,"]"));if(b){d.classList.remove(c.collapsedFieldset);d.setAttribute("aria-expanded","true")}else{d.classList.add(c.collapsedFieldset);d.setAttribute("aria-expanded","false")}if(e){e.value=b?1:0}},i=function(a){var b=f(a),e=Array.from(b.querySelectorAll(d.toggleSectionLink)).some(function(a){return"true"!==a.closest("fieldset").getAttribute("aria-expanded")}),g=b.querySelectorAll(d.toggleAllLink);if(e){b.dataset.toggleState="closed";g.forEach(function(a){a.innerHTML=a.dataset.expandallstring;a.classList.remove(c.collapseAll)})}else{b.dataset.toggleState="open";g.forEach(function(a){a.innerHTML=a.dataset.collapseallstring;a.classList.add(c.collapseAll)})}},j=function(a,b){var c=f(a);c.querySelectorAll(d.collapsableFieldsets).forEach(function(a){return h(a,b)});i(c)},k=function(a){return j(a,!0)};a.expandForm=k;var l=function(a){return j(a,!1)};a.collapseForm=l;var m=function(a){h(a,!0);i(a)};a.expandFieldset=m;a.collapseFieldset=function collapseFieldset(a){h(a,!1);i(a)};var n=function(a){var b=g(a);h(b,"false"===b.getAttribute("aria-expanded"));i(b)};a.toggleFieldset=n;var o=function(a){var b=a.target.closest(d.toggleAllLink);if(b){var e=f(b);if(!e){return}a.preventDefault();if("open"===e.dataset.toggleState){l(e);e.dataset.toggleState="closed"}else{k(e);e.dataset.toggleState="open"}}var c=a.target.closest(d.toggleSectionLink);if(c){a.preventDefault();n(c);i(c)}},p=function(a){var b=g(a.target);if(b){m(b)}},q=!1,r=function(){if(q){return}q=!0;document.addEventListener("click",o);document.addEventListener(b.eventTypes.formError,p)};a.init=r});
//# sourceMappingURL=shortforms.min.js.map
