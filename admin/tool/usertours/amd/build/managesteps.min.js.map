{"version":3,"sources":["../src/managesteps.js"],"names":["removeStepHandler","e","deleteButton","target","closest","preventDefault","removeStepFromLink","href","targetUrl","window","location","setup","document","querySelector","addEventListener"],"mappings":"8OAgBMA,CAAAA,iBAAiB,CAAG,SAAAC,CAAC,CAAI,CAC3B,GAAMC,CAAAA,YAAY,CAAGD,CAAC,CAACE,MAAF,CAASC,OAAT,CAAiB,0BAAjB,CAArB,CACA,GAAIF,YAAJ,CAAkB,CACdD,CAAC,CAACI,cAAF,GACAC,kBAAkB,CAACJ,YAAY,CAACK,IAAd,CACrB,CACJ,C,CAQKD,kBAAkB,CAAG,SAAAE,SAAS,CAAI,CACpC,0BACI,oBAAU,yBAAV,CAAqC,gBAArC,CADJ,CAEI,oBAAU,4BAAV,CAAwC,gBAAxC,CAFJ,CAGI,oBAAU,KAAV,CAAiB,MAAjB,CAHJ,CAII,oBAAU,IAAV,CAAgB,MAAhB,CAJJ,CAKI,UAAM,CACFC,MAAM,CAACC,QAAP,CAAkBF,SACrB,CAPL,CASH,C,gBAKoB,QAARG,CAAAA,KAAQ,EAAM,CACvB,8BAAgB,gBAAhB,CAAkC,CAC9B,yBAD8B,CAE9B,4BAF8B,CAAlC,EAKA,8BAAgB,MAAhB,CAAwB,CACpB,KADoB,CAEpB,IAFoB,CAAxB,EAKAC,QAAQ,CAACC,aAAT,CAAuB,MAAvB,EAA+BC,gBAA/B,CAAgD,OAAhD,CAAyDd,iBAAzD,CACH,C","sourcesContent":["/**\n * Step management code.\n *\n * @module     tool_usertours/managesteps\n * @copyright  2016 Andrew Nicols <andrew@nicols.co.uk>\n */\nimport {prefetchStrings} from 'core/prefetch';\nimport {get_string as getString} from 'core/str';\nimport {confirm as confirmModal} from 'core/notification';\n\n/**\n * Handle step management actions.\n *\n * @param   {Event} e\n * @private\n */\nconst removeStepHandler = e => {\n    const deleteButton = e.target.closest('[data-action=\"delete\"]');\n    if (deleteButton) {\n        e.preventDefault();\n        removeStepFromLink(deleteButton.href);\n    }\n};\n\n/**\n * Handle removal of a step with confirmation.\n *\n * @param {string} targetUrl\n * @private\n */\nconst removeStepFromLink = targetUrl => {\n    confirmModal(\n        getString('confirmstepremovaltitle', 'tool_usertours'),\n        getString('confirmstepremovalquestion', 'tool_usertours'),\n        getString('yes', 'core'),\n        getString('no', 'core'),\n        () => {\n            window.location = targetUrl;\n        }\n    );\n};\n\n/**\n * Set up the step management handlers.\n */\nexport const setup = () => {\n    prefetchStrings('tool_usertours', [\n        'confirmstepremovaltitle',\n        'confirmstepremovalquestion',\n    ]);\n\n    prefetchStrings('core', [\n        'yes',\n        'no',\n    ]);\n\n    document.querySelector('body').addEventListener('click', removeStepHandler);\n};\n"],"file":"managesteps.min.js"}