define ("tool_dataprivacy/purposesactions",["jquery","core/ajax","core/notification","core/str","core/modal_factory","core/modal_events"],function($,Ajax,Notification,Str,ModalFactory,ModalEvents){var ACTIONS={DELETE:"[data-action=\"deletepurpose\"]"},PurposesActions=function(){this.registerEvents()};PurposesActions.prototype.registerEvents=function(){$(ACTIONS.DELETE).click(function(e){e.preventDefault();var id=$(this).data("id"),purposename=$(this).data("name");Str.get_strings([{key:"deletepurpose",component:"tool_dataprivacy"},{key:"deletepurposetext",component:"tool_dataprivacy",param:purposename},{key:"delete"}]).then(function(langStrings){var title=langStrings[0],confirmMessage=langStrings[1],buttonText=langStrings[2];return ModalFactory.create({title:title,body:confirmMessage,type:ModalFactory.types.SAVE_CANCEL}).then(function(modal){modal.setSaveButtonText(buttonText);modal.getRoot().on(ModalEvents.save,function(){Ajax.call([{methodname:"tool_dataprivacy_delete_purpose",args:{id:id}}])[0].done(function(data){if(data.result){$("tr[data-purposeid=\""+id+"\"]").remove()}else{Notification.addNotification({message:data.warnings[0].message,type:"error"})}}).fail(Notification.exception)});modal.getRoot().on(ModalEvents.hidden,function(){modal.destroy()});return modal})}).done(function(modal){modal.show()}).fail(Notification.exception)})};return{init:function init(){return new PurposesActions}}});
//# sourceMappingURL=purposesactions.min.js.map
