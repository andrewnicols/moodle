define ("tool_dataprivacy/myrequestactions",["exports","core/ajax","core/notification","core/pending","core/str"],function(_exports,_ajax,_notification,_pending,_str){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.init=void 0;_ajax=_interopRequireDefault(_ajax);_notification=_interopRequireDefault(_notification);_pending=_interopRequireDefault(_pending);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}const SELECTORS={CANCEL_REQUEST:"[data-action=\"cancel\"][data-requestid]"};_exports.init=()=>{document.addEventListener("click",event=>{const triggerElement=event.target.closest(SELECTORS.CANCEL_REQUEST);if(null===triggerElement){return}event.preventDefault();(0,_str.get_strings)([{key:"cancelrequest",component:"tool_dataprivacy"},{key:"cancelrequestconfirmation",component:"tool_dataprivacy"}]).then(_ref=>{let[cancelRequest,cancelConfirm]=_ref;return _notification.default.confirm(cancelRequest,cancelConfirm,cancelRequest,null,()=>{const pendingPromise=new _pending.default("tool/dataprivacy:cancelRequest"),request={methodname:"tool_dataprivacy_cancel_data_request",args:{requestid:triggerElement.dataset.requestid}};_ajax.default.call([request])[0].then(response=>{if(response.result){window.location.reload()}else{_notification.default.addNotification({type:"error",message:response.warnings[0].message})}return pendingPromise.resolve()}).catch(_notification.default.exception)})}).catch()})}});
//# sourceMappingURL=myrequestactions.min.js.map
