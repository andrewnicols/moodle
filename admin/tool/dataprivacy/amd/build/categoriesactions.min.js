define ("tool_dataprivacy/categoriesactions",["jquery","core/ajax","core/notification","core/str","core/modal_factory","core/modal_events"],function($,Ajax,Notification,Str,ModalFactory,ModalEvents){var ACTIONS={DELETE:"[data-action=\"deletecategory\"]"},CategoriesActions=function(){this.registerEvents()};CategoriesActions.prototype.registerEvents=function(){$(ACTIONS.DELETE).click(function(e){e.preventDefault();var id=$(this).data("id"),categoryname=$(this).data("name");Str.get_strings([{key:"deletecategory",component:"tool_dataprivacy"},{key:"deletecategorytext",component:"tool_dataprivacy",param:categoryname},{key:"delete"}]).then(function(langStrings){var title=langStrings[0],confirmMessage=langStrings[1],buttonText=langStrings[2];return ModalFactory.create({title:title,body:confirmMessage,type:ModalFactory.types.SAVE_CANCEL}).then(function(modal){modal.setSaveButtonText(buttonText);modal.getRoot().on(ModalEvents.save,function(){Ajax.call([{methodname:"tool_dataprivacy_delete_category",args:{id:id}}])[0].done(function(data){if(data.result){$("tr[data-categoryid=\""+id+"\"]").remove()}else{Notification.addNotification({message:data.warnings[0].message,type:"error"})}}).fail(Notification.exception)});modal.getRoot().on(ModalEvents.hidden,function(){modal.destroy()});return modal})}).done(function(modal){modal.show()}).fail(Notification.exception)})};return{init:function(){return new CategoriesActions}}});
//# sourceMappingURL=categoriesactions.min.js.map
