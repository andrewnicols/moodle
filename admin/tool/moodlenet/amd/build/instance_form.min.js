define ("tool_moodlenet/instance_form",["tool_moodlenet/validator","tool_moodlenet/selectors","core/loadingicon","core/templates","core/notification","jquery"],function(Validator,Selectors,LoadingIcon,Templates,Notification,$){var registerListenerEvents=function(page){page.addEventListener("click",function(e){if(e.target.matches(Selectors.action.submit)){var input=page.querySelector("[data-var=\"mnet-link\"]"),overlay=page.querySelector(Selectors.region.spinner),validationArea=document.querySelector(Selectors.region.validationArea);overlay.classList.remove("d-none");var spinner=LoadingIcon.addIconToContainerWithPromise(overlay);Validator.validation(input).then(function(result){spinner.resolve();overlay.classList.add("d-none");if(result.result){input.classList.remove("is-invalid");input.classList.add("is-valid");validationArea.innerText=result.message;validationArea.classList.remove("text-danger");validationArea.classList.add("text-success");setTimeout(function(){window.location=result.domain},1e3)}else{input.classList.add("is-invalid");validationArea.innerText=result.message;validationArea.classList.add("text-danger")}}).catch()}})},chooserNavigateToMnet=function(showMoodleNet,footerData,carousel,modal){showMoodleNet.innerHTML="";var spinnerPromise=LoadingIcon.addIconToContainer(showMoodleNet),transitionPromiseResolver=null,transitionPromise=new Promise(function(resolve){transitionPromiseResolver=resolve});$.when(spinnerPromise,transitionPromise).then(function(){Templates.replaceNodeContents(showMoodleNet,footerData.customcarouseltemplate,"")}).catch(Notification.exception);registerListenerEvents(showMoodleNet);carousel.one("slid.bs.carousel",function(){transitionPromiseResolver()});carousel.carousel(2);modal.setFooter(Templates.render("tool_moodlenet/chooser_footer_close_mnet",{}))},chooserNavigateFromMnet=function(carousel,modal,footerData){carousel.carousel(0);modal.setFooter(footerData.customfootertemplate)};return{footerClickListener:function footerClickListener(e,footerData,modal){if(e.target.matches(Selectors.action.showMoodleNet)||e.target.closest(Selectors.action.showMoodleNet)){e.preventDefault();var carousel=$(modal.getBody()[0].querySelector(Selectors.region.carousel)),showMoodleNet=carousel.find(Selectors.region.moodleNet)[0];chooserNavigateToMnet(showMoodleNet,footerData,carousel,modal)}if(e.target.matches(Selectors.action.closeOption)){var _carousel=$(modal.getBody()[0].querySelector(Selectors.region.carousel));chooserNavigateFromMnet(_carousel,modal,footerData)}}}});
//# sourceMappingURL=instance_form.min.js.map
