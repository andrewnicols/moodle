define ("tool_langimport/search",["exports","core/pending","core/utils"],function(_exports,_pending,_utils){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.default=void 0;_pending=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_pending);const SELECTORS={AVAILABLE_LANG_SELECT:"select",AVAILABLE_LANG_SEARCH:"[data-action=\"search\"]"},DEBOUNCE_TIMER=250;_exports.default={init:form=>{const availableLangsElement=form.querySelector(SELECTORS.AVAILABLE_LANG_SELECT),availableLangsFilter=event=>{const pendingPromise=new _pending.default("tool_langimport/search:filter");availableLangsElement.querySelectorAll("option").forEach(option=>{option.remove()});const searchTerm=event.target.value.toLowerCase(),availableLanguages=JSON.parse(availableLangsElement.dataset.availableLanguages),filteredLanguages=Object.keys(availableLanguages).reduce((matches,langcode)=>{if(availableLanguages[langcode].toLowerCase().includes(searchTerm)){matches[langcode]=availableLanguages[langcode]}return matches},[]);Object.entries(filteredLanguages).forEach(_ref=>{let[langcode,langname]=_ref;const option=document.createElement("option");option.value=langcode;option.innerText=langname;availableLangsElement.append(option)});pendingPromise.resolve()},availableLanguages={};availableLangsElement.querySelectorAll("option").forEach(option=>{availableLanguages[option.value]=option.text});availableLangsElement.dataset.availableLanguages=JSON.stringify(availableLanguages);const availableLangsSearch=form.querySelector(SELECTORS.AVAILABLE_LANG_SEARCH);availableLangsSearch.addEventListener("keydown",event=>{if("Enter"===event.key){event.preventDefault()}});availableLangsSearch.addEventListener("keyup",event=>{const pendingPromise=new _pending.default("tool_langimport/search:keyup");(0,_utils.debounce)(availableLangsFilter,DEBOUNCE_TIMER)(event);setTimeout(()=>{pendingPromise.resolve()},DEBOUNCE_TIMER)})}};return _exports.default});
//# sourceMappingURL=search.min.js.map
