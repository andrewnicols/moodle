define ("core_calendar/month_navigation_drag_drop",["jquery","core_calendar/drag_drop_data_store"],function($,DataStore){var SELECTORS={DRAGGABLE:"[draggable=\"true\"][data-region=\"event-item\"]",DROP_ZONE:"[data-drop-zone=\"nav-link\"]"},HOVER_CLASS="bg-primary text-white",TARGET_CLASS="drop-target",registered=!1,hoverTimer=null,root=null,updateHoverState=function(target,hovered){if(hovered){target.addClass(HOVER_CLASS)}else{target.removeClass(HOVER_CLASS)}},addDropZoneIndicator=function(){root.find(SELECTORS.DROP_ZONE).addClass(TARGET_CLASS)},removeDropZoneIndicator=function(){root.find(SELECTORS.DROP_ZONE).removeClass(TARGET_CLASS)},getTargetFromEvent=function(e){var target=$(e.target).closest(SELECTORS.DROP_ZONE);return target.length?target:null},dragstartHandler=function(e){var eventElement=$(e.target).closest(SELECTORS.DRAGGABLE);if(eventElement.length){addDropZoneIndicator()}},dragoverHandler=function(e){if(!DataStore.hasEventId()){return}e.preventDefault();var target=getTargetFromEvent(e);if(!target){return}if(!DataStore.hasEventId()){return}if(!hoverTimer){hoverTimer=setTimeout(function(){target.click();hoverTimer=null},1e3)}updateHoverState(target,!0);removeDropZoneIndicator()},dragleaveHandler=function(e){if(!DataStore.hasEventId()){return}var target=getTargetFromEvent(e);if(!target){return}if(hoverTimer){clearTimeout(hoverTimer);hoverTimer=null}updateHoverState(target,!1);addDropZoneIndicator();e.preventDefault()},dropHandler=function(e){if(!DataStore.hasEventId()){return}removeDropZoneIndicator();var target=getTargetFromEvent(e);if(!target){return}updateHoverState(target,!1);e.preventDefault()};return{init:function init(rootElement){if(!registered){document.addEventListener("dragstart",dragstartHandler,!1);document.addEventListener("dragover",dragoverHandler,!1);document.addEventListener("dragleave",dragleaveHandler,!1);document.addEventListener("drop",dropHandler,!1);document.addEventListener("dragend",removeDropZoneIndicator,!1);registered=!0}root=$(rootElement);if(DataStore.hasEventId()){addDropZoneIndicator()}}}});
//# sourceMappingURL=month_navigation_drag_drop.min.js.map
