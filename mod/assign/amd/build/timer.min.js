define ("mod_assign/timer",["exports","core/notification","core/str"],function(_exports,_notification,_str){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.init=void 0;_notification=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_notification);let endTime=0,timeoutId=null,timer=null;const formatSeconds=secs=>{const hours=Math.floor(secs/3600),minutes=Math.floor(secs/60)%60;return[hours,minutes,secs%60].filter((value,index)=>0!==value||0<index).map(value=>"".concat(value).padStart(2,"0")).join(":")},stop=()=>{if(timeoutId){clearTimeout(timeoutId)}},update=()=>{const now=new Date().getTime(),secondsLeft=Math.floor((endTime-now)/1e3);if(0>=secondsLeft){timer.classList.add("alert","alert-danger");timer.innerHTML="00:00:00";if(document.getElementById("mod_assign_timelimit_block")){(0,_str.get_string)("caneditsubmission","mod_assign").then(message=>_notification.default.addNotification({message})).catch(_notification.default.exception)}stop();return}else if(300>secondsLeft){timer.classList.remove("alert-warning");timer.classList.add("alert","alert-danger")}else if(900>secondsLeft){timer.classList.remove("alert-danger");timer.classList.add("alert","alert-warning")}timer.innerHTML=formatSeconds(secondsLeft);timeoutId=setTimeout(update,500)},init=timerId=>{timer=document.getElementById(timerId);endTime=M.pageloadstarttime.getTime()+1e3*timer.dataset.starttime;update()};_exports.init=init});
//# sourceMappingURL=timer.min.js.map
