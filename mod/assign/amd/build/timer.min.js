define ("mod_assign/timer",["exports","core/notification","core/str"],function(_exports,_notification,_str){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.init=void 0;_notification=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_notification);var endTime=0,timeoutId=null,timer=null,formatSeconds=function(secs){var hours=Math.floor(secs/3600),minutes=Math.floor(secs/60)%60;return[hours,minutes,secs%60].filter(function(value,index){return 0!==value||0<index}).map(function(value){return"".concat(value).padStart(2,"0")}).join(":")},stop=function(){if(timeoutId){clearTimeout(timeoutId)}},update=function(){var now=new Date().getTime(),secondsLeft=Math.floor((endTime-now)/1e3);if(0>=secondsLeft){timer.classList.add("alert","alert-danger");timer.innerHTML="00:00:00";if(document.getElementById("mod_assign_timelimit_block")){(0,_str.get_string)("caneditsubmission","mod_assign").then(function(message){return _notification.default.addNotification({message:message})}).catch(_notification.default.exception)}stop();return}else if(300>secondsLeft){timer.classList.remove("alert-warning");timer.classList.add("alert","alert-danger")}else if(900>secondsLeft){timer.classList.remove("alert-danger");timer.classList.add("alert","alert-warning")}timer.innerHTML=formatSeconds(secondsLeft);timeoutId=setTimeout(update,500)},init=function(timerId){timer=document.getElementById(timerId);endTime=M.pageloadstarttime.getTime()+1e3*timer.dataset.starttime;update()};_exports.init=init});
//# sourceMappingURL=timer.min.js.map
