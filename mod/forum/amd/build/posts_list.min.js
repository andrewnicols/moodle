define ("mod_forum/posts_list",["jquery","core/templates","core/notification","core/pending","mod_forum/selectors","mod_forum/inpage_reply","core_form/changechecker"],function($,Templates,Notification,Pending,Selectors,InPageReply,FormChangeChecker){var registerEventListeners=function(root){root.on("click",Selectors.post.inpageReplyLink,function(e){e.preventDefault();if(window.location.hash){var url=window.location.href.split("#")[0];history.pushState({},document.title,url)}var pending=new Pending("inpage-reply"),currentTarget=$(e.currentTarget).parents(Selectors.post.forumCoreContent),currentSubject=currentTarget.find(Selectors.post.forumSubject),currentRoot=$(e.currentTarget).parents(Selectors.post.forumContent),context={postid:$(currentRoot).data("post-id"),reply_url:$(e.currentTarget).attr("href"),sesskey:M.cfg.sesskey,parentsubject:currentSubject.data("replySubject"),canreplyprivately:$(e.currentTarget).data("can-reply-privately"),postformat:InPageReply.CONTENT_FORMATS.MOODLE};if(!currentRoot.find(Selectors.post.inpageReplyContent).length){Templates.render("mod_forum/inpage_reply",context).then(function(html,js){return Templates.appendNodeContents(currentTarget,html,js)}).then(function(){return currentRoot.find(Selectors.post.inpageReplyContent).slideToggle(300,pending.resolve).find("textarea").focus()}).then(function(){FormChangeChecker.watchFormById("inpage-reply-".concat(context.postid))}).catch(Notification.exception)}else{var form=currentRoot.find(Selectors.post.inpageReplyContent);form.slideToggle(300,pending.resolve);if(form.is(":visible")){form.find("textarea").focus()}}})};return{init:function(root){registerEventListeners(root);InPageReply.init(root)}}});
//# sourceMappingURL=posts_list.min.js.map
