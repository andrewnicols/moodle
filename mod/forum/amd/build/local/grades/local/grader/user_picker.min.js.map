{"version":3,"file":"user_picker.min.js","sources":["../../../../../src/local/grades/local/grader/user_picker.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * This module will tie together all of the different calls the gradable module will make.\n *\n * @module     mod_forum/local/grades/local/grader/user_picker\n * @package    mod_forum\n * @copyright  2019 Mathew May <mathew.solutions>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport Templates from 'core/templates';\nimport Selectors from './user_picker/selectors';\nimport {get_string as getString} from 'core/str';\n\nconst templatePath = 'mod_forum/local/grades/local/grader';\n\nclass UserPicker {\n\n    /**\n     * Constructor for the User Picker.\n     *\n     * @param {Array} userList List of users\n     * @param {Function} showUserCallback The callback used to display the user\n     * @param {Function} preChangeUserCallback The callback to use before changing user\n     */\n    constructor(userList, showUserCallback, preChangeUserCallback) {\n        this.userList = userList;\n        this.showUserCallback = showUserCallback;\n        this.preChangeUserCallback = preChangeUserCallback;\n        this.currentUserIndex = 0;\n\n        // Ensure that render is bound correctly.\n        this.render = this.render.bind(this);\n        this.setUserId = this.setUserId.bind(this);\n    }\n\n    /**\n     * Set the current userid without rendering the change.\n     * To show the user, call showUser too.\n     *\n     * @param {Number} userId\n     */\n    setUserId(userId) {\n        // Determine the current index based on the user ID.\n        const userIndex = this.userList.findIndex(user => {\n            return user.id === parseInt(userId);\n        });\n\n        if (userIndex === -1) {\n            throw Error(`User with id ${userId} not found`);\n        }\n\n        this.currentUserIndex = userIndex;\n    }\n\n    /**\n     * Render the user picker.\n     */\n    async render() {\n        // Create the root node.\n        this.root = document.createElement('div');\n\n        const {html, js} = await this.renderNavigator();\n        Templates.replaceNodeContents(this.root, html, js);\n\n        // Call the showUser function to show the first user immediately.\n        await this.showUser(this.currentUser);\n\n        // Ensure that the event listeners are all bound.\n        this.registerEventListeners();\n    }\n\n    /**\n     * Render the navigator itself.\n     *\n     * @returns {Promise}\n     */\n    renderNavigator() {\n        return Templates.renderForPromise(`${templatePath}/user_picker`, {});\n    }\n\n    /**\n     * Render the current user details for the picker.\n     *\n     * @param {Object} context The data used to render the user picker.\n     * @returns {Promise}\n     */\n    renderUserChange(context) {\n        return Templates.renderForPromise(`${templatePath}/user_picker/user`, context);\n    }\n\n    /**\n     * Show the specified user in the picker.\n     *\n     * @param {Object} user\n     */\n    async showUser(user) {\n        const [{html, js}] = await Promise.all([this.renderUserChange(user), this.showUserCallback(user)]);\n        const userRegion = this.root.querySelector(Selectors.regions.userRegion);\n        Templates.replaceNodeContents(userRegion, html, js);\n\n        // Update the hidden now-grading region so screen readers can announce the user that's currently being graded.\n        const currentUserRegion = this.root.querySelector(Selectors.regions.currentUser);\n        currentUserRegion.textContent = await getString('nowgradinguser', 'mod_forum', user.fullname);\n    }\n\n    /**\n     * Register the event listeners for the user picker.\n     */\n    registerEventListeners() {\n        this.root.addEventListener('click', async(e) => {\n            const button = e.target.closest(Selectors.actions.changeUser);\n\n            if (button) {\n                const result = await this.preChangeUserCallback(this.currentUser);\n\n                if (!result.failed) {\n                    this.updateIndex(parseInt(button.dataset.direction));\n                    await this.showUser(this.currentUser);\n                }\n            }\n        });\n    }\n\n    /**\n     * Update the current user index.\n     *\n     * @param {Number} direction\n     * @returns {Number}}\n     */\n    updateIndex(direction) {\n        this.currentUserIndex += direction;\n\n        // Loop around the edges.\n        if (this.currentUserIndex < 0) {\n            this.currentUserIndex = this.userList.length - 1;\n        } else if (this.currentUserIndex > this.userList.length - 1) {\n            this.currentUserIndex = 0;\n        }\n\n        return this.currentUserIndex;\n    }\n\n    /**\n     * Get the details of the user currently shown with the total number of users, and the 1-indexed count of the\n     * current user.\n     *\n     * @returns {Object}\n     */\n    get currentUser() {\n        return {\n            ...this.userList[this.currentUserIndex],\n            total: this.userList.length,\n            displayIndex: this.currentUserIndex + 1,\n        };\n    }\n\n    /**\n     * Get the root node for the User Picker.\n     *\n     * @returns {HTMLElement}\n     */\n    get rootNode() {\n        return this.root;\n    }\n}\n\n/**\n * Create a new user picker.\n *\n * @param {Array} users The list of users\n * @param {Function} showUserCallback The function to call to show a specific user\n * @param {Function} preChangeUserCallback The fucntion to call to save the grade for the current user\n * @param {Number} [currentUserID] The userid of the current user\n * @returns {UserPicker}\n */\nexport default async(\n    users,\n    showUserCallback,\n    preChangeUserCallback,\n    {\n        initialUserId = null,\n    } = {}\n) => {\n    const userPicker = new UserPicker(users, showUserCallback, preChangeUserCallback);\n    if (initialUserId) {\n        userPicker.setUserId(initialUserId);\n    }\n    await userPicker.render();\n\n    return userPicker;\n};\n"],"names":["_interopRequireDefault","obj","__esModule","default","_typeof","Symbol","iterator","constructor","prototype","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","value","_toPropertyKey","configurable","writable","_slicedToArray","arr","Array","isArray","_arrayWithHoles","_i","_s","_e","_x","_r","_arr","_n","_d","call","next","done","err","return","_iterableToArrayLimit","o","minLen","_arrayLikeToArray","n","toString","slice","name","from","test","_unsupportedIterableToArray","TypeError","_nonIterableRest","len","arr2","_regeneratorRuntime","exports","Op","hasOwn","hasOwnProperty","desc","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","makeInvokeMethod","tryCatch","fn","arg","type","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","method","_invoke","AsyncIterator","PromiseImpl","invoke","resolve","reject","record","result","__await","then","unwrapped","error","previousPromise","callInvokeWithMethodAndArg","state","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","methodName","undefined","info","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","displayName","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","val","reverse","pop","skipTempReset","prev","charAt","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","asyncGeneratorStep","gen","_next","_throw","_asyncToGenerator","args","_defineProperties","props","descriptor","input","hint","prim","toPrimitive","res","String","Number","_toPrimitive","_templates","_selectors","_ref2","UserPicker","userList","showUserCallback","preChangeUserCallback","instance","Constructor","_classCallCheck","currentUserIndex","render","bind","setUserId","protoProps","staticProps","_showUser","_render","userId","userIndex","findIndex","user","id","parseInt","concat","_callee","_yield$this$renderNav","html","js","_context","root","document","createElement","renderNavigator","Templates","replaceNodeContents","showUser","currentUser","registerEventListeners","renderForPromise","_callee2","_yield$Promise$all","_yield$Promise$all2","_yield$Promise$all2$","userRegion","currentUserRegion","_context2","all","renderUserChange","querySelector","Selectors","regions","getString","get_string","fullname","textContent","_ref","_this","addEventListener","_callee3","e","button","_context3","closest","actions","changeUser","failed","updateIndex","dataset","direction","_x2","get","total","displayIndex","_default","_callee4","users","_ref3$initialUserId","initialUserId","userPicker","_args4","_context4","_x3","_x4","_x5","_exports"],"mappings":"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"}