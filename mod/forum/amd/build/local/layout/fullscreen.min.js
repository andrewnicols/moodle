function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}define ("mod_forum/local/layout/fullscreen",["exports","core/loadingicon","core/toast","core/local/aria/focuslock"],function(_exports,_loadingicon,_toast,FocusLockManager){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.createLayout=void 0;FocusLockManager=_interopRequireWildcard(FocusLockManager);function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if("default"!=key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}var getComposedLayout=function(){var _ref=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},_ref$fullscreen=_ref.fullscreen,fullscreen=void 0===_ref$fullscreen?!0:_ref$fullscreen,_ref$showLoader=_ref.showLoader,showLoader=void 0===_ref$showLoader?!1:_ref$showLoader,_ref$focusOnClose=_ref.focusOnClose,focusOnClose=void 0===_ref$focusOnClose?null:_ref$focusOnClose,container=document.createElement("div");document.body.append(container);container.classList.add("layout");container.classList.add("fullscreen");container.setAttribute("role","application");(0,_toast.addToastRegion)(container);lockBodyScroll();FocusLockManager.trapFocus(container);var helpers=getLayoutHelpers(container,FocusLockManager,focusOnClose);if(showLoader){helpers.showLoadingIcon()}if(fullscreen){helpers.requestFullscreen()}return helpers},getLayoutHelpers=function(layoutNode,FocusLockManager,focusOnClose){var contentNode=document.createElement("div");layoutNode.append(contentNode);var loadingNode=document.createElement("div");layoutNode.append(loadingNode);var requestFullscreen=function(){if(layoutNode.requestFullscreen){layoutNode.requestFullscreen()}else if(layoutNode.msRequestFullscreen){layoutNode.msRequestFullscreen()}else if(layoutNode.mozRequestFullscreen){layoutNode.mozRequestFullscreen()}else if(layoutNode.webkitRequestFullscreen){layoutNode.webkitRequestFullscreen()}else{layoutNode.setTop(0)}},exitFullscreen=function(){if(document.exitRequestFullScreen){if(document.fullScreenElement!==layoutNode){return}document.exitRequestFullScreen()}else if(document.msExitFullscreen){if(document.msFullscreenElement!==layoutNode){return}document.msExitFullscreen()}else if(document.mozCancelFullScreen){if(document.mozFullScreenElement!==layoutNode){return}document.mozCancelFullScreen()}else if(document.webkitExitFullscreen){if(document.webkitFullscreenElement!==layoutNode){return}document.webkitExitFullscreen()}},hideLoadingIcon=function(){var child=loadingNode.lastElementChild;while(child){loadingNode.removeChild(child);child=loadingNode.lastElementChild}};return{close:function close(){exitFullscreen();unlockBodyScroll();FocusLockManager.untrapFocus();layoutNode.remove();if(focusOnClose){try{focusOnClose.focus()}catch(e){}}},toggleFullscreen:function toggleFullscreen(){if(document.exitRequestFullScreen){if(document.fullScreenElement===layoutNode){exitFullscreen()}else{requestFullscreen()}}else if(document.msExitFullscreen){if(document.msFullscreenElement===layoutNode){exitFullscreen()}else{requestFullscreen()}}else if(document.mozCancelFullScreen){if(document.mozFullScreenElement===layoutNode){exitFullscreen()}else{requestFullscreen()}}else if(document.webkitExitFullscreen){if(document.webkitFullscreenElement===layoutNode){exitFullscreen()}else{requestFullscreen()}}},requestFullscreen:requestFullscreen,exitFullscreen:exitFullscreen,getContainer:function getContainer(){return contentNode},setContent:function setContent(content){hideLoadingIcon();var child=contentNode.lastElementChild;while(child){contentNode.removeChild(child);child=contentNode.lastElementChild}contentNode.append(content)},showLoadingIcon:function showLoadingIcon(){(0,_loadingicon.addIconToContainer)(loadingNode)},hideLoadingIcon:hideLoadingIcon}},lockBodyScroll=function(){document.querySelector("body").classList.add("overflow-hidden")},unlockBodyScroll=function(){document.querySelector("body").classList.remove("overflow-hidden")};_exports.createLayout=getComposedLayout});
//# sourceMappingURL=fullscreen.min.js.map
