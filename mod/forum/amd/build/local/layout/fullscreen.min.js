define ("mod_forum/local/layout/fullscreen",["exports","core/loadingicon","core/toast","core/local/aria/focuslock"],function(_exports,_loadingicon,_toast,FocusLockManager){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.createLayout=void 0;FocusLockManager=_interopRequireWildcard(FocusLockManager);function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(null===obj||"object"!=typeof obj&&"function"!=typeof obj){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if("default"!=key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}const createLayout=function(){let{fullscreen=!0,showLoader=!1,focusOnClose=null}=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};const container=document.createElement("div");document.body.append(container);container.classList.add("layout");container.classList.add("fullscreen");container.setAttribute("role","application");(0,_toast.addToastRegion)(container);lockBodyScroll();FocusLockManager.trapFocus(container);const helpers=getLayoutHelpers(container,FocusLockManager,focusOnClose);if(showLoader){helpers.showLoadingIcon()}if(fullscreen){helpers.requestFullscreen()}return helpers};_exports.createLayout=createLayout;const getLayoutHelpers=(layoutNode,FocusLockManager,focusOnClose)=>{const contentNode=document.createElement("div");layoutNode.append(contentNode);const loadingNode=document.createElement("div");layoutNode.append(loadingNode);const requestFullscreen=()=>{if(layoutNode.requestFullscreen){layoutNode.requestFullscreen()}else if(layoutNode.msRequestFullscreen){layoutNode.msRequestFullscreen()}else if(layoutNode.mozRequestFullscreen){layoutNode.mozRequestFullscreen()}else if(layoutNode.webkitRequestFullscreen){layoutNode.webkitRequestFullscreen()}else{layoutNode.setTop(0)}},exitFullscreen=()=>{if(document.exitRequestFullScreen){if(document.fullScreenElement!==layoutNode){return}document.exitRequestFullScreen()}else if(document.msExitFullscreen){if(document.msFullscreenElement!==layoutNode){return}document.msExitFullscreen()}else if(document.mozCancelFullScreen){if(document.mozFullScreenElement!==layoutNode){return}document.mozCancelFullScreen()}else if(document.webkitExitFullscreen){if(document.webkitFullscreenElement!==layoutNode){return}document.webkitExitFullscreen()}},hideLoadingIcon=()=>{let child=loadingNode.lastElementChild;while(child){loadingNode.removeChild(child);child=loadingNode.lastElementChild}};return{close:()=>{exitFullscreen();unlockBodyScroll();FocusLockManager.untrapFocus();layoutNode.remove();if(focusOnClose){try{focusOnClose.focus()}catch(e){}}},toggleFullscreen:()=>{if(document.exitRequestFullScreen){if(document.fullScreenElement===layoutNode){exitFullscreen()}else{requestFullscreen()}}else if(document.msExitFullscreen){if(document.msFullscreenElement===layoutNode){exitFullscreen()}else{requestFullscreen()}}else if(document.mozCancelFullScreen){if(document.mozFullScreenElement===layoutNode){exitFullscreen()}else{requestFullscreen()}}else if(document.webkitExitFullscreen){if(document.webkitFullscreenElement===layoutNode){exitFullscreen()}else{requestFullscreen()}}},requestFullscreen,exitFullscreen,getContainer:()=>{return contentNode},setContent:content=>{hideLoadingIcon();let child=contentNode.lastElementChild;while(child){contentNode.removeChild(child);child=contentNode.lastElementChild}contentNode.append(content)},showLoadingIcon:()=>{(0,_loadingicon.addIconToContainer)(loadingNode)},hideLoadingIcon}},lockBodyScroll=()=>{document.querySelector("body").classList.add("overflow-hidden")},unlockBodyScroll=()=>{document.querySelector("body").classList.remove("overflow-hidden")}});
//# sourceMappingURL=fullscreen.min.js.map
