define ("mod_forum/favourite_toggle",["jquery","core/templates","core/notification","mod_forum/repository","mod_forum/selectors","core/str"],function($,Templates,Notification,Repository,Selectors,String){return{init:function registerEventListeners(root,preventDefault,callback){root.on("click",Selectors.favourite.toggle,function(e){var toggleElement=$(this),forumId=toggleElement.data("forumid"),discussionId=toggleElement.data("discussionid"),subscriptionState=toggleElement.data("targetstate");Repository.setFavouriteDiscussionState(forumId,discussionId,subscriptionState).then(function(context){return callback(toggleElement,context)}).then(function(){return String.get_string("favouriteupdated","forum").done(function(s){return Notification.addNotification({message:s,type:"info"})})}).catch(Notification.exception);if(preventDefault){e.preventDefault()}})}}});
//# sourceMappingURL=favourite_toggle.min.js.map
