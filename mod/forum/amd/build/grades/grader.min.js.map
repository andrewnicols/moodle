{"version":3,"file":"grader.min.js","sources":["../../src/grades/grader.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * This module will tie together all of the different calls the gradable module will make.\n *\n * @module     mod_forum/grades/grader\n * @copyright  2019 Andrew Nicols <andrew@nicols.co.uk>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\nimport * as Selectors from './grader/selectors';\nimport Repository from 'mod_forum/repository';\nimport Templates from 'core/templates';\nimport * as Grader from '../local/grades/grader';\nimport Notification from 'core/notification';\nimport CourseRepository from 'core_course/repository';\nimport {relativeUrl} from 'core/url';\n\nconst templateNames = {\n    contentRegion: 'mod_forum/grades/grader/discussion/posts',\n};\n\n/**\n * Curried function with CMID set, this is then used in unified grader as a fetch a users content.\n *\n * @param {Number} cmid\n * @param {Bool} experimentalDisplayMode\n * @return {Function}\n */\nconst getContentForUserIdFunction = (cmid, experimentalDisplayMode) => (userid) => {\n    /**\n     * Given the parent function is called with the second param set execute the partially executed function.\n     *\n     * @param {Number} userid\n     */\n    return Repository.getDiscussionByUserID(userid, cmid)\n        .then(context => {\n            // Rebuild the returned data for the template.\n            context.discussions = context.discussions.map(discussionPostMapper);\n            context.experimentaldisplaymode = experimentalDisplayMode ? true : false;\n\n            return Templates.render(templateNames.contentRegion, context);\n        })\n        .catch(Notification.exception);\n};\n\n/**\n * Curried function with CMID set, this is then used in unified grader as a fetch users call.\n * The function curried fetches all users in a course for a given CMID.\n *\n * @param {Number} cmid\n * @param {Number} groupID\n * @param {Boolean} onlyActive Whether to fetch only the active enrolled users or all enrolled users in the course.\n * @return {Array} Array of users for a given context.\n */\nconst getUsersForCmidFunction = (cmid, groupID, onlyActive) => async() => {\n    const context = await CourseRepository.getUsersFromCourseModuleID(cmid, groupID, onlyActive);\n\n    return context.users;\n};\n\n\nconst findGradableNode = node => node.closest(Selectors.gradableItem);\n\n/**\n * For a discussion we need to manipulate it's posts to hide certain UI elements.\n *\n * @param {Object} discussion\n * @return {Array} name, id, posts\n */\nconst discussionPostMapper = (discussion) => {\n    // Map postid => post.\n    const parentMap = new Map();\n    discussion.posts.parentposts.forEach(post => parentMap.set(post.id, post));\n    const userPosts = discussion.posts.userposts.map(post => {\n        post.readonly = true;\n        post.hasreplies = false;\n        post.replies = [];\n\n        const parent = post.parentid ? parentMap.get(post.parentid) : null;\n        if (parent) {\n            parent.hasreplies = false;\n            parent.replies = [];\n            parent.readonly = true;\n            post.parentauthorname = parent.author.fullname;\n        }\n\n        return {\n            parent,\n            post\n        };\n    });\n\n    return {\n        ...discussion,\n        posts: userPosts,\n    };\n};\n\n/**\n * Launch the Grader.\n *\n * @param {HTMLElement} rootNode the root HTML element describing what is to be graded\n * @param {object} param\n * @param {bool} [param.focusOnClose=null]\n */\nconst launchWholeForumGrading = async(rootNode, {\n    focusOnClose = null,\n} = {}) => {\n    const data = rootNode.dataset;\n    const gradingPanelFunctions = await Grader.getGradingPanelFunctions(\n        'mod_forum',\n        data.contextid,\n        data.gradingComponent,\n        data.gradingComponentSubtype,\n        data.gradableItemtype\n    );\n\n    const groupID = data.group ? data.group : 0;\n    const onlyActive = data.gradeOnlyActiveUsers;\n\n    await Grader.launch(\n        getUsersForCmidFunction(data.cmid, groupID, onlyActive),\n        getContentForUserIdFunction(data.cmid, data.experimentalDisplayMode == \"1\"),\n        gradingPanelFunctions.getter,\n        gradingPanelFunctions.setter,\n        {\n            groupid: data.groupid,\n            initialUserId: data.initialuserid,\n            moduleName: data.name,\n            courseName: data.courseName,\n            courseUrl: relativeUrl('/course/view.php', {id: data.courseId}),\n            sendStudentNotifications: data.sendStudentNotifications,\n            focusOnClose,\n        }\n    );\n};\n\n/**\n * Launch the Grader.\n *\n * @param {HTMLElement} rootNode the root HTML element describing what is to be graded\n * @param {object} param\n * @param {bool} [param.focusOnClose=null]\n */\nconst launchViewGrading = async(rootNode, {\n    focusOnClose = null,\n} = {}) => {\n    const data = rootNode.dataset;\n    const gradingPanelFunctions = await Grader.getGradingPanelFunctions(\n        'mod_forum',\n        data.contextid,\n        data.gradingComponent,\n        data.gradingComponentSubtype,\n        data.gradableItemtype\n    );\n\n    await Grader.view(\n        gradingPanelFunctions.getter,\n        data.userid,\n        data.name,\n        {\n            focusOnClose,\n        }\n    );\n};\n\n/**\n * Register listeners to launch the grading panel.\n */\nexport const registerLaunchListeners = () => {\n    document.addEventListener('click', async(e) => {\n        if (e.target.matches(Selectors.launch)) {\n            const rootNode = findGradableNode(e.target);\n\n            if (!rootNode) {\n                throw Error('Unable to find a gradable item');\n            }\n\n            if (rootNode.matches(Selectors.gradableItems.wholeForum)) {\n                // Note: The preventDefault must be before any async function calls because the function becomes async\n                // at that point and the default action is implemented.\n                e.preventDefault();\n                try {\n                    await launchWholeForumGrading(rootNode, {\n                        focusOnClose: e.target,\n                    });\n                } catch (error) {\n                    Notification.exception(error);\n                }\n            } else {\n                throw Error('Unable to find a valid gradable item');\n            }\n        }\n        if (e.target.matches(Selectors.viewGrade)) {\n            e.preventDefault();\n            const rootNode = findGradableNode(e.target);\n\n            if (!rootNode) {\n                throw Error('Unable to find a gradable item');\n            }\n\n            if (rootNode.matches(Selectors.gradableItems.wholeForum)) {\n                // Note: The preventDefault must be before any async function calls because the function becomes async\n                // at that point and the default action is implemented.\n                e.preventDefault();\n                try {\n                    await launchViewGrading(rootNode, {\n                        focusOnClose: e.target,\n                    });\n                } catch (error) {\n                    Notification.exception(error);\n                }\n            } else {\n                throw Error('Unable to find a valid gradable item');\n            }\n        }\n    });\n};\n"],"names":["_interopRequireDefault","obj","__esModule","default","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","_interopRequireWildcard","_typeof","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","value","arg","input","hint","prim","Symbol","toPrimitive","undefined","res","TypeError","String","Number","_toPrimitive","_toPropertyKey","configurable","writable","_regeneratorRuntime","exports","Op","hasOwn","$Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","makeInvokeMethod","tryCatch","fn","type","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","method","_invoke","AsyncIterator","PromiseImpl","invoke","resolve","reject","record","result","__await","then","unwrapped","error","previousPromise","callInvokeWithMethodAndArg","state","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","done","methodName","return","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","displayName","isGeneratorFunction","genFun","ctor","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","val","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","asyncGeneratorStep","gen","_next","_throw","_asyncToGenerator","args","Selectors","_repository","_templates","Grader","_notification","_repository2","_ref2","_ref4","templateNames","getContentForUserIdFunction","cmid","experimentalDisplayMode","userid","Repository","getDiscussionByUserID","discussions","map","discussionPostMapper","experimentaldisplaymode","Templates","render","Notification","getUsersForCmidFunction","groupID","onlyActive","_callee","_context","CourseRepository","getUsersFromCourseModuleID","users","findGradableNode","node","closest","gradableItem","discussion","parentMap","Map","posts","parentposts","post","id","userPosts","userposts","readonly","hasreplies","replies","parent","parentid","parentauthorname","author","fullname","launchWholeForumGrading","_callee2","rootNode","_ref3$focusOnClose","focusOnClose","data","gradingPanelFunctions","_args2","_context2","dataset","getGradingPanelFunctions","contextid","gradingComponent","gradingComponentSubtype","gradableItemtype","group","gradeOnlyActiveUsers","launch","getter","setter","groupid","initialUserId","initialuserid","moduleName","courseName","courseUrl","relativeUrl","courseId","sendStudentNotifications","_x","launchViewGrading","_callee3","_ref5$focusOnClose","_args3","_context3","view","_x2","_exports","registerLaunchListeners","_ref6","document","addEventListener","_callee4","e","_rootNode","_context4","matches","gradableItems","wholeForum","preventDefault","t0","viewGrade","t1","_x3"],"mappings":"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"}