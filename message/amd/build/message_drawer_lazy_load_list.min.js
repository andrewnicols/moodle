define ("core_message/message_drawer_lazy_load_list",["jquery","core/custom_interaction_events"],function($,CustomEvents){var SELECTORS={ROOT:"[data-region=\"lazy-load-list\"]",LOADING_ICON_CONTAINER:"[data-region=\"loading-icon-container\"]",CONTENT_CONTAINER:"[data-region=\"content-container\"]",EMPTY_MESSAGE:"[data-region=\"empty-message-container\"]",PLACEHOLDER:"[data-region=\"placeholder-container\"]"},startLoading=function(root){root.attr("data-loading",!0)},stopLoading=function(root){root.attr("data-loading",!1)},isLoading=function(root){return"true"===root.attr("data-loading")},getUserId=function(root){return root.attr("data-user-id")},getContentContainer=function(root){return root.find(SELECTORS.CONTENT_CONTAINER)},showLoadingIcon=function(root){root.find(SELECTORS.LOADING_ICON_CONTAINER).removeClass("hidden")},hideLoadingIcon=function(root){root.find(SELECTORS.LOADING_ICON_CONTAINER).addClass("hidden")},showEmptyMessage=function(root){root.find(SELECTORS.EMPTY_MESSAGE).removeClass("hidden")},showPlaceholder=function(root){root.find(SELECTORS.PLACEHOLDER).removeClass("hidden")},hidePlaceholder=function(root){root.find(SELECTORS.PLACEHOLDER).addClass("hidden")},showContent=function(root){getContentContainer(root).removeClass("hidden")},hideContent=function(root){getContentContainer(root).addClass("hidden")},hasLoadedAll=function(root){return"true"==root.attr("data-loaded-all")},setLoadedAll=function(root,value){root.attr("data-loaded-all",value)},canLoadMore=function(root){return!hasLoadedAll(root)&&!isLoading(root)},loadAndRender=function(root,loadCallback,renderCallback){var userId=getUserId(root);startLoading(root);return loadCallback(root,userId).then(function(items){if(0<items.length){var contentContainer=getContentContainer(root);return renderCallback(contentContainer,items,userId).then(function(){return items})}else{return items}}).then(function(items){stopLoading(root);root.attr("data-seen",!0);if(!items.length){setLoadedAll(root,!0)}return items}).catch(function(){stopLoading(root);root.attr("data-seen",!0)})},initialLoadAndRender=function(root,loadCallback,renderCallback){getContentContainer(root).empty();showPlaceholder(root);hideContent(root);return loadAndRender(root,loadCallback,renderCallback).then(function(items){hidePlaceholder(root);if(!items.length){showEmptyMessage(root)}else{showContent(root)}}).catch(function(){hidePlaceholder(root);showContent(root)})},registerEventListeners=function(root,loadCallback,renderCallback){CustomEvents.define(root,[CustomEvents.events.scrollBottom]);root.on(CustomEvents.events.scrollBottom,function(){if(canLoadMore(root)){showLoadingIcon(root);loadAndRender(root,loadCallback,renderCallback).then(function(){return hideLoadingIcon(root)}).catch(function(){return hideLoadingIcon(root)})}})};return{show:function show(root,loadCallback,renderCallback){root=$(root);if(!root.attr("data-init")){registerEventListeners(root,loadCallback,renderCallback);initialLoadAndRender(root,loadCallback,renderCallback);root.attr("data-init",!0)}},getContentContainer:getContentContainer,getRoot:function getRoot(containerElement){return containerElement.find(SELECTORS.ROOT)},setLoadedAll:setLoadedAll,showEmptyMessage:showEmptyMessage,hideEmptyMessage:function hideEmptyMessage(root){root.find(SELECTORS.EMPTY_MESSAGE).addClass("hidden")},showContent:showContent,hideContent:hideContent}});
//# sourceMappingURL=message_drawer_lazy_load_list.min.js.map
