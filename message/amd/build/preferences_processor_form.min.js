define ("core_message/preferences_processor_form",["jquery","core/ajax","core/notification"],function($,Ajax,Notification){var ProcessorForm=function(element){this.root=$(element);this.userId=this.root.attr("data-user-id");this.name=this.root.attr("data-processor-name");this.root.find("form").on("submit",function(e){e.preventDefault();this.save().done(function(){$(element).trigger("mpp:formsubmitted")})}.bind(this))};ProcessorForm.prototype.startLoading=function(){this.root.addClass("loading")};ProcessorForm.prototype.stopLoading=function(){this.root.removeClass("loading")};ProcessorForm.prototype.isLoading=function(){return this.root.hasClass("loading")};ProcessorForm.prototype.save=function(){if(this.isLoading()){return $.Deferred()}this.startLoading();var data=this.root.find("form").serializeArray(),request={methodname:"core_message_message_processor_config_form",args:{userid:this.userId,name:this.name,formvalues:data}};return Ajax.call([request])[0].fail(Notification.exception).always(function(){this.stopLoading()}.bind(this))};return ProcessorForm});
//# sourceMappingURL=preferences_processor_form.min.js.map
