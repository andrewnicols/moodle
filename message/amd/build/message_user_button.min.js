define ("core_message/message_user_button",["jquery","core/custom_interaction_events","core_message/message_drawer_helper","core/templates"],function($,CustomEvents,MessageDrawerHelper,Templates){var SELECTORS={MESSAGE_TEXTAREA:"[data-region=\"send-message-txt\"]",MESSAGE_USER_BUTTON:"#message-user-button",MESSAGE_JUMP:"[data-region=\"jumpto\"]"},TEMPLATES={CONTENT:"core_message/message_jumpto"},getUserId=function(element){return parseInt(element.attr("data-userid"))},getConversationId=function(element){return parseInt(element.attr("data-conversationid"))};return{send:function send(element){element=$(element);var args={conversationid:getConversationId(element),buttonid:$(element).attr("id"),userid:getUserId(element)};Templates.render(TEMPLATES.CONTENT,{}).then(function(html){element.after(html)}).then(function(){$(SELECTORS.MESSAGE_USER_BUTTON).next().focus(function(){$(SELECTORS.MESSAGE_TEXTAREA).focus()})});CustomEvents.define(element,[CustomEvents.events.activate]);element.on(CustomEvents.events.activate,function(e,data){if($(e.target).hasClass("active")){MessageDrawerHelper.hide();$(SELECTORS.MESSAGE_USER_BUTTON).next().attr("tabindex",-1)}else{$(SELECTORS.MESSAGE_USER_BUTTON).next().attr("tabindex",0);if(args.conversationid){MessageDrawerHelper.showConversation(args)}else{MessageDrawerHelper.createConversationWithUser(args)}}$(e.target).focus();$(e.target).toggleClass("active");e.preventDefault();data.originalEvent.preventDefault()})}}});
//# sourceMappingURL=message_user_button.min.js.map
