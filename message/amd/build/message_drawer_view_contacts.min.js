define ("core_message/message_drawer_view_contacts",["jquery","core/pubsub","core/str","core_message/message_drawer_events","core_message/message_drawer_view_contacts_section_contacts","core_message/message_drawer_view_contacts_section_requests"],function($,PubSub,Str,MessageDrawerEvents,ContactsSection,RequestsSection){var SELECTORS={ACTION_SHOW_CONTACTS_SECTION:"[data-action=\"show-contacts-section\"]",ACTION_SHOW_REQUESTS_SECTION:"[data-action=\"show-requests-section\"]",CONTACT_REQUEST_COUNT:"[data-region=\"contact-request-count\"]",CONTACTS_SECTION_CONTAINER:"[data-section=\"contacts\"]",REQUESTS_SECTION_CONTAINER:"[data-section=\"requests\"]"},getContactsSectionContainer=function(body){return body.find(SELECTORS.CONTACTS_SECTION_CONTAINER)},getRequestsSectionContainer=function(body){return body.find(SELECTORS.REQUESTS_SECTION_CONTAINER)},getShowContactsAction=function(body){return body.find(SELECTORS.ACTION_SHOW_CONTACTS_SECTION)},getShowRequestsAction=function(body){return body.find(SELECTORS.ACTION_SHOW_REQUESTS_SECTION)},isSectionVisible=function(sectionRoot){return sectionRoot.hasClass("active")},decrementContactRequestCount=function(body){return function(){var countContainer=body.find(SELECTORS.CONTACT_REQUEST_COUNT),count=parseInt(countContainer.text(),10);count=isNaN(count)?0:count-1;if(0>=count){countContainer.addClass("hidden")}else{countContainer.text(count)}}},registerEventListeners=function(body){var contactsSection=getContactsSectionContainer(body),requestsSection=getRequestsSectionContainer(body),showContactsAction=getShowContactsAction(body),showRequestsAction=getShowRequestsAction(body);showContactsAction.on("show.bs.tab",function(){ContactsSection.show(contactsSection)});showRequestsAction.on("show.bs.tab",function(){RequestsSection.show(requestsSection)});PubSub.subscribe(MessageDrawerEvents.CONTACT_REQUEST_ACCEPTED,decrementContactRequestCount(body));PubSub.subscribe(MessageDrawerEvents.CONTACT_REQUEST_DECLINED,decrementContactRequestCount(body))};return{show:function show(namespace,header,body,footer,tab){body=$(body);if(!body.attr("data-contacts-init")){registerEventListeners(body);body.attr("data-contacts-init",!0)}var contactsSection=getContactsSectionContainer(body),requestsSection=getRequestsSectionContainer(body);if(tab){var showContactsAction=getShowContactsAction(body),showRequestsAction=getShowRequestsAction(body);if("requests"==tab){showContactsAction.removeClass("active");contactsSection.removeClass("show active");showRequestsAction.addClass("active");requestsSection.addClass("show active")}else{showRequestsAction.removeClass("active");requestsSection.removeClass("show active");showContactsAction.addClass("active");contactsSection.addClass("show active")}}if(isSectionVisible(contactsSection)){ContactsSection.show(contactsSection)}else{RequestsSection.show(requestsSection)}return $.Deferred().resolve().promise()},description:function description(){return Str.get_string("messagedrawerviewcontacts","core_message")}}});
//# sourceMappingURL=message_drawer_view_contacts.min.js.map
