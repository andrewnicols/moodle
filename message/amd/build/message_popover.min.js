define ("core_message/message_popover",["jquery","core/custom_interaction_events","core/pubsub","core_message/message_drawer_events"],function($,CustomEvents,PubSub,MessageDrawerEvents){var SELECTORS={COUNT_CONTAINER:"[data-region=\"count-container\"]"},toggleMessageDrawerVisibility=function(buttonid){PubSub.publish(MessageDrawerEvents.TOGGLE_VISIBILITY,buttonid)},handleDecrementConversationCount=function(button){return function(){var countContainer=button.find(SELECTORS.COUNT_CONTAINER),count=parseInt(countContainer.text(),10);if(isNaN(count)){countContainer.addClass("hidden")}else if(!count||2>count){countContainer.addClass("hidden")}else{count=count-1;countContainer.text(count)}}},registerEventListeners=function(button){CustomEvents.define(button,[CustomEvents.events.activate]);button.on(CustomEvents.events.activate,function(e,data){toggleMessageDrawerVisibility(button.attr("id"));button.focus();data.originalEvent.preventDefault()});PubSub.subscribe(MessageDrawerEvents.CONVERSATION_READ,handleDecrementConversationCount(button));PubSub.subscribe(MessageDrawerEvents.CONTACT_REQUEST_ACCEPTED,handleDecrementConversationCount(button));PubSub.subscribe(MessageDrawerEvents.CONTACT_REQUEST_DECLINED,handleDecrementConversationCount(button))};return{init:function init(button){button=$(button);registerEventListeners(button)}}});
//# sourceMappingURL=message_popover.min.js.map
