define ("block_starredcourses/main",["jquery","core/notification","block_starredcourses/repository","core/pubsub","core/templates","core_course/events"],function($,Notification,Repository,PubSub,Templates,CourseEvents){var SELECTORS={BLOCK_CONTAINER:"[data-region=\"starred-courses\"]",STARRED_COURSES_REGION_VIEW:"[data-region=\"starred-courses-view\"]",STARRED_COURSES_REGION:"[data-region=\"starred-courses-view-content\"]"},renderCourses=function(root,courses){if(0<courses.length){return Templates.render("core_course/view-cards",{courses:courses})}else{var nocoursesimg=root.find(SELECTORS.STARRED_COURSES_REGION_VIEW).attr("data-nocoursesimg");return Templates.render("block_starredcourses/no-courses",{nocoursesimg:nocoursesimg})}},reloadContent=function(root){var content=root.find(SELECTORS.STARRED_COURSES_REGION);return Repository.getStarredCourses({limit:0,offset:0}).then(function(courses){var showcoursecategory=$(SELECTORS.BLOCK_CONTAINER).data("displaycoursecategory");courses=courses.map(function(course){course.showcoursecategory=showcoursecategory;return course});return renderCourses(root,courses)}).then(function(html,js){return Templates.replaceNodeContents(content,html,js)}).catch(Notification.exception)},registerEventListeners=function(root){PubSub.subscribe(CourseEvents.favourited,function(){reloadContent(root)});PubSub.subscribe(CourseEvents.unfavorited,function(){reloadContent(root)})};return{init:function init(root){root=$(root);registerEventListeners(root);reloadContent(root)}}});
//# sourceMappingURL=main.min.js.map
