define ("block_myoverview/view_nav",["jquery","core/custom_interaction_events","block_myoverview/repository","block_myoverview/view","block_myoverview/selectors"],function($,CustomEvents,Repository,View,Selectors){var SELECTORS={FILTERS:"[data-region=\"filter\"]",FILTER_OPTION:"[data-filter]",DISPLAY_OPTION:"[data-display-option]"},updatePreferences=function(filter,value){var type=null;if("display"==filter){type="block_myoverview_user_view_preference"}else if("sort"==filter){type="block_myoverview_user_sort_preference"}else if("customfieldvalue"==filter){type="block_myoverview_user_grouping_customfieldvalue_preference"}else{type="block_myoverview_user_grouping_preference"}Repository.updateUserPreferences({preferences:[{type:type,value:value}]})},registerSelector=function(root){var Selector=root.find(SELECTORS.FILTERS);CustomEvents.define(Selector,[CustomEvents.events.activate]);Selector.on(CustomEvents.events.activate,SELECTORS.FILTER_OPTION,function(e,data){var option=$(e.target);if(option.hasClass("active")){return}var filter=option.attr("data-filter"),pref=option.attr("data-pref"),customfieldvalue=option.attr("data-customfieldvalue");root.find(Selectors.courseView.region).attr("data-"+filter,option.attr("data-value"));updatePreferences(filter,pref);if(customfieldvalue){root.find(Selectors.courseView.region).attr("data-customfieldvalue",customfieldvalue);updatePreferences("customfieldvalue",customfieldvalue)}View.init(root);data.originalEvent.preventDefault()});CustomEvents.define(Selector,[CustomEvents.events.activate]);Selector.on(CustomEvents.events.activate,SELECTORS.DISPLAY_OPTION,function(e,data){var option=$(e.target);if(option.hasClass("active")){return}var filter=option.attr("data-display-option"),pref=option.attr("data-pref");root.find(Selectors.courseView.region).attr("data-display",option.attr("data-value"));updatePreferences(filter,pref);View.reset(root);data.originalEvent.preventDefault()})};return{init:function init(root){root=$(root);registerSelector(root)}}});
//# sourceMappingURL=view_nav.min.js.map
