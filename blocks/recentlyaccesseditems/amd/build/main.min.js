define("block_recentlyaccesseditems/main",["exports","jquery","./repository","core/notification","core/templates"],(function(_exports,_jquery,_repository,_notification,_templates){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * Javascript to initialise the Recently accessed items block.
   *
   * @module     block_recentlyaccesseditems/main
   * @copyright  2018 Victor Deniz <victor@moodle.com>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_jquery=_interopRequireDefault(_jquery),_notification=_interopRequireDefault(_notification),_templates=_interopRequireDefault(_templates);const Selectors_CARDDECK_CONTAINER='[data-region="recentlyaccesseditems-view"]',Selectors_CARDDECK='[data-region="recentlyaccesseditems-view-content"]',Selectors_SHOWMORE_LINK='[data-region="recentlyaccesseditems-view"] [data-action="more-items"]';_exports.init=async root=>{const itemsContainer=(root=(0,_jquery.default)(root)).find(Selectors_CARDDECK_CONTAINER),itemsContent=root.find(Selectors_CARDDECK);try{const items=await(0,_repository.getRecentItems)(9),{html:html,js:js}=await function(root,items){return items.length>0?_templates.default.renderForPromise("block_recentlyaccesseditems/view-cards",{items:items,hasmoreitems:items.length>3}):_templates.default.renderForPromise("block_recentlyaccesseditems/no-items",{noitemsimgurl:root.attr("data-noitemsimgurl")})}(itemsContainer,items);_templates.default.replaceNodeContents(itemsContent,html,js),items.length>3&&(()=>{const showmoreLink=document.querySelector(Selectors_SHOWMORE_LINK);showmoreLink.addEventListener("click",(()=>{showmoreLink.classList.add("d-none"),document.querySelector('[data-region="items-list"]').children.forEach((function(hiddenItem){hiddenItem.style="display: block"}))}))})()}catch(error){_notification.default.exception(error)}}}));

//# sourceMappingURL=main.min.js.map