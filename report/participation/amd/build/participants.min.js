define ("report_participation/participants",["exports","jquery","core/custom_interaction_events","core/modal_events","core/notification","core_user/local/participants/bulkactions"],function(_exports,_jquery,_custom_interaction_events,_modal_events,_notification,_bulkactions){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.init=void 0;_jquery=_interopRequireDefault(_jquery);_custom_interaction_events=_interopRequireDefault(_custom_interaction_events);_modal_events=_interopRequireDefault(_modal_events);_notification=_interopRequireDefault(_notification);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Selectors={bulkActionSelect:"#formactionid",bulkUserSelectedCheckBoxes:"input[data-togglegroup^='participants-table'][data-toggle='slave']:checked",participantsForm:"#participantsform"};_exports.init=function init(){var root=document.querySelector(Selectors.participantsForm),registerEventListeners=function(){_custom_interaction_events.default.define(Selectors.bulkActionSelect,[_custom_interaction_events.default.events.accessibleChange]);(0,_jquery.default)(Selectors.bulkActionSelect).on(_custom_interaction_events.default.events.accessibleChange,function(e){var action=e.target.value,checkboxes=root.querySelectorAll(Selectors.bulkUserSelectedCheckBoxes);if(-1!==action.indexOf("#")){e.preventDefault();var ids=[];checkboxes.forEach(function(checkbox){ids.push(checkbox.getAttribute("name").replace("user",""))});if("#messageselect"===action){(0,_bulkactions.showSendMessage)(ids).then(function(modal){modal.getRoot().on(_modal_events.default.hidden,function(){var bulkActionSelector=root.querySelector(Selectors.bulkActionSelect);resetBulkAction(bulkActionSelector);bulkActionSelector.focus()});return modal}).catch(_notification.default.exception)}}else if(""!==action&&checkboxes.length){e.target.form().submit()}resetBulkAction(e.target)})},resetBulkAction=function(bulkActionSelect){bulkActionSelect.value=""};registerEventListeners()}});
//# sourceMappingURL=participants.min.js.map
