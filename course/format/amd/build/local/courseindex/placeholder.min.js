function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}define ("core_courseformat/local/courseindex/placeholder",["exports","core/reactive","core/templates","core_courseformat/courseeditor","core/pending"],function(_exports,_reactive,_templates,_courseeditor,_pending){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.default=void 0;_templates=_interopRequireDefault(_templates);_pending=_interopRequireDefault(_pending);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0,descriptor;i<props.length;i++){descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1;descriptor.configurable=!0;if("value"in descriptor)descriptor.writable=!0;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:!1});return Constructor}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}});Object.defineProperty(subClass,"prototype",{writable:!1});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"===_typeof(call)||"function"==typeof call)){return call}else if(void 0!==call){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(void 0===self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return!0}catch(e){return!1}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}var Component=function(_BaseComponent){_inherits(Component,_BaseComponent);var _super=_createSuper(Component);function Component(){_classCallCheck(this,Component);return _super.apply(this,arguments)}_createClass(Component,[{key:"create",value:function create(){this.pendingContent=new _pending.default("core_courseformat/placeholder:loadcourseindex")}},{key:"stateReady",value:function(){var _stateReady=_asyncToGenerator(regeneratorRuntime.mark(function _callee(state){return regeneratorRuntime.wrap(function(_context){while(1){switch(_context.prev=_context.next){case 0:if(this.loadStaticContent()){_context.next=3;break}_context.next=3;return this.loadTemplateContent(state);case 3:case"end":return _context.stop();}}},_callee,this)}));return function stateReady(){return _stateReady.apply(this,arguments)}}()},{key:"loadStaticContent",value:function loadStaticContent(){var index=this.reactive.getStorageValue("courseIndex");if(index.html&&index.js){_templates.default.replaceNode(this.element,index.html,index.js);this.pendingContent.resolve();return!0}return!1}},{key:"loadTemplateContent",value:function(){var _loadTemplateContent=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(state){var exporter,data,_yield$Templates$rend,html,js;return regeneratorRuntime.wrap(function(_context2){while(1){switch(_context2.prev=_context2.next){case 0:exporter=this.reactive.getExporter();data=exporter.course(state);_context2.prev=2;_context2.next=5;return _templates.default.renderForPromise("core_courseformat/local/courseindex/courseindex",data);case 5:_yield$Templates$rend=_context2.sent;html=_yield$Templates$rend.html;js=_yield$Templates$rend.js;_templates.default.replaceNode(this.element,html,js);this.pendingContent.resolve();this.reactive.setStorageValue("courseIndex",{html:html,js:js});_context2.next=17;break;case 13:_context2.prev=13;_context2.t0=_context2["catch"](2);this.pendingContent.resolve(_context2.t0);throw _context2.t0;case 17:case"end":return _context2.stop();}}},_callee2,this,[[2,13]])}));return function loadTemplateContent(){return _loadTemplateContent.apply(this,arguments)}}()}],[{key:"init",value:function init(target,selectors){return new Component({element:document.getElementById(target),reactive:(0,_courseeditor.getCurrentCourseEditor)(),selectors:selectors})}}]);return Component}(_reactive.BaseComponent);_exports.default=Component;return _exports.default});
//# sourceMappingURL=placeholder.min.js.map
