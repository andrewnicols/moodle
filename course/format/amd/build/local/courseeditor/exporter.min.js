define ("core_courseformat/local/courseeditor/exporter",["exports"],function(_exports){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.default=void 0;function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1,source;i<arguments.length;i++){source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0,descriptor;i<props.length;i++){descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1;descriptor.configurable=!0;if("value"in descriptor)descriptor.writable=!0;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:!1});return Constructor}var _default=function(){function _default(reactive){_classCallCheck(this,_default);this.reactive=reactive;this.COMPLETIONS=["incomplete","complete","complete","fail"]}_createClass(_default,[{key:"course",value:function course(state){var _state$course$highlig,_state$course$section,_this=this,data={sections:[],editmode:this.reactive.isEditing,highlighted:null!==(_state$course$highlig=state.course.highlighted)&&void 0!==_state$course$highlig?_state$course$highlig:""},sectionlist=null!==(_state$course$section=state.course.sectionlist)&&void 0!==_state$course$section?_state$course$section:[];sectionlist.forEach(function(sectionid){var _state$section$get,sectioninfo=null!==(_state$section$get=state.section.get(sectionid))&&void 0!==_state$section$get?_state$section$get:{},section=_this.section(state,sectioninfo);data.sections.push(section)});data.hassections=0!=data.sections.length;return data}},{key:"section",value:function(state,sectioninfo){var _state$course$highlig2,_sectioninfo$cmlist,_this2=this,section=_objectSpread(_objectSpread({},sectioninfo),{},{highlighted:null!==(_state$course$highlig2=state.course.highlighted)&&void 0!==_state$course$highlig2?_state$course$highlig2:"",cms:[]}),cmlist=null!==(_sectioninfo$cmlist=sectioninfo.cmlist)&&void 0!==_sectioninfo$cmlist?_sectioninfo$cmlist:[];cmlist.forEach(function(cmid){var cminfo=state.cm.get(cmid),cm=_this2.cm(state,cminfo);section.cms.push(cm)});section.hascms=0!=section.cms.length;return section}},{key:"cm",value:function(state,cminfo){var cm=_objectSpread(_objectSpread({},cminfo),{},{isactive:!1});return cm}},{key:"cmDraggableData",value:function cmDraggableData(state,cmid){var cminfo=state.cm.get(cmid);if(!cminfo){return null}var nextcmid,section=state.section.get(cminfo.sectionid),currentindex=null===section||void 0===section?void 0:section.cmlist.indexOf(cminfo.id);if(currentindex!==void 0){nextcmid=null===section||void 0===section?void 0:section.cmlist[currentindex+1]}return{type:"cm",id:cminfo.id,name:cminfo.name,sectionid:cminfo.sectionid,nextcmid:nextcmid}}},{key:"sectionDraggableData",value:function sectionDraggableData(state,sectionid){var sectioninfo=state.section.get(sectionid);if(!sectioninfo){return null}return{type:"section",id:sectioninfo.id,name:sectioninfo.name,number:sectioninfo.number}}},{key:"cmCompletion",value:function cmCompletion(state,cminfo){var data={statename:"",state:"NaN"};if(cminfo.completionstate!==void 0){var _this$COMPLETIONS$cmi;data.state=cminfo.completionstate;data.hasstate=!0;var statename=null!==(_this$COMPLETIONS$cmi=this.COMPLETIONS[cminfo.completionstate])&&void 0!==_this$COMPLETIONS$cmi?_this$COMPLETIONS$cmi:"NaN";data["is".concat(statename)]=!0}return data}},{key:"allItemsArray",value:function allItemsArray(state){var _state$course$section2,items=[],sectionlist=null!==(_state$course$section2=state.course.sectionlist)&&void 0!==_state$course$section2?_state$course$section2:[];sectionlist.forEach(function(sectionid){var _sectioninfo$cmlist2,sectioninfo=state.section.get(sectionid);items.push({type:"section",id:sectioninfo.id,url:sectioninfo.sectionurl});var cmlist=null!==(_sectioninfo$cmlist2=sectioninfo.cmlist)&&void 0!==_sectioninfo$cmlist2?_sectioninfo$cmlist2:[];cmlist.forEach(function(cmid){var cminfo=state.cm.get(cmid);items.push({type:"cm",id:cminfo.id,url:cminfo.url})})});return items}}]);return _default}();_exports.default=_default;return _exports.default});
//# sourceMappingURL=exporter.min.js.map
