define ("core_courseformat/local/courseeditor/dndsection",["exports","core/reactive"],function(_exports,_reactive){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.default=void 0;class _default extends _reactive.BaseComponent{configState(state){this.id=this.element.dataset.id;this.section=state.section.get(this.id);this.course=state.course}configDragDrop(sectionitem){if(this.reactive.isEditing&&this.reactive.supportComponents){this.sectionitem=sectionitem;this.dragdrop=new _reactive.DragDrop(this);this.classes=this.dragdrop.getClasses()}}destroy(){if(this.sectionitem!==void 0){this.sectionitem.unregister()}if(this.dragdrop!==void 0){this.dragdrop.unregister()}}getLastCm(){return null}dragStart(dropdata){this.reactive.dispatch("sectionDrag",[dropdata.id],!0)}dragEnd(dropdata){this.reactive.dispatch("sectionDrag",[dropdata.id],!1)}validateDropData(dropdata){if("cm"===(null===dropdata||void 0===dropdata?void 0:dropdata.type)){return!0}if("section"===(null===dropdata||void 0===dropdata?void 0:dropdata.type)){const sectionzeroid=this.course.sectionlist[0];return(null===dropdata||void 0===dropdata?void 0:dropdata.id)!=this.id&&(null===dropdata||void 0===dropdata?void 0:dropdata.id)!=sectionzeroid&&this.id!=sectionzeroid}return!1}showDropZone(dropdata){if("cm"==dropdata.type){var _this$getLastCm;null===(_this$getLastCm=this.getLastCm())||void 0===_this$getLastCm?void 0:_this$getLastCm.classList.add(this.classes.DROPDOWN)}if("section"==dropdata.type){if(this.section.number>dropdata.number){this.element.classList.remove(this.classes.DROPUP);this.element.classList.add(this.classes.DROPDOWN)}else{this.element.classList.add(this.classes.DROPUP);this.element.classList.remove(this.classes.DROPDOWN)}}}hideDropZone(){var _this$getLastCm2;null===(_this$getLastCm2=this.getLastCm())||void 0===_this$getLastCm2?void 0:_this$getLastCm2.classList.remove(this.classes.DROPDOWN);this.element.classList.remove(this.classes.DROPUP);this.element.classList.remove(this.classes.DROPDOWN)}drop(dropdata){if("cm"==dropdata.type){this.reactive.dispatch("cmMove",[dropdata.id],this.id)}if("section"==dropdata.type){this.reactive.dispatch("sectionMove",[dropdata.id],this.id)}}}_exports.default=_default;return _exports.default});
//# sourceMappingURL=dndsection.min.js.map
