{"version":3,"file":"manual_completion_toggle.min.js","sources":["../src/manual_completion_toggle.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Provides the functionality for toggling the manual completion state of a course module through\n * the manual completion button.\n *\n * @module      core_course/manual_completion_toggle\n * @copyright   2021 Jun Pataleta <jun@moodle.com>\n * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport Templates from 'core/templates';\nimport Notification from 'core/notification';\nimport {toggleManualCompletion} from 'core_course/repository';\nimport * as CourseEvents from 'core_course/events';\n\n/**\n * Selectors in the manual completion template.\n *\n * @type {{MANUAL_TOGGLE: string}}\n */\nconst SELECTORS = {\n    MANUAL_TOGGLE: 'button[data-action=toggle-manual-completion]',\n};\n\n/**\n * Toggle type values for the data-toggletype attribute in the core_course/completion_manual template.\n *\n * @type {{TOGGLE_UNDO: string, TOGGLE_MARK_DONE: string}}\n */\nconst TOGGLE_TYPES = {\n    TOGGLE_MARK_DONE: 'manual:mark-done',\n    TOGGLE_UNDO: 'manual:undo',\n};\n\n/**\n * Whether the event listener has already been registered for this module.\n *\n * @type {boolean}\n */\nlet registered = false;\n\n/**\n * Registers the click event listener for the manual completion toggle button.\n */\nexport const init = () => {\n    if (registered) {\n        return;\n    }\n    document.addEventListener('click', (e) => {\n        const toggleButton = e.target.closest(SELECTORS.MANUAL_TOGGLE);\n        if (toggleButton) {\n            e.preventDefault();\n            toggleManualCompletionState(toggleButton).catch(Notification.exception);\n        }\n    });\n    registered = true;\n};\n\n/**\n * Toggles the manual completion state of the module for the given user.\n *\n * @param {HTMLElement} toggleButton\n * @returns {Promise<void>}\n */\nconst toggleManualCompletionState = async(toggleButton) => {\n    // Make a copy of the original content of the button.\n    const originalInnerHtml = toggleButton.innerHTML;\n\n    // Disable the button to prevent double clicks.\n    toggleButton.setAttribute('disabled', 'disabled');\n\n    // Get button data.\n    const toggleType = toggleButton.getAttribute('data-toggletype');\n    const cmid = toggleButton.getAttribute('data-cmid');\n    const activityname = toggleButton.getAttribute('data-activityname');\n    // Get the target completion state.\n    const completed = toggleType === TOGGLE_TYPES.TOGGLE_MARK_DONE;\n\n    // Replace the button contents with the loading icon.\n    const loadingHtml = await Templates.render('core/loading', {});\n    await Templates.replaceNodeContents(toggleButton, loadingHtml, '');\n\n    try {\n        // Call the webservice to update the manual completion status.\n        await toggleManualCompletion(cmid, completed);\n\n        // All good so far. Refresh the manual completion button to reflect its new state by re-rendering the template.\n        const templateContext = {\n            cmid: cmid,\n            activityname: activityname,\n            overallcomplete: completed,\n            overallincomplete: !completed,\n            istrackeduser: true, // We know that we're tracking completion for this user given the presence of this button.\n        };\n        const renderObject = await Templates.renderForPromise('core_course/completion_manual', templateContext);\n\n        // Replace the toggle button with the newly loaded template.\n        const replacedNode = await Templates.replaceNode(toggleButton, renderObject.html, renderObject.js);\n        const newToggleButton = replacedNode.pop();\n\n        // Build manualCompletionToggled custom event.\n        const withAvailability = toggleButton.getAttribute('data-withavailability');\n        const toggledEvent = new CustomEvent(CourseEvents.manualCompletionToggled, {\n            bubbles: true,\n            detail: {\n                cmid,\n                activityname,\n                completed,\n                withAvailability,\n            }\n        });\n        // Dispatch the manualCompletionToggled custom event.\n        newToggleButton.dispatchEvent(toggledEvent);\n\n    } catch (exception) {\n        // In case of an error, revert the original state and appearance of the button.\n        toggleButton.removeAttribute('disabled');\n        toggleButton.innerHTML = originalInnerHtml;\n\n        // Show the exception.\n        Notification.exception(exception);\n    }\n};\n"],"names":["_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","_interopRequireDefault","obj","__esModule","default","_regeneratorRuntime","exports","Op","Object","prototype","hasOwn","hasOwnProperty","defineProperty","key","desc","value","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","makeInvokeMethod","tryCatch","fn","arg","type","call","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","method","_invoke","AsyncIterator","PromiseImpl","invoke","resolve","reject","record","result","_typeof","__await","then","unwrapped","error","previousPromise","callInvokeWithMethodAndArg","state","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","done","methodName","undefined","return","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","length","i","displayName","isGeneratorFunction","genFun","ctor","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","keys","val","object","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","asyncGeneratorStep","gen","_next","_throw","_templates","_notification","CourseEvents","cache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","set","_interopRequireWildcard","SELECTORS","TOGGLE_TYPES","registered","_exports","init","document","addEventListener","e","toggleButton","target","closest","preventDefault","toggleManualCompletionState","Notification","_ref","_callee","originalInnerHtml","toggleType","cmid","activityname","completed","loadingHtml","templateContext","renderObject","replacedNode","newToggleButton","withAvailability","toggledEvent","_context","innerHTML","setAttribute","getAttribute","Templates","render","replaceNodeContents","toggleManualCompletion","overallcomplete","overallincomplete","istrackeduser","renderForPromise","replaceNode","html","js","CustomEvent","manualCompletionToggled","bubbles","detail","dispatchEvent","t0","removeAttribute","args","arguments","apply","_x"],"mappings":"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"}